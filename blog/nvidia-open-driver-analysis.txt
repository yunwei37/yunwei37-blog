1:"$Sreact.fragment"
2:I[1478,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"ThemeProviders"]
3:I[4091,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"default"]
4:I[9243,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],""]
5:I[7392,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"KBarSearchProvider"]
6:I[6874,["874","static/chunks/874-8edb22cc7428423c.js","63","static/chunks/63-d245e42a784ca56d.js","909","static/chunks/app/blog/%5B...slug%5D/page-1ed2702378ba9d6b.js"],""]
e:I[8393,[],""]
:HL["/_next/static/media/36966cca54120369-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/4ac7c0f872b74ee7.css","style"]
:HL["/_next/static/css/a06d7e24bf9a7d93.css","style"]
:HL["/_next/static/css/7246298b30c42979.css","style"]
0:{"P":null,"b":"MYXrWUjg0HELsl6zLYF_6","p":"","c":["","blog","nvidia-open-driver-analysis"],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","nvidia-open-driver-analysis","c"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4ac7c0f872b74ee7.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/a06d7e24bf9a7d93.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en-us","className":"__variable_dd5b2f scroll-smooth","suppressHydrationWarning":true,"children":[["$","link",null,{"rel":"apple-touch-icon","sizes":"76x76","href":"/static/favicons/apple-touch-icon.png"}],["$","link",null,{"rel":"icon","type":"image/svg+xml","href":"/static/favicons/favicon.svg"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"32x32","href":"/static/favicons/favicon-32x32.png"}],["$","link",null,{"rel":"icon","type":"image/png","sizes":"16x16","href":"/static/favicons/favicon-16x16.png"}],["$","link",null,{"rel":"manifest","href":"/static/favicons/site.webmanifest"}],["$","link",null,{"rel":"mask-icon","href":"/static/favicons/safari-pinned-tab.svg","color":"#5bbad5"}],["$","meta",null,{"name":"msapplication-TileColor","content":"#000000"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: light)","content":"#fff"}],["$","meta",null,{"name":"theme-color","media":"(prefers-color-scheme: dark)","content":"#000"}],["$","link",null,{"rel":"alternate","type":"application/rss+xml","href":"/feed.xml"}],["$","body",null,{"className":"pl-[calc(100vw-100%)] text-black antialiased dark:text-white min-h-screen","children":["$","$L2",null,{"children":[["$","$L3",null,{}],["$undefined","$undefined","$undefined",["$","$L4",null,{"async":true,"defer":true,"src":"https://analytics.umami.is/script.js"}],"$undefined","$undefined"],["$","div",null,{"className":"min-h-screen flex flex-col justify-center py-8","children":["$","div",null,{"className":"content-glass mx-auto w-full max-w-5xl px-4 sm:px-6 xl:px-8 py-8","children":["$","$L5",null,{"kbarConfig":{"searchDocumentsPath":"/search.json"},"children":[["$","header",null,{"className":"flex items-center w-full justify-between py-6 border-b border-gray-200/30 dark:border-gray-700/30","children":[["$","$L6",null,{"className":"break-words","href":"/","aria-label":"yunwei37","children":["$","div",null,{"className":"flex items-center","children":[["$","div",null,{"className":"mr-3","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","width":40,"height":40,"fill":"none","children":[["$","defs",null,{"children":[["$","linearGradient",null,{"id":"logo_svg__a","x1":"0%","x2":"100%","y1":"0%","y2":"100%","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#3b82f6","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#06b6d4","stopOpacity":1}}]]}],["$","linearGradient",null,{"id":"logo_svg__b","x1":"0%","x2":"100%","y1":"0%","y2":"100%","children":[["$","stop",null,{"offset":"0%","style":{"stopColor":"#8b5cf6","stopOpacity":1}}],["$","stop",null,{"offset":"100%","style":{"stopColor":"#3b82f6","stopOpacity":1}}]]}]]}],["$","circle",null,{"cx":20,"cy":20,"r":18,"fill":"url(#logo_svg__a)","opacity":0.1}],["$","path",null,{"fill":"url(#logo_svg__a)","d":"m12 8 6 10v10h4V18l6-10h-4l-4 6-4-6Z"}],["$","path",null,{"fill":"url(#logo_svg__b)","d":"m8 24 4 8 4-8 4 8 4-8h8v4h-6l-4 8-4-8-4 8-4-8H8Z","opacity":0.8}],["$","circle",null,{"cx":32,"cy":12,"r":2,"fill":"url(#logo_svg__b)"}],["$","circle",null,{"cx":8,"cy":12,"r":1.5,"fill":"url(#logo_svg__a)","opacity":0.6}]]}]}],["$","div",null,{"className":"hidden text-2xl font-bold sm:block hover:text-primary-600 dark:hover:text-primary-400 transition-colors","children":"yunwei37"}]]}]}],["$","div",null,{"className":"flex items-center space-x-4","children":[["$","div",null,{"className":"no-scrollbar hidden items-center space-x-2 sm:flex","children":[["$","$L6","Blog",{"className":"px-3 py-2 rounded-lg transition-all duration-200 font-medium hover:text-primary-600 dark:hover:text-primary-400","href":"/blog","children":"Blog"}],["$","$L6","Docs",{"className":"px-3 py-2 rounded-lg transition-all duration-200 font-medium hover:text-primary-600 dark:hover:text-primary-400","href":"/docs","children":"Docs"}],["$","$L6","Tags",{"className":"px-3 py-2 rounded-lg transition-all duration-200 font-medium hover:text-primary-600 dark:hover:text-primary-400","href":"/tags","children":"Tags"}],["$","$L6","About",{"className":"px-3 py-2 rounded-lg transition-all duration-200 font-medium hover:text-primary-600 dark:hover:text-primary-400","href":"/about","children":"About"}]]}],"$L7"]}]]}],"$L8","$L9"]}]}]}]]}]}]]}]]}],{"children":["blog","$La",{"children":[["slug","nvidia-open-driver-analysis","c"],"$Lb",{"children":["__PAGE__","$Lc",{},null,false]},null,false]},null,false]},null,false],"$Ld",false]],"m":"$undefined","G":["$e",[]],"s":false,"S":true}
f:I[4159,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"KBarButton"]
10:I[1762,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"default"]
11:I[7298,["874","static/chunks/874-8edb22cc7428423c.js","650","static/chunks/650-5bb235cd9bfca45d.js","177","static/chunks/app/layout-66df3ac28fcfbced.js"],"default"]
12:I[7555,[],""]
13:I[1295,[],""]
1e:I[9665,[],"OutletBoundary"]
20:I[4911,[],"AsyncMetadataOutlet"]
22:I[9665,[],"ViewportBoundary"]
24:I[9665,[],"MetadataBoundary"]
25:"$Sreact.suspense"
7:["$","div",null,{"className":"flex items-center space-x-2","children":[["$","$Lf",null,{"aria-label":"Search","className":"p-2 rounded-lg transition-all duration-200","children":["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","strokeWidth":1.5,"stroke":"currentColor","className":"h-6 w-6 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","children":["$","path",null,{"strokeLinecap":"round","strokeLinejoin":"round","d":"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}]}]}],["$","$L10",null,{}],["$","$L11",null,{}]]}]
8:["$","main",null,{"className":"py-6","children":["$","$L12",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L13",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","div",null,{"className":"flex flex-col items-start justify-start md:mt-24 md:flex-row md:items-center md:justify-center md:space-x-6","children":[["$","div",null,{"className":"space-x-2 pt-6 pb-8 md:space-y-5","children":["$","h1",null,{"className":"text-6xl leading-9 font-extrabold tracking-tight md:border-r-2 md:px-6 md:text-8xl md:leading-14","children":"404"}]}],["$","div",null,{"className":"max-w-md","children":[["$","p",null,{"className":"mb-4 text-xl leading-normal font-bold md:text-2xl","children":"Sorry we couldn't find this page."}],["$","p",null,{"className":"mb-8","children":"But dont worry, you can find plenty of other things on our homepage."}],["$","$L6",null,{"className":"focus:shadow-outline-blue inline rounded-lg border border-transparent bg-blue-600 px-4 py-2 text-sm leading-5 font-medium text-white shadow-xs transition-colors duration-150 hover:bg-blue-700 focus:outline-hidden dark:hover:bg-blue-500","href":"/","children":"Back to homepage"}]]}]]}],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]
9:["$","footer",null,{"className":"border-t border-gray-200/30 dark:border-gray-700/30 pt-8","children":["$","div",null,{"className":"flex flex-col items-center space-y-6","children":[["$","div",null,{"className":"flex flex-wrap justify-center gap-4","children":[["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"mailto:yunwei356@gmail.com","children":[["$","span",null,{"className":"sr-only","children":"mail"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 20 20","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Mail"}],["$","path",null,{"d":"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}],["$","path",null,{"d":"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/yunwei37","children":[["$","span",null,{"className":"sr-only","children":"github"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"GitHub"}],["$","path",null,{"d":"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://facebook.com","children":[["$","span",null,{"className":"sr-only","children":"facebook"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Facebook"}],["$","path",null,{"d":"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"}]]}]]}],["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://youtube.com","children":[["$","span",null,{"className":"sr-only","children":"youtube"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Youtube"}],["$","path",null,{"d":"M23.499 6.203a3.008 3.008 0 00-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 00-2.088 2.09A31.258 31.26 0 000 12.01a31.258 31.26 0 00.523 5.785 3.008 3.008 0 002.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 002.089-2.09 31.258 31.26 0 00.5-5.784 31.258 31.26 0 00-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"}]]}]]}],"$L14","$L15","$L16","$L17","$L18","$L19","$L1a"]}],"$L1b","$L1c"]}]}]
a:["$","$1","c",{"children":[null,["$","$L12",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L13",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
b:["$","$1","c",{"children":[null,["$","$L12",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L13",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}]
c:["$","$1","c",{"children":["$L1d",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/7246298b30c42979.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L1e",null,{"children":["$L1f",["$","$L20",null,{"promise":"$@21"}]]}]]}]
d:["$","$1","h",{"children":[null,[["$","$L22",null,{"children":"$L23"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L24",null,{"children":["$","div",null,{"hidden":true,"children":["$","$25",null,{"fallback":null,"children":"$L26"}]}]}]]}]
14:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.linkedin.com/in/yusheng-zheng-611920280","children":[["$","span",null,{"className":"sr-only","children":"linkedin"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Linkedin"}],["$","path",null,{"d":"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"}]]}]]}]
15:null
16:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://bsky.app/","children":[["$","span",null,{"className":"sr-only","children":"bluesky"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Bluesky"}],["$","path",null,{"d":"M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565C.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479c.815 2.736 3.713 3.66 6.383 3.364q.204-.03.415-.056q-.207.033-.415.056c-3.912.58-7.387 2.005-2.83 7.078c5.013 5.19 6.87-1.113 7.823-4.308c.953 3.195 2.05 9.271 7.733 4.308c4.267-4.308 1.172-6.498-2.74-7.078a9 9 0 0 1-.415-.056q.21.026.415.056c2.67.297 5.568-.628 6.383-3.364c.246-.828.624-5.79.624-6.478c0-.69-.139-1.861-.902-2.206c-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8"}]]}]]}]
17:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://x.com/yunwei37","children":[["$","span",null,{"className":"sr-only","children":"x"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"X"}],["$","path",null,{"d":"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"}]]}]]}]
27:T69f,M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z18:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.instagram.com","children":[["$","span",null,{"className":"sr-only","children":"instagram"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Instagram"}],["$","path",null,{"d":"$27"}]]}]]}]
28:T498,M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.589 12c.027 3.086.718 5.496 2.057 7.164 1.43 1.783 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.8-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.75-.192 1.352-.622 2.446-1.284 3.272-.886 1.102-2.14 1.704-3.73 1.79-1.202.065-2.361-.218-3.259-.801-1.063-.689-1.685-1.74-1.752-2.964-.065-1.19.408-2.285 1.33-3.082.88-.76 2.119-1.207 3.583-1.291a13.853 13.853 0 0 1 3.02.142c-.126-.742-.375-1.332-.75-1.757-.513-.586-1.308-.883-2.359-.89h-.029c-.844 0-1.992.232-2.721 1.32L7.734 7.847c.98-1.454 2.568-2.256 4.478-2.256h.044c3.194.02 5.097 1.975 5.287 5.388.108.046.216.094.321.142 1.49.7 2.58 1.761 3.154 3.07.797 1.82.871 4.79-1.548 7.158-1.85 1.81-4.094 2.628-7.277 2.65Zm1.003-11.69c-.242 0-.487.007-.739.021-1.836.103-2.98.946-2.916 2.143.067 1.256 1.452 1.839 2.784 1.767 1.224-.065 2.818-.543 3.086-3.71a10.5 10.5 0 0 0-2.215-.221z19:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://www.threads.net","children":[["$","span",null,{"className":"sr-only","children":"threads"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Threads"}],["$","path",null,{"d":"$28"}]]}]]}]
1a:["$","a",null,{"className":"text-sm text-gray-500 transition hover:text-gray-600","target":"_blank","rel":"noopener noreferrer","href":"https://medium.com","children":[["$","span",null,{"className":"sr-only","children":"medium"}],["$","svg",null,{"xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 24 24","className":"hover:text-primary-500 dark:hover:text-primary-400 fill-current text-gray-700 dark:text-gray-200 h-6 w-6","children":[["$","title",null,{"children":"Medium"}],["$","path",null,{"d":"M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"}]]}]]}]
1b:["$","div",null,{"className":"flex space-x-2 text-sm opacity-80","children":[["$","div",null,{"children":"Yusheng Zheng"}],["$","div",null,{"children":" • "}],["$","div",null,{"children":"© 2026"}],["$","div",null,{"children":" • "}],["$","$L6",null,{"className":"hover:text-primary-500 transition-colors","href":"/","children":"云微的胡思乱想"}]]}]
1c:["$","div",null,{"className":"text-sm opacity-60","children":["$","a",null,{"className":"hover:text-primary-500 transition-colors","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/timlrx/tailwind-nextjs-starter-blog","children":"Tailwind Nextjs Theme"}]}]
29:I[1839,["874","static/chunks/874-8edb22cc7428423c.js","63","static/chunks/63-d245e42a784ca56d.js","909","static/chunks/app/blog/%5B...slug%5D/page-1ed2702378ba9d6b.js"],"default"]
2a:I[3063,["874","static/chunks/874-8edb22cc7428423c.js","63","static/chunks/63-d245e42a784ca56d.js","909","static/chunks/app/blog/%5B...slug%5D/page-1ed2702378ba9d6b.js"],"Image"]
1d:[["$","script",null,{"type":"application/ld+json","dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis\",\"datePublished\":\"2025-10-14T16:00:00.000Z\",\"dateModified\":\"2025-10-14T16:00:00.000Z\",\"image\":\"/static/images/twitter-card.png\",\"url\":\"https://www.yunwei37.com/blog/nvidia-open-driver-analysis\",\"author\":[{\"@type\":\"Person\",\"name\":\"Yusheng Zheng (云微)\"}]}"}}],["$","section",null,{"className":"mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0","children":[["$","$L29",null,{}],["$","article",null,{"className":"content-glass p-8","children":["$","div",null,{"className":"xl:divide-y xl:divide-gray-200/30 xl:dark:divide-gray-700/30","children":[["$","header",null,{"className":"pt-6 xl:pb-6","children":["$","div",null,{"className":"space-y-4 text-center","children":[["$","dl",null,{"className":"space-y-4","children":["$","div",null,{"children":[["$","dt",null,{"className":"sr-only","children":"Published on"}],["$","dd",null,{"className":"text-base leading-6 font-medium text-gray-600 dark:text-gray-300","children":["$","time",null,{"dateTime":"2025-10-14T16:00:00.000Z","children":"Tuesday, October 14, 2025"}]}]]}]}],["$","div",null,{"children":["$","h1",null,{"className":"text-3xl leading-9 font-extrabold tracking-tight sm:text-4xl sm:leading-10 md:text-5xl md:leading-14","children":"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis"}]}]]}]}],["$","div",null,{"className":"grid-rows-[auto_1fr] divide-y divide-gray-200/30 pb-8 xl:grid xl:grid-cols-4 xl:gap-x-8 xl:divide-y-0 dark:divide-gray-700/30","children":[["$","dl",null,{"className":"pt-6 pb-10 xl:border-b xl:border-gray-200/30 xl:pt-11 xl:dark:border-gray-700/30","children":[["$","dt",null,{"className":"sr-only","children":"Authors"}],["$","dd",null,{"children":["$","ul",null,{"className":"flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-y-6 xl:space-x-0","children":[["$","li","Yusheng Zheng (云微)",{"className":"flex items-center space-x-3 glass p-4 rounded-xl","children":[["$","$L2a",null,{"src":"/static/images/avatar.png","width":38,"height":38,"alt":"avatar","className":"h-10 w-10 rounded-full"}],["$","dl",null,{"className":"text-sm leading-5 font-medium whitespace-nowrap","children":[["$","dt",null,{"className":"sr-only","children":"Name"}],["$","dd",null,{"className":"text-gray-900 dark:text-gray-100","children":"Yusheng Zheng (云微)"}],["$","dt",null,{"className":"sr-only","children":"Twitter"}],["$","dd",null,{"children":["$","a",null,{"className":"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors","target":"_blank","rel":"noopener noreferrer","href":"https://twitter.com/yunwei37","children":"@yunwei37"}]}]]}]]}]]}]}]]}],["$","div",null,{"className":"divide-y divide-gray-200/30 xl:col-span-3 xl:row-span-2 xl:pb-0 dark:divide-gray-700/30","children":[["$","div",null,{"className":"prose dark:prose-invert max-w-none pt-10 pb-8 text-gray-700 dark:text-gray-200","children":[["$","h1",null,{"className":"content-header","id":"nvidia-open-gpu-kernel-modules-comprehensive-source-code-analysis","children":[["$","a",null,{"className":"break-words","href":"#nvidia-open-gpu-kernel-modules-comprehensive-source-code-analysis","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis"]}],"$L2b","$L2c","$L2d","$L2e","$L2f","$L30","$L31","$L32","$L33","$L34","$L35","$L36","$L37","$L38","$L39","$L3a","$L3b","$L3c","$L3d","$L3e","$L3f","$L40","$L41","$L42","$L43","$L44","$L45","$L46","$L47","$L48","$L49","$L4a","$L4b","$L4c","$L4d","$L4e","$L4f","$L50","$L51","$L52","$L53","$L54","$L55","$L56","$L57","$L58","$L59","$L5a","$L5b","$L5c","$L5d","$L5e","$L5f","$L60","$L61","$L62","$L63","$L64","$L65","$L66","$L67","$L68","$L69","$L6a","$L6b","$L6c","$L6d","$L6e","$L6f","$L70","$L71","$L72","$L73","$L74","$L75","$L76","$L77","$L78","$L79","$L7a","$L7b","$L7c","$L7d","$L7e","$L7f","$L80","$L81","$L82","$L83","$L84","$L85","$L86","$L87","$L88","$L89","$L8a","$L8b","$L8c","$L8d","$L8e","$L8f","$L90","$L91","$L92","$L93","$L94","$L95","$L96","$L97","$L98","$L99","$L9a","$L9b","$L9c","$L9d","$L9e","$L9f","$La0","$La1","$La2","$La3","$La4","$La5","$La6","$La7","$La8","$La9","$Laa","$Lab","$Lac","$Lad","$Lae","$Laf","$Lb0","$Lb1","$Lb2","$Lb3","$Lb4","$Lb5","$Lb6","$Lb7","$Lb8","$Lb9","$Lba","$Lbb","$Lbc","$Lbd","$Lbe","$Lbf","$Lc0","$Lc1","$Lc2","$Lc3","$Lc4","$Lc5","$Lc6","$Lc7","$Lc8","$Lc9","$Lca","$Lcb","$Lcc","$Lcd","$Lce","$Lcf","$Ld0","$Ld1","$Ld2","$Ld3","$Ld4","$Ld5","$Ld6","$Ld7","$Ld8","$Ld9","$Lda","$Ldb","$Ldc","$Ldd","$Lde","$Ldf","$Le0","$Le1","$Le2","$Le3","$Le4","$Le5","$Le6","$Le7","$Le8","$Le9","$Lea","$Leb","$Lec","$Led","$Lee","$Lef","$Lf0","$Lf1","$Lf2","$Lf3","$Lf4","$Lf5","$Lf6","$Lf7","$Lf8","$Lf9","$Lfa","$Lfb","$Lfc","$Lfd","$Lfe","$Lff","$L100","$L101","$L102","$L103","$L104","$L105","$L106","$L107","$L108","$L109","$L10a","$L10b","$L10c","$L10d","$L10e","$L10f","$L110","$L111","$L112","$L113","$L114","$L115","$L116","$L117","$L118","$L119","$L11a","$L11b","$L11c","$L11d","$L11e","$L11f","$L120","$L121","$L122","$L123","$L124","$L125","$L126","$L127","$L128","$L129","$L12a","$L12b","$L12c","$L12d","$L12e","$L12f","$L130","$L131","$L132","$L133","$L134","$L135","$L136","$L137","$L138","$L139","$L13a","$L13b","$L13c","$L13d","$L13e","$L13f","$L140","$L141","$L142","$L143","$L144","$L145","$L146","$L147","$L148","$L149","$L14a","$L14b","$L14c","$L14d","$L14e","$L14f","$L150","$L151","$L152","$L153","$L154","$L155","$L156","$L157","$L158","$L159","$L15a","$L15b","$L15c","$L15d","$L15e","$L15f","$L160","$L161","$L162","$L163","$L164","$L165","$L166","$L167","$L168","$L169","$L16a","$L16b","$L16c","$L16d","$L16e","$L16f","$L170","$L171","$L172","$L173","$L174","$L175","$L176","$L177","$L178","$L179","$L17a","$L17b","$L17c","$L17d","$L17e","$L17f","$L180","$L181","$L182","$L183","$L184","$L185","$L186","$L187","$L188","$L189","$L18a","$L18b","$L18c","$L18d","$L18e","$L18f","$L190","$L191","$L192","$L193","$L194","$L195","$L196","$L197","$L198","$L199","$L19a","$L19b","$L19c","$L19d","$L19e","$L19f","$L1a0","$L1a1","$L1a2","$L1a3","$L1a4","$L1a5","$L1a6","$L1a7","$L1a8","$L1a9","$L1aa","$L1ab","$L1ac","$L1ad","$L1ae","$L1af","$L1b0","$L1b1","$L1b2","$L1b3","$L1b4","$L1b5","$L1b6","$L1b7","$L1b8","$L1b9","$L1ba","$L1bb","$L1bc","$L1bd","$L1be","$L1bf","$L1c0","$L1c1","$L1c2","$L1c3","$L1c4","$L1c5","$L1c6","$L1c7","$L1c8","$L1c9","$L1ca","$L1cb","$L1cc","$L1cd","$L1ce","$L1cf","$L1d0","$L1d1","$L1d2","$L1d3","$L1d4","$L1d5","$L1d6","$L1d7","$L1d8","$L1d9","$L1da","$L1db","$L1dc","$L1dd","$L1de","$L1df","$L1e0","$L1e1","$L1e2","$L1e3","$L1e4","$L1e5","$L1e6","$L1e7","$L1e8","$L1e9","$L1ea","$L1eb","$L1ec","$L1ed","$L1ee","$L1ef","$L1f0","$L1f1","$L1f2","$L1f3","$L1f4","$L1f5","$L1f6","$L1f7","$L1f8","$L1f9","$L1fa","$L1fb","$L1fc","$L1fd","$L1fe","$L1ff","$L200","$L201","$L202","$L203","$L204","$L205","$L206","$L207","$L208","$L209","$L20a","$L20b","$L20c","$L20d","$L20e","$L20f","$L210","$L211","$L212","$L213","$L214","$L215","$L216","$L217","$L218","$L219","$L21a","$L21b","$L21c","$L21d","$L21e","$L21f","$L220","$L221","$L222","$L223","$L224","$L225","$L226","$L227","$L228","$L229","$L22a","$L22b","$L22c","$L22d","$L22e","$L22f","$L230","$L231","$L232","$L233"]}],"$L234","$L235"]}],"$L236"]}]]}]}]]}]]
237:I[2100,["874","static/chunks/874-8edb22cc7428423c.js","63","static/chunks/63-d245e42a784ca56d.js","909","static/chunks/app/blog/%5B...slug%5D/page-1ed2702378ba9d6b.js"],"default"]
3f6:I[1449,["874","static/chunks/874-8edb22cc7428423c.js","63","static/chunks/63-d245e42a784ca56d.js","909","static/chunks/app/blog/%5B...slug%5D/page-1ed2702378ba9d6b.js"],"default"]
2b:["$","p",null,{"children":"In May 2022, NVIDIA made a decision that would fundamentally alter the landscape of GPU computing on Linux: they open-sourced the kernel-mode components of their GPU driver. This wasn't a simple code dump. Instead, it was the release of over 935,000 lines of production-quality, battle-tested code that powers everything from consumer gaming rigs to the world's fastest supercomputers. For the first time, developers, researchers, and engineers could peer inside the machinery that manages some of the most complex hardware ever created."}]
2c:["$","p",null,{"children":"This document represents a comprehensive deep-dive into that codebase, providing a technical autopsy of one of the most sophisticated device drivers in the Linux ecosystem. Over the course of this analysis, we've examined every major subsystem, traced data flows through multiple abstraction layers, and documented architectural decisions that span over a decade of GPU evolution. What emerges is not just a driver, but a masterclass in systems programming: how to manage heterogeneous computing resources, how to maintain binary compatibility across wildly different hardware generations, and how to balance the competing demands of performance, security, and maintainability."}]
2d:["$","p",null,{"children":[["$","strong",null,{"children":"Version:"}]," 580.95.05 ",["$","strong",null,{"children":"Analysis Date:"}]," 2025-10-13 ",["$","strong",null,{"children":"License:"}]," Dual MIT/GPL ",["$","strong",null,{"children":"Repository:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/NVIDIA/open-gpu-kernel-modules","children":"https://github.com/NVIDIA/open-gpu-kernel-modules"}]]}]
2e:["$","h3",null,{"className":"content-header","id":"what-youll-discover","children":[["$","a",null,{"className":"break-words","href":"#what-youll-discover","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"What You'll Discover"]}]
2f:["$","p",null,{"children":"This analysis reveals the inner workings of a driver that must simultaneously:"}]
30:["$","ul",null,{"children":[["$","li",null,{"children":"Support nine distinct GPU architectures from 2014's Maxwell through 2024's Blackwell, each with fundamentally different hardware capabilities"}],["$","li",null,{"children":"Provide unified memory semantics across CPU and GPU address spaces, transparently migrating data at microsecond timescales"}],["$","li",null,{"children":"Drive displays at 8K resolution with HDR color while maintaining frame-perfect timing"}],["$","li",null,{"children":"Coordinate high-speed interconnects capable of 150 GB/s per link between dozens of GPUs"}],["$","li",null,{"children":"Secure computation in confidential computing environments where even the host OS is untrusted"}]]}]
31:["$","p",null,{"children":"We'll explore how the driver accomplishes these feats through sophisticated architectural patterns: Hardware Abstraction Layers that enable runtime polymorphism in C, lock-free message queues that coordinate between CPU and GPU firmware, and a build system so comprehensive it automatically adapts to six years of Linux kernel API evolution. Along the way, we'll encounter some surprising design decisions, like why DisplayPort is implemented in C++ in an otherwise pure-C codebase, or why NVIDIA built a custom code generator to bring object-oriented programming to kernel code."}]
32:["$","h3",null,{"className":"content-header","id":"a-hybrid-architecture-story","children":[["$","a",null,{"className":"break-words","href":"#a-hybrid-architecture-story","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"A Hybrid Architecture Story"]}]
33:["$","p",null,{"children":"Perhaps the most fascinating aspect is the hybrid open/proprietary architecture. The driver strategically divides functionality: OS integration code remains fully open for community review and improvement, while hardware-specific initialization sequences and scheduling algorithms remain proprietary, protecting decades of accumulated GPU engineering knowledge. This isn't just a business decision. Rather, it's an architectural philosophy that enables NVIDIA to maintain a single driver codebase across multiple operating systems while allowing each platform's community to optimize their specific integration points."}]
34:["$","p",null,{"children":["Particularly noteworthy is the ",["$","strong",null,{"children":"Unified Virtual Memory (UVM)"}]," subsystem, consisting of 103,318 lines of fully open-source code that rivals the Linux kernel's own memory management in sophistication. UVM implements automatic page migration between CPU and GPU, thrashing detection, multi-GPU coherence, and hardware-assisted access tracking. It represents NVIDIA's largest commitment to open-source infrastructure and demonstrates that advanced GPU features can be fully open while maintaining competitive performance."]}]
35:["$","hr",null,{}]
36:["$","h2",null,{"className":"content-header","id":"table-of-contents","children":[["$","a",null,{"className":"break-words","href":"#table-of-contents","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Table of Contents"]}]
37:["$","ol",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#executive-summary","children":"Executive Summary"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#overall-architecture-overview","children":"Overall Architecture Overview"}]}],["$","li",null,{"children":[["$","a",null,{"className":"break-words","href":"#component-analysis","children":"Component Analysis"}],["$","ul",null,{"children":[["$","li",null,{"children":["3.1 ",["$","a",null,{"className":"break-words","href":"#31-kernel-interface-layer-kernel-open","children":"Kernel Interface Layer (kernel-open/)"}]]}],["$","li",null,{"children":["3.2 ",["$","a",null,{"className":"break-words","href":"#32-common-libraries-and-utilities-srccommon","children":"Common Libraries and Utilities (src/common/)"}]]}],["$","li",null,{"children":["3.3 ",["$","a",null,{"className":"break-words","href":"#33-core-gpu-driver-srcnvidia","children":"Core GPU Driver (src/nvidia/)"}]]}],["$","li",null,{"children":["3.4 ",["$","a",null,{"className":"break-words","href":"#34-display-mode-setting-srcnvidia-modeset","children":"Display Mode-Setting (src/nvidia-modeset/)"}]]}]]}]]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#component-interaction-and-data-flow","children":"Component Interaction and Data Flow"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#build-system-and-integration","children":"Build System and Integration"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#development-guide","children":"Development Guide"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#key-findings-and-architectural-insights","children":"Key Findings and Architectural Insights"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","href":"#references","children":"References"}]}]]}]
38:["$","hr",null,{}]
39:["$","h2",null,{"className":"content-header","id":"1-executive-summary","children":[["$","a",null,{"className":"break-words","href":"#1-executive-summary","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"1. Executive Summary"]}]
3a:["$","p",null,{"children":["The NVIDIA Open GPU Kernel Modules represent a landmark achievement in GPU driver engineering, encompassing ",["$","strong",null,{"children":"over 935,000 lines of sophisticated, production-quality code"}]," that supports comprehensive GPU management across nine distinct hardware architectures spanning from Maxwell (2014) through the latest Blackwell generation (2024). This massive codebase provides full Linux kernel integration for NVIDIA GPUs, supporting kernel versions 4.15 and later, effectively covering over six years of Linux kernel evolution with a single, unified driver implementation."]}]
3b:["$","p",null,{"children":"This comprehensive analysis examines the complete driver stack in unprecedented detail, covering five distinct kernel modules, extensive common libraries providing foundational services, and comprehensive hardware support infrastructure that bridges the gap between Linux kernel abstractions and GPU-specific hardware capabilities. The driver architecture demonstrates sophisticated engineering across multiple dimensions: resource management, memory virtualization, display pipeline control, high-speed interconnect management, and security-critical operations."}]
3c:["$","h3",null,{"className":"content-header","id":"key-statistics","children":[["$","a",null,{"className":"break-words","href":"#key-statistics","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Key Statistics"]}]
3d:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Component"}],["$","th",null,{"children":"Files"}],["$","th",null,{"children":"LOC"}],["$","th",null,{"children":"Purpose"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"kernel-open/"}],["$","td",null,{"children":"454 (208 C, 246 H)"}],["$","td",null,{"children":"200,000+"}],["$","td",null,{"children":"Linux kernel interface layer"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"src/common/"}],["$","td",null,{"children":"1,391 (235 C, 1,156 H)"}],["$","td",null,{"children":"150,000+"}],["$","td",null,{"children":"Shared libraries and protocols"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"src/nvidia/"}],["$","td",null,{"children":"1,000+"}],["$","td",null,{"children":"500,000+"}],["$","td",null,{"children":"Core GPU driver implementation"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"src/nvidia-modeset/"}],["$","td",null,{"children":"100+"}],["$","td",null,{"children":"85,000+"}],["$","td",null,{"children":"Display mode-setting subsystem"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"Total"}]}],["$","td",null,{"children":["$","strong",null,{"children":"~3,000+"}]}],["$","td",null,{"children":["$","strong",null,{"children":"~935,000"}]}],["$","td",null,{"children":"Complete driver stack"}]]}]]}]]}]}]
3e:["$","h3",null,{"className":"content-header","id":"architecture-highlights","children":[["$","a",null,{"className":"break-words","href":"#architecture-highlights","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Architecture Highlights"]}]
3f:["$","p",null,{"children":["The driver architecture exhibits several distinguishing characteristics that define its design philosophy and capabilities. The ",["$","strong",null,{"children":"modular design"}]," separates OS-specific kernel interface code from OS-agnostic Resource Manager (RM) functionality, enabling the entire driver to be built from open source while maintaining a single codebase across multiple operating systems. This architecture enables ",["$","strong",null,{"children":"multi-generation support"}]," where a single driver binary seamlessly handles nine distinct GPU architectures through an extensive Hardware Abstraction Layer (HAL) that dispatches operations to generation-specific implementations at runtime."]}]
40:["$","p",null,{"children":["The system comprises ",["$","strong",null,{"children":"five kernel modules"}]," that partition functionality into specialized components:"]}]
41:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"nvidia.ko"}]," - Core GPU driver (38,762 LOC interface)"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia-uvm.ko"}]," - Unified Virtual Memory (103,318 LOC, ",["$","strong",null,{"children":"fully open source"}],")"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia-drm.ko"}]," - DRM/KMS integration (19 files)"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia-modeset.ko"}]," - Display mode setting (85,000+ LOC)"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia-peermem.ko"}]," - RDMA/P2P support (1 file)"]}]]}]
42:["$","p",null,{"children":["The driver delivers a ",["$","strong",null,{"children":"comprehensive feature set"}]," spanning advanced GPU capabilities including Unified Virtual Memory (UVM) for transparent CPU-GPU memory sharing, NVLink high-speed interconnects reaching 150 GB/s per link, DisplayPort Multi-Stream Transport for complex display topologies, High Dynamic Range (HDR) and Variable Refresh Rate (VRR) display technologies, Multi-Instance GPU (MIG) partitioning for secure multi-tenancy, and Confidential Computing features enabling encrypted GPU workloads. Supporting this sophisticated functionality requires an ",["$","strong",null,{"children":"advanced build system"}]," centered on a 195KB configuration testing script that validates compatibility with Linux kernels from 4.15 onward, automatically adapting to API changes across six-plus years of kernel evolution."]}]
43:["$","h3",null,{"className":"content-header","id":"architectural-philosophy","children":[["$","a",null,{"className":"break-words","href":"#architectural-philosophy","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Architectural Philosophy"]}]
44:["$","p",null,{"children":"The driver embodies a layered abstraction philosophy with clear separation of concerns across multiple dimensions. At its foundation, a sophisticated Hardware Abstraction Layer (HAL) enables seamless multi-generation GPU support, allowing a single driver codebase to manage hardware spanning over a decade of architectural evolution. The resource management framework, known as RESSERV, provides enterprise-grade object lifecycle management with hierarchical resource tracking and sophisticated locking mechanisms. Protocol libraries for DisplayPort, NVLink, and NVSwitch function as self-contained, reusable components that can be independently tested and evolved. Finally, a comprehensive OS abstraction layer ensures cross-platform compatibility, isolating platform-specific code into well-defined boundary layers that shield core driver logic from kernel API variations."}]
45:["$","hr",null,{}]
46:["$","h2",null,{"className":"content-header","id":"2-overall-architecture-overview","children":[["$","a",null,{"className":"break-words","href":"#2-overall-architecture-overview","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2. Overall Architecture Overview"]}]
47:["$","p",null,{"children":"Having established the scope and scale of the NVIDIA driver codebase, we now turn to understanding its fundamental architecture. The driver's design reflects decades of evolutionary refinement, balancing the competing demands of performance, maintainability, and hardware abstraction. In this section, we'll build a mental model of how the various components fit together, spanning from user-space applications down to the hardware registers themselves, and explore the initialization sequences that bring a GPU from cold silicon to a fully operational compute and graphics engine."}]
48:["$","p",null,{"children":"The architecture exhibits a clear philosophy: separate concerns through well-defined abstraction boundaries, but optimize relentlessly within those boundaries. We'll see how this philosophy manifests in the layering of kernel modules, the isolation of OS-specific code from hardware logic, and the careful choreography of initialization dependencies. Understanding this architecture is essential for making sense of the detailed component analyses that follow."}]
49:["$","h3",null,{"className":"content-header","id":"21-high-level-system-architecture","children":[["$","a",null,{"className":"break-words","href":"#21-high-level-system-architecture","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.1 High-Level System Architecture"]}]
4a:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                        ",["$","span",null,{"className":"token maybe-class-name","children":"User"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Space"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Applications"}],"                          │\n"]}],["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token constant","children":"CUDA"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Vulkan"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"OpenGL"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Video"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Codecs"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Compositors"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"X11"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Wayland"}],["$","span",null,{"className":"token punctuation","children":")"}],"  │\n"]}],["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                                    │\n"}],["$","span",null,{"className":"code-line","children":["                    ioctl",["$","span",null,{"className":"token punctuation","children":","}]," mmap",["$","span",null,{"className":"token punctuation","children":","}]," device file operations\n"]}],["$","span",null,{"className":"code-line","children":"                                    │\n"}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                        ",["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Module"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}],"                              │\n"]}],["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────────────────┤\n"}],["$","span",null,{"className":"code-line","children":"│  ┌──────────────────┐  ┌──────────────────┐  ┌────────────────────┐     │\n"}],["$","span",null,{"className":"code-line","children":["│  │   nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"  │  │ nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko│"}],"  │ nvidia",["$","span",null,{"className":"token operator","children":"-"}],"peermem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"  │     │\n"]}],["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token function","children":"│"}],"   ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"DRM"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"KMS"}],["$","span",null,{"className":"token punctuation","children":")"}],"      │  ",["$","span",null,{"className":"token function","children":"│"}],"  ","$L238","$L239"," ","$L23a","$L23b","  │  ","$L23c","  ","$L23d","$L23e"," ","$L23f","$L240","    │     │\n"]}],"$L241","$L242","$L243","$L244","$L245","$L246","$L247","$L248","$L249","$L24a","$L24b","$L24c","$L24d","$L24e","$L24f","$L250","$L251","$L252","$L253","$L254","$L255","$L256","$L257","$L258","$L259","$L25a","$L25b","$L25c","$L25d","$L25e","$L25f","$L260","$L261","$L262","$L263","$L264","$L265","$L266","$L267","$L268","$L269","$L26a","$L26b","$L26c","$L26d","$L26e","$L26f","$L270","$L271","$L272","$L273","$L274","$L275"]}]}]
4b:["$","h3",null,{"className":"content-header","id":"22-module-dependencies-and-initialization-sequence","children":[["$","a",null,{"className":"break-words","href":"#22-module-dependencies-and-initialization-sequence","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"2.2 Module Dependencies and Initialization Sequence"]}]
4c:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"System"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Boot"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1."}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," loads\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"PCI"}]," subsystem\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Probe"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," devices\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"*"}]," devices\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," nv",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"o_binary"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"RM"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"ACPI"}],["$","span",null,{"className":"token operator","children":"/"}],"power management\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Export"}]," interfaces ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," dependent modules\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," loads\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token keyword","children":"with"}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"o_binary"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," display ",["$","span",null,{"className":"token function","children":"subsystem"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NVKMS"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Export"}]," interfaces ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["$L276"," nvidia","$L277","uvm","$L278","$L279"," loads\n"]}],"$L27a","$L27b","$L27c","$L27d","$L27e","$L27f","$L280","$L281","$L282","$L283","$L284","$L285","$L286","$L287","$L288","$L289","$L28a","$L28b"]}]}]
4d:["$","hr",null,{}]
4e:["$","h2",null,{"className":"content-header","id":"3-component-analysis","children":[["$","a",null,{"className":"break-words","href":"#3-component-analysis","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3. Component Analysis"]}]
4f:["$","p",null,{"children":["With the architectural overview providing our map, we now embark on a detailed exploration of each major component in the driver stack. This journey takes us through over 3,000 files and 935,000 lines of code, examining the implementation details, design patterns, and engineering trade-offs that define each subsystem. Rather than a dry catalog of functions and data structures, this analysis reveals the ",["$","em",null,{"children":"why"}]," behind the ",["$","em",null,{"children":"what"}],": the reasoning that led to particular architectural choices and the lessons embedded in this production code."]}]
50:["$","p",null,{"children":"We'll proceed from the outside in: starting with the kernel interface layer that presents a Linux face to the world, moving through the common libraries that provide foundational services, diving into the core GPU driver that orchestrates hardware, and concluding with the display subsystem that brings pixels to your screen. Each component tells part of a larger story about how modern GPU drivers manage complexity while delivering exceptional performance."}]
51:["$","h3",null,{"className":"content-header","id":"31-kernel-interface-layer-kernel-open","children":[["$","a",null,{"className":"break-words","href":"#31-kernel-interface-layer-kernel-open","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1 Kernel Interface Layer (kernel-open/)"]}]
52:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Linux kernel interface layer providing OS abstraction for NVIDIA GPU hardware. Acts as a translation layer between Linux kernel APIs and the stable ABI provided by proprietary RM core."]}]
53:["$","h4",null,{"className":"content-header","id":"311-nvidiako---core-gpu-kernel-driver","children":[["$","a",null,{"className":"break-words","href":"#311-nvidiako---core-gpu-kernel-driver","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1.1 nvidia.ko - Core GPU Kernel Driver"]}]
54:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
55:["$","ul",null,{"children":[["$","li",null,{"children":"59 C files (~38,762 LOC)"}],["$","li",null,{"children":"Hybrid architecture: open interface + proprietary binary"}],["$","li",null,{"children":"Supports x86_64, arm64, riscv architectures"}]]}]
56:["$","p",null,{"children":["$","strong",null,{"children":"Major Components:"}]}]
57:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Component"}],["$","th",null,{"children":"Files"}],["$","th",null,{"children":"Purpose"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"Main Driver Core"}],["$","td",null,{"children":"nv.c (159,862 lines)"}],["$","td",null,{"children":"Initialization, device mgmt, file ops, interrupts"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Memory Management"}],["$","td",null,{"children":"nv-mmap.c, nv-vm.c, nv-dma.c (25,820 lines)"}],["$","td",null,{"children":"GPU memory mapping, DMA ops, IOMMU"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"DMA-BUF"}],["$","td",null,{"children":"nv-dmabuf.c (49,107 lines)"}],["$","td",null,{"children":"Cross-device buffer sharing"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"PCI/PCIe"}],["$","td",null,{"children":"nv-pci.c, os-pci.c"}],["$","td",null,{"children":"Device enumeration, BAR mapping, MSI/MSI-X"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"ACPI"}],["$","td",null,{"children":"nv-acpi.c (41,810 lines)"}],["$","td",null,{"children":"Power mgmt, Optimus, backlight"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"NVLink"}],["$","td",null,{"children":"nvlink_linux.c, nvlink_caps.c"}],["$","td",null,{"children":"Interconnect support"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"NVSwitch"}],["$","td",null,{"children":"linux_nvswitch.c (61,971 lines)"}],["$","td",null,{"children":"Fabric management"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Crypto"}],["$","td",null,{"children":"libspdm_*.c (15 files)"}],["$","td",null,{"children":"SPDM for secure attestation"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"P2P"}],["$","td",null,{"children":"nv-p2p.c"}],["$","td",null,{"children":"Peer-to-peer GPU memory, RDMA"}]]}]]}]]}]}]
58:["$","p",null,{"children":["$","strong",null,{"children":"Data Flow Example - GPU Memory Access:"}]}]
59:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Application"}]," → ",["$","span",null,{"className":"token function","children":"open"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2."}]," ",["$","span",null,{"className":"token function property-access method","children":"ioctl"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NV_ESC_ALLOC_MEMORY"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"RM"}]," allocates ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"3."}]," ",["$","span",null,{"className":"token function property-access method","children":"mmap"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":")"}]," → nv",["$","span",null,{"className":"token operator","children":"-"}],"mmap",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}]," maps into user space\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"4."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"User"}]," reads",["$","span",null,{"className":"token operator","children":"/"}],"writes ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory directly\n"]}]]}]}]
5a:["$","p",null,{"children":["$","strong",null,{"children":"Key Implementation Details:"}]}]
5b:["$","p",null,{"children":[["$","strong",null,{"children":"nv.c - The Central Hub"}]," (159,862 lines)"]}]
5c:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"nvidia_init_module()"}],": Registers PCI driver, creates /dev/nvidiactl"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia_probe()"}],": Called for each GPU, maps BARs, sets up IRQs"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia_ioctl()"}],": Dispatches 200+ ioctl commands to RM"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia_isr()"}]," → ",["$","code",null,{"children":"nvidia_isr_kthread()"}],": Two-stage interrupt handling (top/bottom half)"]}],["$","li",null,{"children":[["$","code",null,{"children":"nvidia_mmap()"}],": Maps framebuffer, registers, or system memory based on offset"]}],["$","li",null,{"children":"Handles PM states: D0 (on), D3hot (software off), D3cold (hardware off)"}]]}]
5d:["$","p",null,{"children":[["$","strong",null,{"children":"Cryptography (libspdm)"}],": 15 files implement SPDM protocol"]}]
5e:["$","ul",null,{"children":[["$","li",null,{"children":"Used for GPU attestation in Confidential Computing (Hopper+)"}],["$","li",null,{"children":"Supports: RSA-2048/3072, ECDSA-P256/P384, AES-128-GCM, SHA-256/384/512"}],["$","li",null,{"children":"Validates GPU firmware signatures against certificate chains"}],["$","li",null,{"children":"Enables encrypted communication channel with GSP-RM"}]]}]
5f:["$","p",null,{"children":[["$","strong",null,{"children":"Tegra SoC Support"}],": Deep integration for Jetson platforms"]}]
60:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"nv-bpmp.c"}],": IPC with Boot and Power Management Processor"]}],["$","li",null,{"children":[["$","code",null,{"children":"nv-host1x.c"}],": Command submission via Tegra's Host1x engine"]}],["$","li",null,{"children":[["$","code",null,{"children":"nv-dsi-parse-panel-props.c"}]," (32,501 lines): Parses device tree for DSI panel config"]}],["$","li",null,{"children":"Enables mobile/embedded GPU use cases"}]]}]
61:["$","h4",null,{"className":"content-header","id":"312-nvidia-uvmko---unified-virtual-memory","children":[["$","a",null,{"className":"break-words","href":"#312-nvidia-uvmko---unified-virtual-memory","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1.2 nvidia-uvm.ko - Unified Virtual Memory"]}]
62:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
63:["$","ul",null,{"children":[["$","li",null,{"children":"127 C files (~103,318 LOC)"}],["$","li",null,{"children":"Largest and most complex module"}]]}]
64:["$","p",null,{"children":["$","strong",null,{"children":"Architecture:"}]}]
65:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                   ",["$","span",null,{"className":"token maybe-class-name","children":"User"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Application"}],"                           │\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"│"}],"              ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"CUDA"}]," cudaMallocManaged ",["$","span",null,{"className":"token constant","children":"API"}],["$","span",null,{"className":"token punctuation","children":")"}],"                    │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                    ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm                           │\n"]}],["$","span",null,{"className":"code-line","children":["│                   ",["$","span",null,{"className":"token constant","children":"IOCTL"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Interface"}],"                            │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token constant","children":"VA"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Space"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Management"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}],"                       │\n"]}],["$","span",null,{"className":"code-line","children":["│  • uvm_va_space",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Per"}],["$","span",null,{"className":"token operator","children":"-"}],"process ",["$","span",null,{"className":"token constant","children":"GPU"}]," address space          │\n"]}],["$","span",null,{"className":"code-line","children":["│  • uvm_va_range",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Virtual"}]," address range tracking         │\n"]}],["$","span",null,{"className":"code-line","children":["│  • uvm_va_block",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," 2MB granularity blocks                 │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│            ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Management"}]," ","$L28c"," ","$L28d","                     │\n"]}],"$L28e","$L28f","$L290","$L291","$L292","$L293","$L294","$L295","$L296","$L297","$L298","$L299","$L29a","$L29b","$L29c","$L29d","$L29e","$L29f","$L2a0","$L2a1","$L2a2"]}]}]
66:["$","p",null,{"children":["$","strong",null,{"children":"Key Data Structures:"}]}]
67:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"uvm_va_space_t"}]," - Per-process GPU virtual address space"]}],["$","li",null,{"children":[["$","code",null,{"children":"uvm_va_block_t"}]," - 2MB-aligned memory region with residency tracking"]}],["$","li",null,{"children":[["$","code",null,{"children":"uvm_gpu_t"}]," - Per-GPU state with channel manager and page tree"]}],["$","li",null,{"children":[["$","code",null,{"children":"uvm_channel_t"}]," - GPU command submission channel"]}]]}]
68:["$","p",null,{"children":["$","strong",null,{"children":"Migration Flow:"}]}]
69:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1."}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," accesses unmapped page → ",["$","span",null,{"className":"token constant","children":"MMU"}]," generates fault → ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," buffer entry\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2."}]," ",["$","span",null,{"className":"token constant","children":"UVM"}]," interrupt handler → ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," servicing work queued\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"3."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Resolve"}]," ",["$","span",null,{"className":"token constant","children":"VA"}]," range → ",["$","span",null,{"className":"token maybe-class-name","children":"Determine"}]," ",["$","span",null,{"className":"token function","children":"operations"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"map",["$","span",null,{"className":"token operator","children":"/"}],"migrate",["$","span",null,{"className":"token operator","children":"/"}],"populate",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"4."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Execute"}]," copy engine → ",["$","span",null,{"className":"token maybe-class-name","children":"Update"}]," page tables → ",["$","span",null,{"className":"token constant","children":"TLB"}]," invalidation\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"5."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Replay"}]," faulting accesses\n"]}]]}]}]
6a:["$","p",null,{"children":["$","strong",null,{"children":"Advanced UVM Features:"}]}]
6b:["$","p",null,{"children":[["$","strong",null,{"children":"Fault Handling Architecture"}]," (",["$","code",null,{"children":"uvm_gpu_replayable_faults.c"}]," - 26,893 lines)"]}]
6c:["$","p",null,{"children":"The UVM fault handling subsystem implements sophisticated batched processing strategies that service up to 32 GPU page faults in a single operation, amortizing the overhead of fault servicing across multiple requests. When the GPU's Memory Management Unit encounters unmapped or invalid addresses, the fault handler must distinguish between legitimate access violations requiring cancellation and valid accesses requiring page migration or mapping. The thrashing detection mechanism represents a particularly clever optimization: by tracking repeated faults on the same pages, the system identifies pathological ping-pong patterns where pages migrate repeatedly between CPU and GPU, and responds by establishing dual mappings that allow both processors to access the data simultaneously. After resolving faults through page migration, mapping updates, and page table modifications, the fault replay mechanism instructs the GPU to retry the faulting memory accesses, allowing execution to proceed transparently."}]
6d:["$","p",null,{"children":[["$","strong",null,{"children":"Physical Memory Allocator"}]," (",["$","code",null,{"children":"uvm_pmm_gpu.c"}]," - 37,758 lines)"]}]
6e:["$","p",null,{"children":"The Physical Memory Allocator (PMA) manages GPU memory allocation with support for chunk-based allocation, eviction policies, and reverse mapping for efficient page migration (detailed in Section 4.2)."}]
6f:["$","p",null,{"children":[["$","strong",null,{"children":"Access Counters"}]," (Volta+) - Hardware-Assisted Migration Intelligence"]}]
70:["$","p",null,{"children":"Starting with the Volta architecture, NVIDIA GPUs incorporate hardware access counter support that fundamentally transforms migration decision-making from reactive to proactive. These hardware counters track GPU accesses to specific memory regions, generating notifications when pages become \"hot\" through repeated access patterns. Rather than waiting for page faults to trigger migrations, the UVM subsystem uses these access counter notifications to proactively migrate data to the optimal location before faults occur, eliminating fault latency from critical paths. The placement algorithm incorporates NVLink topology awareness: when multiple GPUs are connected via high-bandwidth NVLink, the system preferentially places data on GPUs with direct NVLink connections to the accessing processor, exploiting the 10-20× bandwidth advantage of NVLink over PCIe."}]
71:["$","p",null,{"children":["$","strong",null,{"children":"Multi-GPU Coherence Architecture"}]}]
72:["$","p",null,{"children":"The multi-GPU coherence subsystem automatically establishes peer-to-peer mappings between GPUs, enabling direct GPU-to-GPU memory access without CPU intervention. When data needs to transfer between GPUs, the system intelligently selects the optimal path: leveraging NVLink's superior bandwidth when available, or falling back to PCIe peer-to-peer transfers when necessary. Coherent access protocols ensure that memory state remains consistent across all processors with visibility to a given memory region, handling cache coherency and memory ordering requirements. For compute workloads, the system implements sophisticated work partitioning algorithms that distribute computational tasks across multiple GPUs while minimizing data movement costs, achieving near-linear scaling on NVLink-connected GPU clusters."}]
73:["$","h4",null,{"className":"content-header","id":"313-nvidia-drmko---drmkms-driver","children":[["$","a",null,{"className":"break-words","href":"#313-nvidia-drmko---drmkms-driver","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1.3 nvidia-drm.ko - DRM/KMS Driver"]}]
74:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
75:["$","p",null,{"children":"This module comprises 19 C implementation files that integrate the NVIDIA driver with Linux's Direct Rendering Manager (DRM) subsystem, the standard kernel interface for graphics drivers on modern Linux systems. The implementation functions primarily as a thin wrapper over nvidia-modeset.ko, translating DRM's kernel mode-setting (KMS) API calls into operations on NVIDIA's NVKMS display engine, enabling the driver to present a standard Linux graphics interface while leveraging NVIDIA's proprietary display capabilities."}]
76:["$","p",null,{"children":["$","strong",null,{"children":"Major Components:"}]}]
77:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Driver Core"}]," (nvidia-drm-drv.c - 70,065 lines) - DRM registration"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Display (KMS)"}]," (nvidia-drm-crtc.c - 118,258 lines) - Atomic commit, page flipping"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Memory"}]," (nvidia-drm-gem*.c) - GEM objects, DMA-BUF"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Sync"}]," (nvidia-drm-fence.c - 58,535 lines) - Explicit/implicit synchronization"]}]]}]
78:["$","p",null,{"children":["$","strong",null,{"children":"Features:"}]}]
79:["$","p",null,{"children":"The driver exposes modern display capabilities through the DRM interface, including atomic display updates that enable flicker-free mode changes and are essential for Wayland compositor support. HDR10 high dynamic range support with metadata passing allows applications to leverage the extended color gamut and brightness range of modern displays. Multi-plane composition support exposes hardware overlay planes (cursor, primary, and overlay layers) to compositors, enabling efficient composition without GPU rendering. Explicit synchronization through sync_file and syncobj mechanisms provides fine-grained control over rendering and display timing, eliminating tearing and enabling VRR (variable refresh rate) display modes."}]
7a:["$","h4",null,{"className":"content-header","id":"314-nvidia-modesetko--nvidia-peermemko","children":[["$","a",null,{"className":"break-words","href":"#314-nvidia-modesetko--nvidia-peermemko","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1.4 nvidia-modeset.ko & nvidia-peermem.ko"]}]
7b:["$","p",null,{"children":["$","strong",null,{"children":"nvidia-modeset.ko:"}]}]
7c:["$","p",null,{"children":"This module provides the display mode setting and configuration infrastructure, implemented primarily in two C files with nvidia-modeset-linux.c comprising 57,447 lines of kernel interface code. The module serves as the bridge between Linux's display subsystems and NVIDIA's NVKMS (NVIDIA Kernel Mode Setting) display engine, handling all aspects of display output configuration from monitor detection through mode validation to scanout buffer management. Detailed architectural analysis of this critical display subsystem appears in Section 3.4."}]
7d:["$","p",null,{"children":["$","strong",null,{"children":"nvidia-peermem.ko:"}]}]
7e:["$","p",null,{"children":"A specialized single-file module (22,891 lines) implementing GPU Direct RDMA support for InfiniBand and RoCE (RDMA over Converged Ethernet) networks, enabling zero-copy data transfers between GPU memory and network adapters without CPU involvement. This capability proves essential for High Performance Computing (HPC) workloads where multi-node GPU applications must exchange data at maximum network bandwidth—traditional approaches that copy data through system memory and CPU cache would introduce catastrophic bottlenecks. By allowing network adapters to directly access GPU memory via peer-to-peer PCIe transactions or NVLink, the module enables GPU-to-GPU communication across cluster nodes to proceed at line rate, essential for distributed deep learning training and scientific simulations that demand minimal communication overhead."}]
7f:["$","h4",null,{"className":"content-header","id":"315-build-system","children":[["$","a",null,{"className":"break-words","href":"#315-build-system","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.1.5 Build System"]}]
80:["$","p",null,{"children":["$","strong",null,{"children":"Configuration Testing (conftest.sh):"}]}]
81:["$","p",null,{"children":"The build system centers on a comprehensive configuration testing infrastructure that ensures cross-kernel compatibility through automated feature detection. The 195KB conftest.sh script executes 300+ kernel feature tests at build time, generating compatibility headers that enable a single driver to support kernels 4.15+. Detailed build system architecture is covered in Section 5.2."}]
82:["$","hr",null,{}]
83:["$","h3",null,{"className":"content-header","id":"32-common-libraries-and-utilities-srccommon","children":[["$","a",null,{"className":"break-words","href":"#32-common-libraries-and-utilities-srccommon","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2 Common Libraries and Utilities (src/common/)"]}]
84:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Foundational layer of shared libraries, hardware abstractions, and utilities supporting the entire driver stack."]}]
85:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
86:["$","ul",null,{"children":[["$","li",null,{"children":"1,391 files (235 C, 1,156 headers)"}],["$","li",null,{"children":"12 major subdirectories"}],["$","li",null,{"children":"~150,000 LOC"}]]}]
87:["$","h4",null,{"className":"content-header","id":"321-major-library-components","children":[["$","a",null,{"className":"break-words","href":"#321-major-library-components","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2.1 Major Library Components"]}]
88:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Library"}],["$","th",null,{"children":"Files"}],["$","th",null,{"children":"LOC"}],["$","th",null,{"children":"Purpose"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"DisplayPort"}],["$","td",null,{"children":"41 (C++)"}],["$","td",null,{"children":"15,000+"}],["$","td",null,{"children":"Complete DP 1.2/1.4/2.0 MST/SST stack"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"NVLink"}],["$","td",null,{"children":"30+ (C)"}],["$","td",null,{"children":"10,000+"}],["$","td",null,{"children":"High-speed interconnect (20-150 GB/s)"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"NVSwitch"}],["$","td",null,{"children":"100+"}],["$","td",null,{"children":"15,000+"}],["$","td",null,{"children":"Fabric switch management (64 ports)"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"SDK Headers"}],["$","td",null,{"children":"700+"}],["$","td",null,{"children":"-"}],["$","td",null,{"children":"API definitions, control commands"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"HW Reference"}],["$","td",null,{"children":"600+"}],["$","td",null,{"children":"-"}],["$","td",null,{"children":"Register definitions for all architectures"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Softfloat"}],["$","td",null,{"children":"80+"}],["$","td",null,{"children":"5,000+"}],["$","td",null,{"children":"IEEE 754 floating-point (software)"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Unix Utils"}],["$","td",null,{"children":"100+"}],["$","td",null,{"children":"10,000+"}],["$","td",null,{"children":"3D rendering, push buffers, compression"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Uproc"}],["$","td",null,{"children":"20+"}],["$","td",null,{"children":"3,000+"}],["$","td",null,{"children":"ELF/DWARF, crash decoding for firmware"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Modeset Utils"}],["$","td",null,{"children":"30+"}],["$","td",null,{"children":"4,000+"}],["$","td",null,{"children":"HDMI packets, display timing"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"Message Queue"}],["$","td",null,{"children":"2"}],["$","td",null,{"children":"1,000"}],["$","td",null,{"children":"Lock-free IPC for GSP communication"}]]}]]}]]}]}]
89:["$","h4",null,{"className":"content-header","id":"322-displayport-library-architecture","children":[["$","a",null,{"className":"break-words","href":"#322-displayport-library-architecture","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2.2 DisplayPort Library Architecture"]}]
8a:["$","p",null,{"children":[["$","strong",null,{"children":"Implementation:"}]," C++ with namespace ",["$","code",null,{"children":"DisplayPort"}]]}]
8b:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                   ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Client"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":")"}],"                   │\n"]}],["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":["                         ↓ dp_connector",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"h"}],"\n"]}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token maybe-class-name","children":"DisplayPort"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token maybe-class-name","children":"Connector"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Class"}],"                   │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token function","children":"notifyLongPulse"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Hotplug"}]," handling                   │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token function","children":"enumDevices"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"      ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Device"}]," enumeration                 │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token function","children":"compoundQueryAttach"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Bandwidth"}]," validation            │\n"]}],["$","span",null,{"className":"code-line","children":["│  • notifyAttachBegin",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"End"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Modeset"}]," operations           │\n"]}],["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                  ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Components"}],"                            │\n"]}],["$","span",null,{"className":"code-line","children":"│  ┌──────────────────┬──────────────────┬──────────────┐    │\n"}],["$","span",null,{"className":"code-line","children":["│  │ ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Management"}],"  │ ","$L2a3"," ","$L2a4"," ","$L2a5"," ","$L2a6","    │\n"]}],"$L2a7","$L2a8","$L2a9","$L2aa","$L2ab","$L2ac","$L2ad","$L2ae","$L2af","$L2b0","$L2b1"]}]}]
8c:["$","p",null,{"children":["$","strong",null,{"children":"Features:"}]}]
2b2:T46b,The DisplayPort library implements comprehensive support for both SST (Single-Stream Transport) for single-display scenarios and MST (Multi-Stream Transport) for complex multi-display topologies with daisy-chained monitors. Link training algorithms employ automatic fallback strategies, starting at maximum capabilities and gracefully degrading to lower speeds or lane counts when signal integrity issues arise. Sophisticated bandwidth calculation and validation ensures that requested display configurations don't exceed link capacity, preventing configuration failures. EDID (Extended Display Identification Data) parsing extracts monitor capabilities and supported modes, while mode enumeration logic generates the complete list of valid display timings. HDCP (High-bandwidth Digital Content Protection) support in both 1.x and 2.x versions enables protected content playback. Display Stream Compression (DSC) allows higher resolutions or refresh rates than raw link bandwidth would otherwise support. Finally, VRR (Variable Refresh Rate / Adaptive Sync) support eliminates screen tearing in gaming and video playback scenarios.8d:["$","p",null,{"children":"$2b2"}]
8e:["$","h4",null,{"className":"content-header","id":"323-nvlink-library","children":[["$","a",null,{"className":"break-words","href":"#323-nvlink-library","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2.3 NVLink Library"]}]
8f:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Manages NVIDIA's high-speed GPU-GPU/GPU-CPU interconnect."]}]
90:["$","p",null,{"children":["$","strong",null,{"children":"NVLink Generations:"}]}]
91:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Version"}],["$","th",null,{"children":"Architecture"}],["$","th",null,{"children":"Bandwidth per Link"}],["$","th",null,{"children":"Max Links/GPU"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"1.0"}],["$","td",null,{"children":"Pascal"}],["$","td",null,{"children":"20 GB/s"}],["$","td",null,{"children":"4"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"2.0"}],["$","td",null,{"children":"Volta"}],["$","td",null,{"children":"25 GB/s"}],["$","td",null,{"children":"6"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"3.0"}],["$","td",null,{"children":"Ampere"}],["$","td",null,{"children":"50 GB/s"}],["$","td",null,{"children":"12"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"4.0"}],["$","td",null,{"children":"Hopper"}],["$","td",null,{"children":"100 GB/s"}],["$","td",null,{"children":"18"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"5.0"}],["$","td",null,{"children":"Blackwell"}],["$","td",null,{"children":"150 GB/s"}],["$","td",null,{"children":"18+"}]]}]]}]]}]}]
92:["$","p",null,{"children":["$","strong",null,{"children":"Core Data Structures:"}]}]
93:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"struct"}]," ",["$","span",null,{"className":"token class-name","children":"nvlink_device"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU64 deviceId",["$","span",null,{"className":"token punctuation","children":";"}],"           ",["$","span",null,{"className":"token comment","children":"// Unique device identifier"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU64 type",["$","span",null,{"className":"token punctuation","children":";"}],"               ",["$","span",null,{"className":"token comment","children":"// GPU, NVSWITCH, IBMNPU, TEGRASHIM"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NVListRec link_list",["$","span",null,{"className":"token punctuation","children":";"}],"      ",["$","span",null,{"className":"token comment","children":"// List of links"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvBool enableALI",["$","span",null,{"className":"token punctuation","children":";"}],"         ",["$","span",null,{"className":"token comment","children":"// Adaptive Link Interface"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU16 nodeId",["$","span",null,{"className":"token punctuation","children":";"}],"             ",["$","span",null,{"className":"token comment","children":"// Fabric node ID"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"struct"}]," ",["$","span",null,{"className":"token class-name","children":"nvlink_link"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU64 linkId",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU32 linkNumber",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU32 state",["$","span",null,{"className":"token punctuation","children":";"}],"              ",["$","span",null,{"className":"token comment","children":"// NVLINK_LINKSTATE_*"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU32 version",["$","span",null,{"className":"token punctuation","children":";"}],"            ",["$","span",null,{"className":"token comment","children":"// 1.0-5.0"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvBool master",["$","span",null,{"className":"token punctuation","children":";"}],"            ",["$","span",null,{"className":"token comment","children":"// Training role"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvU64 localSid",["$","span",null,{"className":"token punctuation","children":","}]," remoteSid",["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// System IDs"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
94:["$","p",null,{"children":["$","strong",null,{"children":"Link State Machine:"}]}]
95:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"OFF"}]," → ",["$","span",null,{"className":"token constant","children":"SWCFG"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"safe mode",["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"ACTIVE"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"high speed",["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"L2"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"sleep",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"       ↓\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"DETECT"}]," → ",["$","span",null,{"className":"token constant","children":"RESET"}]," → ",["$","span",null,{"className":"token constant","children":"INITPHASE1"}]," → ",["$","span",null,{"className":"token constant","children":"INITNEGOTIATE"}]," → ",["$","span",null,{"className":"token constant","children":"INITOPTIMIZE"}]," →\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"INITTL"}]," → ",["$","span",null,{"className":"token constant","children":"INITPHASE5"}]," → ",["$","span",null,{"className":"token constant","children":"ALI"}]," → ",["$","span",null,{"className":"token constant","children":"ACTIVE_PENDING"}]," → ",["$","span",null,{"className":"token constant","children":"HS"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"High"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Speed"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}]
96:["$","p",null,{"children":["$","strong",null,{"children":"NVSwitch Integration - Fabric Switches for Massive GPU Clusters"}]}]
2b3:T401, directory, this subsystem orchestrates all aspects of switch operation. The InfoROM (Information ROM) access layer reads and writes non-volatile configuration data stored on the switch itself, preserving calibration parameters and failure history across power cycles. Multiple Falcon microcontrollers embedded within each NVSwitch ASIC handle autonomous link management, error recovery, and performance monitoring, with the driver coordinating their operation through carefully sequenced register accesses and firmware loading. The Chip-to-Chip Interface (CCI) cable management system handles the complexities of optical and copper cable detection, configuration, and error handling for inter-switch connections. This technology enables systems ranging from the DGX-H100 with 8 GPUs connected through a single NVSwitch, to the DGX-B200 supercomputer featuring 144 GPUs interconnected via 72 NVSwitch ASICs in a carefully orchestrated fat-tree topology, delivering unprecedented aggregate bandwidth for AI training workloads.97:["$","p",null,{"children":["The NVSwitch integration layer manages sophisticated fabric switch ASICs featuring up to 200 ports of non-blocking connectivity, enabling the construction of massive GPU clusters with full-bisection bandwidth. Implemented across over 100 files in the ",["$","code",null,{"children":"nvswitch/kernel/"}],"$2b3"]}]
98:["$","h4",null,{"className":"content-header","id":"324-hardware-reference-headers-incswrefpublished","children":[["$","a",null,{"className":"break-words","href":"#324-hardware-reference-headers-incswrefpublished","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2.4 Hardware Reference Headers (inc/swref/published/)"]}]
99:["$","p",null,{"children":[["$","strong",null,{"children":"Coverage:"}]," Register definitions for all GPU architectures"]}]
9a:["$","p",null,{"children":["$","strong",null,{"children":"Directory Structure:"}]}]
9b:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["inc",["$","span",null,{"className":"token operator","children":"/"}],"swref",["$","span",null,{"className":"token operator","children":"/"}],"published",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── kepler",["$","span",null,{"className":"token operator","children":"/"}],"         ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GK100"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2012"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── maxwell",["$","span",null,{"className":"token operator","children":"/"}],"        ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GM100"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"GM200"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2014"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── gm107",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   └── gm200",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── pascal",["$","span",null,{"className":"token operator","children":"/"}],"         ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GP100"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"GP102"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2016"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── gp100",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   └── gp102",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── volta",["$","span",null,{"className":"token operator","children":"/"}],"          ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GV100"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"GV11B"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2017"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── gv100",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   └── gv11b",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ampere",["$","span",null,{"className":"token operator","children":"/"}],"         ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GA100"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"GA102"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2020"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ada",["$","span",null,{"className":"token operator","children":"/"}],"            ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"AD100"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2022"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── hopper",["$","span",null,{"className":"token operator","children":"/"}],"         ","$L2b4"," ","$L2b5"," ","$L2b6","$L2b7","$L2b8","\n"]}],"$L2b9","$L2ba"]}]}]
9c:["$","p",null,{"children":["$","strong",null,{"children":"Each Architecture Contains:"}]}]
9d:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"dev_bus.h"}]," - Bus interface (PCIe, NVLink)"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_fb.h"}]," - Framebuffer controller"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_fifo.h"}]," - Channel FIFO"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_gr.h"}]," - Graphics engine"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_ce.h"}]," - Copy engine"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_disp.h"}]," - Display engine"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_mc.h"}]," - Memory controller"]}],["$","li",null,{"children":[["$","code",null,{"children":"dev_mmu.h"}]," - MMU/IOMMU"]}],["$","li",null,{"children":"And 20+ more subsystem headers"}]]}]
9e:["$","p",null,{"children":["$","strong",null,{"children":"Register Definition Example:"}]}]
9f:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"NV_PFB_PRI_MMU_CTRL"}],"                     ",["$","span",null,{"className":"token expression","children":["$","span",null,{"className":"token number","children":"0x00100200"}]}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"NV_PFB_PRI_MMU_CTRL_ATOMIC_CAPABILITY"}],"   ",["$","span",null,{"className":"token expression","children":[["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"1"}]]}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"NV_PFB_PRI_MMU_CTRL_ATOMIC_CAPABILITY_ENABLED"}],"  ",["$","span",null,{"className":"token expression","children":["$","span",null,{"className":"token number","children":"0x00000001"}]}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"NV_PFB_PRI_MMU_CTRL_ATOMIC_CAPABILITY_DISABLED"}]," ",["$","span",null,{"className":"token expression","children":["$","span",null,{"className":"token number","children":"0x00000000"}]}]]}],"\n"]}]]}]}]
a0:["$","h4",null,{"className":"content-header","id":"325-message-queue-msgq","children":[["$","a",null,{"className":"break-words","href":"#325-message-queue-msgq","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.2.5 Message Queue (msgq/)"]}]
a1:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Lock-free inter-processor communication for GSP-RM."]}]
a2:["$","p",null,{"children":["$","strong",null,{"children":"Key Features:"}]}]
a3:["$","p",null,{"children":"The message queue implementation achieves exceptional performance through a lock-free design that completely eliminates mutex operations, avoiding the overhead and potential priority inversion issues associated with traditional locking primitives. Zero-copy buffer access allows messages to be constructed directly in shared memory regions visible to both CPU and GPU, eliminating expensive copy operations between buffers. The bidirectional architecture provides independent TX (transmit) and RX (receive) channels that enable full-duplex communication without interference between sending and receiving operations. Cache-coherent operations with appropriate memory barriers ensure that updates propagate correctly across the CPU-GPU coherency domain, maintaining data consistency without requiring explicit cache flushing. Finally, notification callbacks enable efficient event-driven processing where either side can be asynchronously notified when messages arrive or buffers become available."}]
a4:["$","p",null,{"children":["$","strong",null,{"children":"API:"}]}]
a5:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":["msgqHandle handle",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"msgqInit"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"&"}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," buffer",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"msgqTxCreate"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," backingStore",["$","span",null,{"className":"token punctuation","children":","}]," size",["$","span",null,{"className":"token punctuation","children":","}]," msgSize",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"msgqRxLink"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," backingStore",["$","span",null,{"className":"token punctuation","children":","}]," size",["$","span",null,{"className":"token punctuation","children":","}]," msgSize",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Transmit"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token operator","children":"*"}],"msg ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"msgqTxGetWriteBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"memcpy"}],["$","span",null,{"className":"token punctuation","children":"("}],"msg",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"&"}],"data",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"sizeof"}],["$","span",null,{"className":"token punctuation","children":"("}],"data",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"msgqTxSubmitBuffers"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Receive"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"unsigned"}]," avail ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"msgqRxGetReadAvailable"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle","$L2bb","$L2bc","\n"]}],"$L2bd","$L2be","$L2bf"]}]}]
a6:["$","hr",null,{}]
a7:["$","h3",null,{"className":"content-header","id":"33-core-gpu-driver-srcnvidia","children":[["$","a",null,{"className":"break-words","href":"#33-core-gpu-driver-srcnvidia","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.3 Core GPU Driver (src/nvidia/)"]}]
a8:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Core GPU driver implementation with resource management, memory management, compute/graphics engines, and hardware abstraction."]}]
a9:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
aa:["$","p",null,{"children":"The core GPU driver represents the most substantial component of the entire driver stack, encompassing over 440 C implementation files that implement GPU subsystem logic, 185 kernel interface headers defining the boundaries between driver layers, and 105 library source files providing reusable utilities. The NVOC (NVIDIA Object C) code generator produces approximately 2000 additional generated files that implement object-oriented programming constructs in C, providing inheritance, virtual methods, and runtime type information. Together, these components comprise roughly 500,000 lines of code—more than half of the entire driver implementation—reflecting the enormous complexity of modern GPU resource management, memory virtualization, and hardware control."}]
ab:["$","h4",null,{"className":"content-header","id":"331-core-architecture-layers","children":[["$","a",null,{"className":"break-words","href":"#331-core-architecture-layers","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.3.1 Core Architecture Layers"]}]
ac:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token constant","children":"RMAPI"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Manager"}]," ",["$","span",null,{"className":"token constant","children":"API"}],["$","span",null,{"className":"token punctuation","children":")"}],"                   │\n"]}],["$","span",null,{"className":"code-line","children":["│         ",["$","span",null,{"className":"token maybe-class-name","children":"Control"}]," calls",["$","span",null,{"className":"token punctuation","children":","}]," allocations",["$","span",null,{"className":"token punctuation","children":","}]," memory ops              │\n"]}],["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token constant","children":"RESSERV"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Server"}],["$","span",null,{"className":"token punctuation","children":")"}],"                      │\n"]}],["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"RsServer"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"RsDomain"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"RsClient"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"RsResource"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"RsResourceRef│"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Hierarchical"}]," resource management ",["$","span",null,{"className":"token keyword","children":"with"}]," locking             │\n"]}],["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token constant","children":"OBJGPU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Central"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token class-name known-class-name","children":"Object"}],["$","span",null,{"className":"token punctuation","children":")"}],"                    │\n"]}],["$","span",null,{"className":"code-line","children":["│  • gpu",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"7"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"301"}]," lines",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," management               │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token constant","children":"HAL"}]," binding ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," generation","$L2c0","specific implementations     │\n"]}],"$L2c1","$L2c2","$L2c3","$L2c4","$L2c5","$L2c6","$L2c7","$L2c8","$L2c9","$L2ca","$L2cb","$L2cc","$L2cd","$L2ce","$L2cf","$L2d0","$L2d1","$L2d2","$L2d3","$L2d4","$L2d5","$L2d6","$L2d7","$L2d8","$L2d9"]}]}]
ad:["$","h4",null,{"className":"content-header","id":"332-key-subsystems","children":[["$","a",null,{"className":"break-words","href":"#332-key-subsystems","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.3.2 Key Subsystems"]}]
ae:["$","p",null,{"children":["$","strong",null,{"children":"1. Resource Server (RESSERV)"}]}]
af:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Hierarchical resource management framework."]}]
b0:["$","p",null,{"children":["$","strong",null,{"children":"Core Structures:"}]}]
b1:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"RsServer"}]," - Top-level server (global)"]}],["$","li",null,{"children":[["$","code",null,{"children":"RsDomain"}]," - Logical namespace separation"]}],["$","li",null,{"children":[["$","code",null,{"children":"RsClient"}]," - Per-process context"]}],["$","li",null,{"children":[["$","code",null,{"children":"RsResource"}]," - Base resource object"]}],["$","li",null,{"children":[["$","code",null,{"children":"RsResourceRef"}]," - Reference in hierarchy"]}]]}]
b2:["$","p",null,{"children":["$","strong",null,{"children":"Handle Allocation:"}]}]
b3:["$","ul",null,{"children":[["$","li",null,{"children":["Domain handles: ",["$","code",null,{"children":"0xD0D00000"}]," base"]}],["$","li",null,{"children":["Client handles: ",["$","code",null,{"children":"0xC1D00000"}]," base"]}],["$","li",null,{"children":["VF client handles: ",["$","code",null,{"children":"0xE0000000"}]," base"]}],["$","li",null,{"children":"Max 1M clients per range"}]]}]
b4:["$","p",null,{"children":["$","strong",null,{"children":"Locking Hierarchy:"}]}]
b5:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"RS_LOCK_TOP"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"global",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  → ",["$","span",null,{"className":"token constant","children":"RS_LOCK_CLIENT"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"per",["$","span",null,{"className":"token operator","children":"-"}],"client",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    → ",["$","span",null,{"className":"token constant","children":"RS_LOCK_RESOURCE"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"per",["$","span",null,{"className":"token operator","children":"-"}],"resource",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["      → ",["$","span",null,{"className":"token maybe-class-name","children":"Custom"}]," ",["$","span",null,{"className":"token function","children":"locks"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"subsystem",["$","span",null,{"className":"token operator","children":"-"}],"specific",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}]
b6:["$","p",null,{"children":["$","strong",null,{"children":"RESSERV Deep Dive: Enterprise Resource Management"}]}]
b7:["$","p",null,{"children":"The Resource Server framework represents one of the most sophisticated aspects of the NVIDIA driver architecture, providing capabilities that rival operating system kernels in their complexity and rigor. At its core, RESSERV implements a hierarchical object model that mirrors the conceptual organization of GPU resources: the system-wide RsServer sits at the apex, containing one or more RsDomains that provide namespace isolation (critical for virtualization scenarios where multiple VMs must not interfere with each other's resource spaces), which in turn contain RsClients representing individual processes or applications, each of which owns numerous RsResource objects representing actual GPU hardware resources like memory allocations, channel contexts, and engine bindings."}]
b8:["$","p",null,{"children":["The handle management system deserves particular attention for its elegant encoding scheme. Rather than using simple sequential integers that provide no type safety, RESSERV encodes resource type information directly into the handle value itself. Domain handles begin at ",["$","code",null,{"children":"0xD0D00000"}],", client handles at ",["$","code",null,{"children":"0xC1D00000"}],", and virtual function (SR-IOV) client handles at ",["$","code",null,{"children":"0xE0000000"}],", with each range supporting up to one million distinct handles. This approach provides immediate handle validation—corrupted or malicious handles can be rejected based solely on their numeric value before any memory access occurs, preventing entire classes of security vulnerabilities."]}]
b9:["$","p",null,{"children":"The locking strategy implements a carefully designed hierarchy that prevents deadlock while enabling high concurrency. The top-level lock protects global state but is held only briefly; client-level locks allow different processes to manipulate their resources concurrently without contention; resource-level locks enable fine-grained parallelism within a single process. The framework also supports conditional lock acquisition with timeout, enabling long-running operations to periodically check for cancellation signals—a critical feature for maintaining system responsiveness when processes are killed or GPU operations hang."}]
ba:["$","p",null,{"children":["$","strong",null,{"children":"2. Memory Management Architecture"}]}]
bb:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                 ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Manager"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"MemoryManager"}],["$","span",null,{"className":"token punctuation","children":")"}],"               │\n"]}],["$","span",null,{"className":"code-line","children":["│  • mem_mgr",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"137"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"426"}]," bytes",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," memory manager          │\n"]}],["$","span",null,{"className":"code-line","children":["│  • heap",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"146"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"414"}]," bytes",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Heap"}]," allocation                 │\n"]}],["$","span",null,{"className":"code-line","children":["│  • mem_desc",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"159"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"937"}]," bytes",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," descriptors          │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":"                         ↓\n"}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│            ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"System"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"KernelMemorySystem"}],["$","span",null,{"className":"token punctuation","children":")"}],"                │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token constant","children":"FBIO"}]," configuration   • ",["$","span",null,{"className":"token constant","children":"ECC"}]," management                    │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," partitioning  • ",["$","span",null,{"className":"token constant","children":"L2"}]," cache control                  │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token function","children":"encryption"}]," ","$L2da","$L2db","$L2dc","$L2dd","                              │\n"]}],"$L2de","$L2df","$L2e0","$L2e1","$L2e2","$L2e3","$L2e4","$L2e5","$L2e6","$L2e7","$L2e8","$L2e9","$L2ea","$L2eb","$L2ec","$L2ed","$L2ee","$L2ef","$L2f0","$L2f1","$L2f2"]}]}]
bc:["$","p",null,{"children":["$","strong",null,{"children":"Transfer Types:"}]}]
bd:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":["TRANSFER_TYPE_PROCESSOR    ",["$","span",null,{"className":"token comment","children":"// CPU/GSP/DPU"}],"\n"]}],["$","span",null,{"className":"code-line","children":["TRANSFER_TYPE_GSP_DMA      ",["$","span",null,{"className":"token comment","children":"// GSP internal DMA"}],"\n"]}],["$","span",null,{"className":"code-line","children":["TRANSFER_TYPE_CE           ",["$","span",null,{"className":"token comment","children":"// Copy Engine via CeUtils"}],"\n"]}],["$","span",null,{"className":"code-line","children":["TRANSFER_TYPE_CE_PRI       ",["$","span",null,{"className":"token comment","children":"// Copy Engine via PRIs"}],"\n"]}],["$","span",null,{"className":"code-line","children":["TRANSFER_TYPE_BAR0         ",["$","span",null,{"className":"token comment","children":"// BAR0 PRAMIN"}],"\n"]}]]}]}]
be:["$","p",null,{"children":["$","strong",null,{"children":"Memory Management Deep Dive: A Multi-Layered Approach"}]}]
bf:["$","p",null,{"children":"The GPU memory management subsystem exemplifies the principle of separation of concerns through its carefully designed layering strategy. Each layer addresses a distinct aspect of the memory management problem, creating clear interfaces that enable independent evolution of each component while maintaining system-wide coherence."}]
c0:["$","p",null,{"children":["At the highest level, the Memory Manager (",["$","code",null,{"children":"MemoryManager"}],") serves as the policy engine, making strategic decisions about memory placement, allocation strategies, and resource accounting. When an application requests GPU memory, the Memory Manager first consults its heap manager to determine whether the request can be satisfied from the GPU's frame buffer, or whether system memory must be used. The heap allocator itself implements sophisticated algorithms that balance fragmentation concerns against allocation speed—small allocations use buddy allocators for fast service, while large allocations employ best-fit strategies to minimize wasted space. Memory descriptors (",["$","code",null,{"children":"mem_desc.c"}],") provide a uniform abstraction over diverse memory types: GPU frame buffer, system memory accessible via PCIe, register memory (MMIO), and even remote GPU memory accessible via NVLink. This abstraction proves invaluable when implementing memory migration, as the same descriptor can be updated to reflect a changed physical location without impacting higher-level code."]}]
c1:["$","p",null,{"children":["The Memory System (",["$","code",null,{"children":"KernelMemorySystem"}],") layer concerns itself with the physical characteristics of the GPU's memory subsystem. Modern GPUs feature extraordinarily complex memory controllers with capabilities like ECC protection, memory encryption (on Hopper and later), sophisticated power management, and the ability to partition the frame buffer into isolated regions for MIG support. The Memory System provides architecture-specific implementations that program these controllers correctly—the ",["$","code",null,{"children":"kern_mem_sys_gh100.c"}]," implementation for Hopper, for instance, contains hundreds of register writes that configure memory encryption keys, ECC scrubbing intervals, and power state transitions. The L2 cache configuration also resides at this layer, with different GPU generations providing vastly different cache hierarchies that must be programmed distinctly."]}]
2f3:T438,) implements the virtual-to-physical address translation that enables process isolation and memory overcommitment. NVIDIA GPUs employ a multi-level page table structure similar to x86_64 CPUs, with four levels of indirection supporting virtual address spaces up to 64 bits in size. The page table walker hardware reads these structures from GPU memory during address translation, with a Translation Lookaside Buffer (TLB) caching recent translations for performance. Supporting multiple page sizes (4KB for fine-grained mappings, 64KB for balanced performance, 2MB for large buffers, and even 512MB for massive allocations) proves critical for TLB efficiency—a large CUDA kernel working on a 4GB buffer can be mapped with just eight 512MB entries, consuming only eight TLB slots instead of millions. The GMMU implementation carefully batches TLB invalidations: rather than flushing after each page table modification, the driver accumulates changes and performs a single targeted invalidation, reducing the performance impact of virtual memory operations by orders of magnitude.c2:["$","p",null,{"children":["The Graphics MMU (",["$","code",null,{"children":"GMMU"}],"$2f3"]}]
c3:["$","p",null,{"children":["Finally, the Physical Memory Allocator (",["$","code",null,{"children":"PMA"}],") operates at the lowest level, managing the raw frame buffer. It handles memory blacklisting, NUMA-aware allocation, carveout regions, and security scrubbing (see Section 3.1.2 for detailed PMA architecture)."]}]
c4:["$","p",null,{"children":["$","strong",null,{"children":"3. GSP (GPU System Processor) Architecture"}]}]
c5:["$","p",null,{"children":[["$","strong",null,{"children":"Location:"}]," ",["$","code",null,{"children":"src/kernel/gpu/gsp/"}]]}]
c6:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," RISC-V processor running GPU System Processor Resource Manager (GSP-RM), offloading resource management from CPU to GPU."]}]
c7:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│                    ",["$","span",null,{"className":"token constant","children":"CPU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Driver"}],["$","span",null,{"className":"token punctuation","children":")"}],"                       │\n"]}],["$","span",null,{"className":"code-line","children":["│                   kernel_gsp",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"184"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"057"}]," bytes",["$","span",null,{"className":"token punctuation","children":")"}],"               │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":["                         ↕ ",["$","span",null,{"className":"token maybe-class-name","children":"Message"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Queue"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"RPC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│            ",["$","span",null,{"className":"token constant","children":"GSP"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"RM"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Firmware"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"On"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token constant","children":"RISC"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"V"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}],["$","span",null,{"className":"token punctuation","children":")"}],"             │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," management   • ",["$","span",null,{"className":"token maybe-class-name","children":"Power"}]," management                 │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," control       • ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," management                │\n"]}],["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Compute"}]," scheduling    • ",["$","span",null,{"className":"token class-name known-class-name","children":"Error"}]," handling                   │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]]}]}]
c8:["$","p",null,{"children":["$","strong",null,{"children":"Boot Process:"}]}]
c9:["$","ol",null,{"children":[["$","li",null,{"children":["Load firmware ELF from ",["$","code",null,{"children":"/lib/firmware/nvidia/"}]]}],["$","li",null,{"children":"Verify signature (secure boot)"}],["$","li",null,{"children":"Relocate to GPU memory"}],["$","li",null,{"children":"Start RISC-V core"}],["$","li",null,{"children":"Initialize message queues (TX/RX)"}],["$","li",null,{"children":"Establish RPC communication"}]]}]
ca:["$","p",null,{"children":["$","strong",null,{"children":"RPC Flow:"}]}]
cb:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token constant","children":"RM"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," to msgq → ",["$","span",null,{"className":"token maybe-class-name","children":"Doorbell"}]," interrupt → ",["$","span",null,{"className":"token constant","children":"GSP"}]," processes\n"]}],["$","span",null,{"className":"code-line","children":["          ← ",["$","span",null,{"className":"token constant","children":"GSP"}]," writes response ← ",["$","span",null,{"className":"token constant","children":"CPU"}]," interrupt ← ",["$","span",null,{"className":"token maybe-class-name","children":"Read"}]," msgq ← ",["$","span",null,{"className":"token maybe-class-name","children":"Return"}]," to caller\n"]}]]}]}]
cc:["$","p",null,{"children":["$","strong",null,{"children":"GSP-RM: A Paradigm Shift in Driver Architecture"}]}]
cd:["$","p",null,{"children":"The introduction of GSP-RM in the Turing generation represents perhaps the most significant architectural evolution in NVIDIA's driver history, fundamentally reimagining the division of labor between CPU and GPU in driver execution. Traditional GPU drivers execute all resource management logic on the CPU: when an application allocates memory, configures a display output, or submits work to the GPU, the CPU driver directly programs GPU registers via PCIe transactions. This approach suffers from several fundamental limitations that GSP-RM elegantly addresses."}]
ce:["$","p",null,{"children":"First, the latency problem: every register write from CPU to GPU must traverse the PCIe bus, incurring microseconds of latency per transaction. Complex operations like display mode changes might require hundreds of register writes, translating to milliseconds of CPU-GPU communication overhead. By moving the Resource Manager onto the GPU itself, register accesses become local memory operations with nanosecond latencies—a thousand-fold improvement. The CPU driver issues high-level commands (\"allocate 4GB of memory with these attributes\") rather than micromanaging individual register writes, dramatically reducing PCIe traffic and improving responsiveness."}]
cf:["$","p",null,{"children":"Second, the power efficiency dimension: when the GPU needs to transition power states—perhaps entering a low-power mode during idle periods, or boosting clock frequencies under heavy load—a CPU-based driver must be awakened to orchestrate the transition. This CPU involvement defeats the purpose of GPU power management, as waking the CPU package consumes significant power itself. GSP-RM enables autonomous GPU power management: the GPU can self-manage its power states without CPU involvement, achieving dramatically lower idle power consumption. This proves particularly valuable in laptop and mobile scenarios where power efficiency directly translates to battery life."}]
d0:["$","p",null,{"children":"Third, the consistency and maintainability benefits: NVIDIA supports multiple operating systems (Linux, Windows, FreeBSD, Solaris, VMware ESXi), each with distinct kernel interfaces and driver models. In the traditional architecture, core Resource Manager logic must be carefully ported to each platform, with subtle differences in timing, memory management, or interrupt handling potentially causing platform-specific bugs. GSP-RM inverts this model: the vast majority of RM code runs on the GPU, completely isolated from OS-specific concerns. Only a thin RPC layer requires per-OS porting, dramatically reducing the maintenance burden and ensuring consistent behavior across platforms."}]
d1:["$","p",null,{"children":"The security implications deserve particular emphasis: GSP-RM enables a secure boot chain where the GPU firmware's authenticity can be cryptographically verified before execution begins. Combined with Hopper's Confidential Computing features, this creates a Trusted Execution Environment (TEE) on the GPU itself. Applications can prove to remote parties that their computations execute on genuine NVIDIA hardware running authentic firmware, enabling secure cloud computing scenarios where the cloud provider itself is untrusted. The CPU driver, now external to the GPU's trust boundary, cannot tamper with computations even if the host OS is compromised—a revolutionary capability for sensitive workloads."}]
d2:["$","p",null,{"children":"The message queue implementation underpinning GSP-RM communication merits recognition as a masterpiece of lock-free programming. Rather than using traditional mutex-protected shared memory, the message queue employs atomic operations on circular buffer indices, enabling the CPU and GSP to communicate without any locks whatsoever. This lock-free design eliminates an entire class of potential bugs (deadlocks, priority inversion) while providing deterministic latency characteristics essential for real-time operations like display timing management."}]
d3:["$","p",null,{"children":["$","strong",null,{"children":"4. FIFO and Channel Management (KernelFifo)"}]}]
d4:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Command submission and channel scheduling."]}]
d5:["$","p",null,{"children":["$","strong",null,{"children":"Core Concepts:"}]}]
d6:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Channels:"}]," Execution contexts (like CPU threads)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"TSGs (Time Slice Groups):"}]," Channel groups for scheduling"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Runlists:"}]," Lists of channels eligible for execution"]}],["$","li",null,{"children":[["$","strong",null,{"children":"PBDMA:"}]," Push Buffer DMA engines"]}],["$","li",null,{"children":[["$","strong",null,{"children":"USERD:"}]," User-space doorbell (fast submission)"]}]]}]
d7:["$","p",null,{"children":["$","strong",null,{"children":"Channel Isolation:"}]}]
d8:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"typedef"}]," ",["$","span",null,{"className":"token keyword","children":"enum"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    GUEST_USER ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token number","children":"0x0"}],["$","span",null,{"className":"token punctuation","children":","}],"      ",["$","span",null,{"className":"token comment","children":"// Guest user process"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    GUEST_KERNEL",["$","span",null,{"className":"token punctuation","children":","}],"          ",["$","span",null,{"className":"token comment","children":"// Guest kernel process"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    GUEST_INSECURE",["$","span",null,{"className":"token punctuation","children":","}],"        ",["$","span",null,{"className":"token comment","children":"// No isolation"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    HOST_USER",["$","span",null,{"className":"token punctuation","children":","}],"             ",["$","span",null,{"className":"token comment","children":"// Host user process"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    HOST_KERNEL            ",["$","span",null,{"className":"token comment","children":"// Host kernel process"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}]," FIFO_ISOLATION_DOMAIN",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
d9:["$","p",null,{"children":["$","strong",null,{"children":"5. Engine Management"}]}]
da:["$","p",null,{"children":["$","strong",null,{"children":"Engine Descriptor System:"}]}]
db:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"ENGDESC_CLASS"}],"  ",["$","span",null,{"className":"token expression","children":[["$","span",null,{"className":"token number","children":"31"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"8"}],"   "]}],["$","span",null,{"className":"token comment","children":"// NVOC class ID"}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token macro-name","children":"ENGDESC_INST"}],"    ",["$","span",null,{"className":"token expression","children":[["$","span",null,{"className":"token number","children":"7"}],["$","span",null,{"className":"token operator","children":":"}],["$","span",null,{"className":"token number","children":"0"}],"   "]}],["$","span",null,{"className":"token comment","children":"// Instance number"}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token property macro","children":[["$","span",null,{"className":"token directive-hash","children":"#"}],["$","span",null,{"className":"token keyword directive","children":"define"}]," ",["$","span",null,{"className":"token function macro-name","children":"MKENGDESC"}],["$","span",null,{"className":"token expression","children":[["$","span",null,{"className":"token punctuation","children":"("}],"class",["$","span",null,{"className":"token punctuation","children":","}]," inst",["$","span",null,{"className":"token punctuation","children":")"}]," "]}],["$","span",null,{"className":"token punctuation","children":"\\"}],"\n"]}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property macro","children":["    ",["$","span",null,{"className":"token expression","children":[["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"NvU32",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],"class",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"<<"}]," ",["$","span",null,{"className":"token number","children":"8"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],"inst",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"<<"}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]]}]]}],"\n"]}]]}]}]
dc:["$","p",null,{"children":["$","strong",null,{"children":"Major Engines:"}]}]
dd:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"CE (Copy Engine):"}]," Hardware-accelerated memory copies (10+ instances)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"GR (Graphics/Compute):"}]," Graphics and compute workloads",["$","ul",null,{"children":[["$","li",null,{"children":"GPCs (Graphics Processing Clusters)"}],["$","li",null,{"children":"TPCs (Texture Processing Clusters)"}],["$","li",null,{"children":"SMs (Streaming Multiprocessors)"}]]}]]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVDEC/NVENC:"}]," Video decode/encode"]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVJPG:"}]," JPEG decode/encode"]}],["$","li",null,{"children":[["$","strong",null,{"children":"OFA:"}]," Optical Flow Accelerator"]}]]}]
de:["$","p",null,{"children":["$","strong",null,{"children":"Engine Architecture: Specialized Hardware for Diverse Workloads"}]}]
df:["$","p",null,{"children":"Modern NVIDIA GPUs function as heterogeneous processors containing a dozen or more specialized engines, each optimized for specific workload types. This specialization philosophy recognizes that general-purpose hardware cannot achieve optimal efficiency across the diverse range of tasks GPUs must handle—from floating-point computation to video encoding to memory transfers—and instead provides dedicated hardware for each major operation class."}]
e0:["$","p",null,{"children":"The Copy Engine (CE) exemplifies this specialization approach. While GPUs contain thousands of CUDA cores capable of performing memory copies via shader programs, using these cores for data movement proves extraordinarily wasteful: CUDA cores excel at arithmetic operations, not memory transfers. The Copy Engine, by contrast, is purpose-built for memory-to-memory transfers, featuring wide data paths directly connected to the memory controller and minimal control logic. Modern GPUs include 10 or more Copy Engine instances operating in parallel, enabling simultaneous transfers between different memory regions without contention. The UVM subsystem leverages these engines extensively: when migrating pages from system memory to GPU memory, the driver programs a Copy Engine via a command stream, offloading the transfer entirely from the CPU and CUDA cores. This approach achieves transfer rates approaching the theoretical memory bandwidth limit while consuming minimal power."}]
e1:["$","p",null,{"children":"The Graphics/Compute Engine (GR) represents the GPU's computational heart, containing the architectural hierarchy that defines a GPU's performance characteristics. Graphics Processing Clusters (GPCs) serve as the top-level unit, with high-end GPUs featuring 8-12 GPCs. Within each GPC reside multiple Texture Processing Clusters (TPCs), and within each TPC sit one or more Streaming Multiprocessors (SMs)—the actual execution units that run shader programs and CUDA kernels. A flagship GPU might contain 144 SMs, each with 128 CUDA cores, totaling 18,432 parallel execution units. The engine management layer abstracts these architectural details behind a HAL that presents a consistent programming model: applications submit command buffers containing draw calls or kernel launches, and the GR engine orchestrates the distribution of work across the available compute resources, managing numerous details like register allocation, shared memory partitioning, and barrier synchronization without application involvement."}]
e2:["$","p",null,{"children":"Video engines (NVDEC for decode, NVENC for encode) provide another specialization example. Video codecs like H.264, H.265, and AV1 require specific operations—motion compensation, entropy coding, transform processing—that recur billions of times when processing a video stream. Implementing these operations on CUDA cores would be possible but inefficient; dedicated video engines implement these operations in fixed-function hardware, achieving 10-100× better power efficiency. Supporting multiple video codec standards simultaneously becomes feasible: a modern GPU might contain five NVDEC instances supporting H.264, H.265, VP9, and AV1 decode, plus three NVENC instances for encoding. Applications can process multiple video streams in parallel, with the driver's engine management layer scheduling codec sessions across available engines to maximize throughput."}]
e3:["$","p",null,{"children":"The Optical Flow Accelerator (OFA) illustrates the continuing evolution of GPU engines toward AI and computer vision workloads. Optical flow—computing the motion vector field describing how pixels move between consecutive video frames—is computationally intensive when implemented algorithmically, but can be accelerated dramatically with dedicated hardware. The OFA engine performs this computation at a fraction of the power that a CUDA implementation would require, enabling real-time processing of 4K video streams for applications like autonomous driving, video compression, and frame interpolation. This trend toward specialized AI accelerators continues in the latest architectures, with Hopper introducing a Transformer Engine optimized for the attention mechanisms that dominate modern large language models."}]
e4:["$","p",null,{"children":["$","strong",null,{"children":"6. Advanced Features"}]}]
e5:["$","p",null,{"children":["$","strong",null,{"children":"MIG (Multi-Instance GPU) - Ampere+:"}]}]
e6:["$","ul",null,{"children":[["$","li",null,{"children":"Partition single GPU into isolated instances"}],["$","li",null,{"children":"Independent memory and compute resources"}],["$","li",null,{"children":"QoS enforcement"}]]}]
e7:["$","p",null,{"children":["$","strong",null,{"children":"Confidential Computing - Hopper+:"}]}]
e8:["$","ul",null,{"children":[["$","li",null,{"children":"Full GPU memory encryption"}],["$","li",null,{"children":"CPU-GPU communication encryption"}],["$","li",null,{"children":"Attestation via SPDM"}],["$","li",null,{"children":"FSP (Falcon Security Processor)"}]]}]
e9:["$","p",null,{"children":["$","strong",null,{"children":"CCU (Coherent Cache Unit) - Hopper+:"}]}]
ea:["$","ul",null,{"children":[["$","li",null,{"children":"Cache coherency for CPU-GPU shared memory"}],["$","li",null,{"children":"Used with Grace-Hopper superchip"}]]}]
eb:["$","h4",null,{"className":"content-header","id":"333-nvoc-object-model","children":[["$","a",null,{"className":"break-words","href":"#333-nvoc-object-model","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.3.3 NVOC Object Model"]}]
ec:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Object-oriented programming in C through code generation."]}]
ed:["$","p",null,{"children":["$","strong",null,{"children":"Features:"}]}]
ee:["$","ul",null,{"children":[["$","li",null,{"children":"Class hierarchy with inheritance"}],["$","li",null,{"children":"Virtual method tables"}],["$","li",null,{"children":"Runtime type information (RTTI)"}],["$","li",null,{"children":"Dynamic dispatch"}]]}]
ef:["$","p",null,{"children":[["$","strong",null,{"children":"Generated Files:"}]," ~2000 files in ",["$","code",null,{"children":"src/nvidia/generated/"}]," with prefix ",["$","code",null,{"children":"g_*_nvoc.[ch]"}]]}]
f0:["$","p",null,{"children":["$","strong",null,{"children":"Example:"}]}]
f1:["$","ul",null,{"children":[["$","li",null,{"children":["Input: ",["$","code",null,{"children":"inc/kernel/gpu/fifo/kernel_fifo.h"}]]}],["$","li",null,{"children":["Output: ",["$","code",null,{"children":"generated/g_kernel_fifo_nvoc.h"}],", ",["$","code",null,{"children":"g_kernel_fifo_nvoc.c"}]]}]]}]
f2:["$","hr",null,{}]
f3:["$","h3",null,{"className":"content-header","id":"34-display-mode-setting-srcnvidia-modeset","children":[["$","a",null,{"className":"break-words","href":"#34-display-mode-setting-srcnvidia-modeset","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.4 Display Mode-Setting (src/nvidia-modeset/)"]}]
f4:["$","p",null,{"children":[["$","strong",null,{"children":"Purpose:"}]," Centralized display controller management providing hardware-independent APIs for display configuration, mode setting, page flipping, and output management."]}]
f5:["$","p",null,{"children":["$","strong",null,{"children":"Key Statistics:"}]}]
f6:["$","ul",null,{"children":[["$","li",null,{"children":"46 C files (~85,000 LOC core implementation)"}],["$","li",null,{"children":"9 C++ files (DisplayPort library)"}],["$","li",null,{"children":"Layered architecture with HAL for multi-generation support"}]]}]
f7:["$","h4",null,{"className":"content-header","id":"341-architecture-overview","children":[["$","a",null,{"className":"break-words","href":"#341-architecture-overview","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.4.1 Architecture Overview"]}]
f8:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│              nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"DRM"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"KMS"}],["$","span",null,{"className":"token punctuation","children":")"}],"                         │\n"]}],["$","span",null,{"className":"code-line","children":["│         ",["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token constant","children":"API"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"KAPI"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Integration"}],"                        │\n"]}],["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}],["$","span",null,{"className":"code-line","children":["                         ↓ ",["$","span",null,{"className":"token constant","children":"KAPI"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," table\n"]}],["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│            nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NVKMS"}],["$","span",null,{"className":"token punctuation","children":")"}],"                         │\n"]}],["$","span",null,{"className":"code-line","children":"├──────────────────────────────────────────────────────────────┤\n"}],["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}],["$","span",null,{"className":"code-line","children":["│  │          ",["$","span",null,{"className":"token maybe-class-name","children":"Client"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Interface"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":")"}],"                    │  │\n"]}],["$","span",null,{"className":"code-line","children":["│  │  ",["$","span",null,{"className":"token constant","children":"IOCTL"}]," handler",["$","span",null,{"className":"token punctuation","children":","}]," device management",["$","span",null,{"className":"token punctuation","children":","}]," event system       │  │\n"]}],["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}],["$","span",null,{"className":"code-line","children":"│                         ↓                                     │\n"}],["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}],["$","span",null,{"className":"code-line","children":["│  │      ",["$","span",null,{"className":"token maybe-class-name","children":"Modesetting"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Layer"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token operator","children":"-"}],"modeset","$L2f4","$L2f5"," ","$L2f6"," ","$L2f7","$L2f8","$L2f9"," lines","$L2fa","│  │\n"]}],"$L2fb","$L2fc","$L2fd","$L2fe","$L2ff","$L300","$L301","$L302","$L303","$L304","$L305","$L306","$L307","$L308","$L309","$L30a","$L30b","$L30c","$L30d","$L30e","$L30f","$L310","$L311","$L312","$L313","$L314","$L315","$L316","$L317","$L318","$L319","$L31a","$L31b","$L31c","$L31d","$L31e","$L31f","$L320","$L321","$L322","$L323"]}]}]
f9:["$","h4",null,{"className":"content-header","id":"342-core-components","children":[["$","a",null,{"className":"break-words","href":"#342-core-components","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.4.2 Core Components"]}]
fa:["$","p",null,{"children":["$","strong",null,{"children":"1. Hardware Abstraction (HAL)"}]}]
fb:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"HAL Version"}],["$","th",null,{"children":"GPU Generations"}],["$","th",null,{"children":"File"}],["$","th",null,{"children":"Lines"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":"EVO 1.x"}],["$","td",null,{"children":"Tesla/Fermi"}],["$","td",null,{"children":"nvkms-evo1.c"}],["$","td",null,{"children":"2,000+"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"EVO 2.x"}],["$","td",null,{"children":"Kepler/Maxwell"}],["$","td",null,{"children":"nvkms-evo2.c"}],["$","td",null,{"children":"4,206"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"EVO 3.x"}],["$","td",null,{"children":"Pascal/Volta/Turing"}],["$","td",null,{"children":"nvkms-evo3.c"}],["$","td",null,{"children":"8,353"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":"nvdisplay 4.x"}],["$","td",null,{"children":"Ampere/Ada/Hopper"}],["$","td",null,{"children":"nvkms-evo4.c"}],["$","td",null,{"children":"3,248"}]]}]]}]]}]}]
fc:["$","p",null,{"children":["$","strong",null,{"children":"HAL Dispatch:"}]}]
fd:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":["NVDevEvoHal ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"InitCompParams",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"SetRasterParams",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"Flip",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"SetLUTContextDma",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// ... 50+ hardware methods"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
fe:["$","p",null,{"children":["$","strong",null,{"children":"EVO Display Engine Implementation Details:"}]}]
324:T493,The EVO display engine employs a sophisticated push buffer architecture where the driver constructs DMA command buffers that the hardware processes asynchronously, eliminating CPU involvement during steady-state display operations. Display commands, called "methods" in EVO terminology, are encoded as (address, value) pairs where the address specifies a hardware register offset and the value contains the configuration data—a design that provides atomic register updates and simplified command validation. The architecture organizes command submission through multiple independent channels, with each display head owning dedicated command queues that prevent contention and enable parallel processing. Command submission completes through a "kickoff" operation: the driver batches multiple methods together, then performs a single doorbell write to notify the hardware of pending work, amortizing the PCIe transaction overhead across many operations. Completion tracking leverages DMA-based notifiers where the hardware writes completion status directly to host memory, allowing the driver to poll for completion without interrupt overhead in latency-sensitive paths.ff:["$","p",null,{"children":"$324"}]
100:["$","p",null,{"children":["$","strong",null,{"children":"Surface Memory Formats and Optimization:"}]}]
325:T4bf,Display surfaces support two fundamentally different memory layouts, each optimized for specific access patterns and hardware capabilities. Pitch linear format organizes pixel data in traditional row-major order, where pixels within each scanline occupy consecutive memory locations—a layout that simplifies software rendering and CPU access but provides suboptimal memory controller utilization. Block linear format, also known as GOB (Group of Bytes) tiling, reorganizes pixel data into 512-byte blocks (64 bytes × 8 rows), dramatically improving memory bandwidth utilization by matching the access patterns of the GPU's memory controllers. This tiled organization reduces external DRAM traffic by 20-30% in typical cases by improving spatial locality and enabling more efficient burst transfers. Moreover, GOB tiling serves as a prerequisite for display compression support, which can further halve memory bandwidth consumption for appropriate content. Both formats impose strict alignment requirements: surface base addresses must align to 4KB boundaries while offsets within those surfaces require 1KB alignment, constraints that reflect the hardware's page table granularity and DMA controller limitations.101:["$","p",null,{"children":"$325"}]
102:["$","p",null,{"children":["$","strong",null,{"children":"2. EVO Channel Architecture"}]}]
103:["$","p",null,{"children":["$","strong",null,{"children":"Channel Types:"}]}]
104:["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Core Channel:"}]," Global display state (1 per display controller)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Base Channels:"}]," Primary layer per head (up to 8)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Overlay Channels:"}]," Overlay layers (multiple per head)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Window Channels:"}]," Composition layers (nvdisplay 3.0+)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Cursor Channels:"}]," Hardware cursor (1 per head)"]}]]}]
105:["$","p",null,{"children":["$","strong",null,{"children":"Programming Model:"}]}]
106:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"1."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Allocate"}]," ",["$","span",null,{"className":"token constant","children":"DMA"}]," push ",["$","span",null,{"className":"token function","children":"buffer"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"4KB",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"2."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," ",["$","span",null,{"className":"token function","children":"methods"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"GPU"}]," commands",["$","span",null,{"className":"token punctuation","children":")"}]," to buffer\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"3."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Advance"}]," ",["$","span",null,{"className":"token constant","children":"PUT"}]," pointer\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"4."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," fetches and executes\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"5."}]," ",["$","span",null,{"className":"token constant","children":"UPDATE"}]," method commits changes at ",["$","span",null,{"className":"token constant","children":"VBLANK"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"6."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Completion"}]," via interrupt",["$","span",null,{"className":"token operator","children":"/"}],"notifier\n"]}]]}]}]
107:["$","p",null,{"children":["$","strong",null,{"children":"3. Modesetting State Machine"}]}]
108:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Client"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Request"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"IOCTL"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ProposeModeSetHwState"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ValidateProposedModeSetHwState"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"↓"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"validation passes",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"PreModeset"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"disable raster lock",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"For"}]," each display",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ShutDownUnusedHeads"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ApplyProposedModeSetHwState"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Configure"}]," ",["$","span",null,{"className":"token constant","children":"SOR"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Serializer"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Output"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Resource"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Program"}]," timing parameters\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," ",["$","span",null,{"className":"token constant","children":"LUT"}],["$","span",null,{"className":"token operator","children":"/"}],"color management\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Configure"}]," layers\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"SendUpdateMethod"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ","$L326"," commits\n"]}],"$L327","$L328","$L329","$L32a","$L32b","$L32c"]}]}]
109:["$","p",null,{"children":["$","strong",null,{"children":"4. Flip Request Processing"}]}]
10a:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Client"}]," submits flip request\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ValidateFlipRequest"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Check"}]," layer ",["$","span",null,{"className":"token function","children":"count"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"max ",["$","span",null,{"className":"token number","children":"8"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Validate"}]," surface formats\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Check"}]," synchronization objects\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Verify"}]," viewport parameters\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"QueueFlip"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Add"}]," to per",["$","span",null,{"className":"token operator","children":"-"}],"head flip queue\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"UpdateFlipQueue"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Process"}]," pending flips\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"IssueFlipToHardware"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"ProgramLayer0"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token number","children":".7"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," layer parameters\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ProgramSyncObjects"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," semaphores",["$","span",null,{"className":"token operator","children":"/"}],"fences\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Kick"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Advance"}]," ",["$","span",null,{"className":"token constant","children":"PUT"}]," pointer\n"]}],"$L32d","$L32e","$L32f","$L330","$L331","$L332","$L333"]}]}]
10b:["$","p",null,{"children":["$","strong",null,{"children":"5. DisplayPort Integration"}]}]
10c:["$","p",null,{"children":["$","strong",null,{"children":"Layer Architecture:"}]}]
10d:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"EVO"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Layer"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ↕ ",["$","span",null,{"className":"token constant","children":"C"}]," wrapper functions\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"DP"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Library"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token operator","children":"/"}],"dp",["$","span",null,{"className":"token comment","children":"/*.cpp - C++)\n"}]]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    ├── NVDPLibConnector - Per-connector state\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    │   ├── Link training state machine\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    │   ├── MST topology management\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    │   └── Mode timing adjustments\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    ├── NVDPLibDevice - Global DP state\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    └── Event sink - Hot-plug, IRQ_HPD, link status\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"    ↕ DPCD access via RM\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token comment","children":"RM Layer (hardware I2C/AUX channel)\n"}]}]]}]}]
10e:["$","p",null,{"children":["$","strong",null,{"children":"Link Training Flow:"}]}]
10f:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ConnectorAttached"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Hot"}],["$","span",null,{"className":"token operator","children":"-"}],"plug detected\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ReadDPCD"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Capabilities"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"AssessLink"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Determine"}]," max rate",["$","span",null,{"className":"token operator","children":"/"}],"lanes\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"↓"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"If"}]," unstable",["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ReduceLinkRate"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," or ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ReduceLaneCount"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"RetrainLink"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Execute"}]," training sequence\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ValidateBandwidth"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Ensure"}]," sufficient ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," modes\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"↓"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"If"}]," ",["$","span",null,{"className":"token constant","children":"MST"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"AllocatePayloadSlots"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"MST"}]," stream setup\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"$L334"}],"$L335","$L336"," → ","$L337"," configuration\n"]}]]}]}]
110:["$","p",null,{"children":["$","strong",null,{"children":"6. Advanced Features"}]}]
111:["$","p",null,{"children":["$","strong",null,{"children":"HeadSurface (Software Composition):"}]}]
112:["$","ul",null,{"children":[["$","li",null,{"children":"5 files (11,707 lines)"}],["$","li",null,{"children":"Fallback composition when hardware layers insufficient"}],["$","li",null,{"children":"3D transformation pipeline"}],["$","li",null,{"children":"Swap group management"}]]}]
113:["$","p",null,{"children":["$","strong",null,{"children":"Frame Lock (Multi-GPU Sync):"}]}]
114:["$","ul",null,{"children":[["$","li",null,{"children":"Raster lock: Synchronize scanout timing across GPUs"}],["$","li",null,{"children":"Flip lock: Coordinate page flip timing"}],["$","li",null,{"children":"G-Sync hardware integration"}]]}]
115:["$","p",null,{"children":["$","strong",null,{"children":"LUT/Color Management:"}]}]
116:["$","ul",null,{"children":[["$","li",null,{"children":"Input/output LUT programming"}],["$","li",null,{"children":"CSC (Color Space Conversion) matrices"}],["$","li",null,{"children":"HDR tone mapping"}],["$","li",null,{"children":"ICtCp color space support"}]]}]
117:["$","p",null,{"children":["$","strong",null,{"children":"VRR (Variable Refresh Rate):"}]}]
118:["$","ul",null,{"children":[["$","li",null,{"children":"Adaptive sync support"}],["$","li",null,{"children":"G-Sync compatibility"}],["$","li",null,{"children":"Per-head VRR enablement"}]]}]
119:["$","h4",null,{"className":"content-header","id":"343-key-data-structures","children":[["$","a",null,{"className":"break-words","href":"#343-key-data-structures","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.4.3 Key Data Structures"]}]
11a:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Per-GPU device state"}],"\n"]}],["$","span",null,{"className":"code-line","children":"NVDevEvoRec\n"}],["$","span",null,{"className":"code-line","children":["  ├── NVDispEvoRec",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"           ",["$","span",null,{"className":"token comment","children":"// Per-display controller"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   ├── NVDispHeadStateEvoRec",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token comment","children":"// Per-head state (up to 8)"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   │   ├── NVHwModeTimingsEvo  ",["$","span",null,{"className":"token comment","children":"// Mode timings"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   │   ├── NVHwModeViewPortEvo ",["$","span",null,{"className":"token comment","children":"// Viewport/scaling"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   │   └── NVFlipEvoHwState    ",["$","span",null,{"className":"token comment","children":"// Flip state"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   ├── NVConnectorEvoRec",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"  ",["$","span",null,{"className":"token comment","children":"// Physical connectors"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  │   └── NVDpyEvoRec",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"        ",["$","span",null,{"className":"token comment","children":"// Logical displays"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  └── NVEvoSubDevRec",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token punctuation","children":"]"}],"         ",["$","span",null,{"className":"token comment","children":"// Per-subdevice (SLI)"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// HAL structures"}],"\n"]}],["$","span",null,{"className":"code-line","children":["NVEvoCapabilities              ",["$","span",null,{"className":"token comment","children":"// Hardware capability flags"}],"\n"]}],["$","span",null,{"className":"code-line","children":["NVDevEvoHal                    ",["$","span",null,{"className":"token comment","children":"// HAL method dispatch table"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Surfaces"}],"\n"]}],["$","span",null,{"className":"code-line","children":["NVSurfaceEvoRec                ",["$","span",null,{"className":"token comment","children":"// Framebuffer description"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ├── Memory ",["$","span",null,{"className":"token function","children":"layout"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"pitch",["$","span",null,{"className":"token operator","children":"/"}],"block",["$","span",null,{"className":"token operator","children":"-"}],"linear",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ├── ",["$","span",null,{"className":"token function","children":"Format"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"RGBA8",["$","span",null,{"className":"token punctuation","children":","}]," RGBA16F",["$","span",null,{"className":"token punctuation","children":","}]," etc",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"  ├── Dimensions and alignment\n"}],["$","span",null,{"className":"code-line","children":"  └── DMA context\n"}]]}]}]
11b:["$","h4",null,{"className":"content-header","id":"344-kapi-kernel-api-integration-with-nvidia-drm","children":[["$","a",null,{"className":"break-words","href":"#344-kapi-kernel-api-integration-with-nvidia-drm","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"3.4.4 KAPI (Kernel API) Integration with nvidia-drm"]}]
11c:["$","p",null,{"children":[["$","strong",null,{"children":"Location:"}]," ",["$","code",null,{"children":"kapi/src/nvkms-kapi.c"}]," (137KB)"]}]
11d:["$","p",null,{"children":["$","strong",null,{"children":"Function Table Export:"}]}]
11e:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"nvKmsKapiGetFunctionsTable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token keyword","children":"struct"}]," ",["$","span",null,{"className":"token class-name","children":"NvKmsKapiFunctionsTable"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Device management"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"allocateDevice",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"freeDevice",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"grabOwnership",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Resource queries"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"getDeviceResourcesInfo",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"getDisplays",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"getConnectorInfo",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Memory operations"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    NvKmsKapiMemory",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"allocateMemory","$L338","$L339","$L33a","$L33b","\n"]}],"$L33c","$L33d","$L33e","$L33f","$L340","$L341","$L342","$L343","$L344","$L345","$L346","$L347","$L348","$L349","$L34a"]}]}]
11f:["$","p",null,{"children":["$","strong",null,{"children":"Event Notification:"}]}]
120:["$","ul",null,{"children":[["$","li",null,{"children":"Hot-plug events"}],["$","li",null,{"children":"Dynamic DP MST changes"}],["$","li",null,{"children":"Flip completion callbacks"}],["$","li",null,{"children":"Display mode changes"}]]}]
121:["$","hr",null,{}]
122:["$","h2",null,{"className":"content-header","id":"4-component-interaction-and-data-flow","children":[["$","a",null,{"className":"break-words","href":"#4-component-interaction-and-data-flow","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4. Component Interaction and Data Flow"]}]
123:["$","p",null,{"children":"Understanding individual components provides necessary foundation, but the true complexity (and elegance) of the driver emerges when we examine how these components interact. A GPU driver isn't a collection of independent modules; it's a carefully choreographed symphony where timing, ordering, and communication patterns matter as much as the individual implementations. This section traces the critical data flows that define driver operation: how the system bootstraps from cold start to operational state, how memory requests traverse multiple abstraction layers, how display updates propagate from application to screen, and how compute workloads journey from CPU submission to GPU execution."}]
124:["$","p",null,{"children":"These interaction patterns reveal design decisions that aren't visible when examining components in isolation. We'll see how dependency ordering during initialization prevents subtle race conditions, how memory management layers coordinate to maintain performance while ensuring correctness, and how the display pipeline achieves microsecond timing precision despite passing through numerous software layers. Understanding these flows transforms our view from \"what the code does\" to \"how the system works as a whole.\""}]
125:["$","h3",null,{"className":"content-header","id":"41-system-initialization-sequence","children":[["$","a",null,{"className":"break-words","href":"#41-system-initialization-sequence","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.1 System Initialization Sequence"]}]
126:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"System"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Boot"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}],["$","span",null,{"className":"code-line","children":["│ ",["$","span",null,{"className":"token number","children":"1."}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," initialization                                 │\n"]}],["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────┤\n"}],["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token function","children":"nvidia_init_module"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," char device              │\n"]}],["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token constant","children":"PCI"}]," driver                                       │\n"]}],["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token function","children":"nvidia_probe"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Per"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}],["$","span",null,{"className":"token operator","children":":"}],"                                 │\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── ",["$","span",null,{"className":"token class-name known-class-name","children":"Map"}]," ",["$","span",null,{"className":"token constant","children":"PCI"}]," ",["$","span",null,{"className":"token function","children":"resources"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"BARs"}],["$","span",null,{"className":"token punctuation","children":")"}],"                             │\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," ",["$","span",null,{"className":"token constant","children":"MSI"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"MSI"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"X"}]," interrupts                           │\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"RM"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Manager"}],["$","span",null,{"className":"token punctuation","children":")"}]," via binary core     │\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidiactl                  │\n"]}],["$","span",null,{"className":"code-line","children":["│   └── ",["$","span",null,{"className":"token maybe-class-name","children":"Export"}]," interfaces ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," dependent modules              │\n"]}],"$L34b","$L34c","$L34d","$L34e","$L34f","$L350","$L351","$L352","$L353","$L354","$L355","$L356","$L357","$L358","$L359","$L35a","$L35b","$L35c","$L35d","$L35e","$L35f","$L360","$L361","$L362","$L363","$L364","$L365","$L366","$L367","$L368","$L369","$L36a","$L36b","$L36c","$L36d","$L36e","$L36f","$L370","$L371","$L372"]}]}]
127:["$","p",null,{"children":["$","strong",null,{"children":"Understanding the Initialization Dependency Chain"}]}]
128:["$","p",null,{"children":"The module initialization sequence reflects careful attention to dependency ordering, with each module establishing the foundation required by subsequent modules. This initialization choreography proves critical for system stability: loading modules in the wrong order would result in missing symbol references or incomplete initialization state, causing kernel panics or GPU malfunctions."}]
129:["$","p",null,{"children":["The ",["$","code",null,{"children":"nvidia.ko"}]," module must initialize first, as it provides the fundamental GPU infrastructure upon which all other modules depend. During its initialization, ",["$","code",null,{"children":"nvidia.ko"}]," accomplishes several essential tasks: it registers itself as a PCI driver with the Linux kernel, enabling automatic invocation of its probe function when GPU hardware is detected; it creates the ",["$","code",null,{"children":"/dev/nvidiactl"}]," control device that applications use to enumerate GPUs and establish sessions; and it initializes the Resource Manager (RM) core, either by directly executing RM code on pre-Turing GPUs, or by loading and starting the GSP-RM firmware on Turing and later. Only after ",["$","code",null,{"children":"nvidia.ko"}]," completes this initialization do the necessary interfaces exist for other modules to attach themselves to the driver infrastructure."]}]
12a:["$","p",null,{"children":["The ",["$","code",null,{"children":"nvidia-modeset.ko"}]," and ",["$","code",null,{"children":"nvidia-uvm.ko"}]," modules can initialize concurrently after ",["$","code",null,{"children":"nvidia.ko"}],", as they depend only on the core driver and not on each other. The modeset module establishes the NVKMS subsystem that manages display configuration and output, creating the KAPI function table that nvidia-drm will later consume. The UVM module creates ",["$","code",null,{"children":"/dev/nvidia-uvm"}]," and establishes its sophisticated virtual address space management infrastructure, registering callbacks with ",["$","code",null,{"children":"nvidia.ko"}]," to receive notifications when GPUs are added or removed from the system. These callbacks ensure that UVM maintains synchronized state even in hotplug scenarios like GPU addition via Thunderbolt or removal in failure cases."]}]
12b:["$","p",null,{"children":["Finally, ",["$","code",null,{"children":"nvidia-drm.ko"}]," initializes after ",["$","code",null,{"children":"nvidia-modeset.ko"}],", as it serves as a thin translation layer between the Linux DRM subsystem and NVKMS. By retrieving the KAPI function table from nvidia-modeset, nvidia-drm can implement the DRM driver interface (mode setting, page flipping, buffer management) by forwarding operations to NVKMS, which handles the actual hardware programming. This layering allows NVIDIA to maintain a single mode-setting implementation shared across multiple interfaces (DRM, proprietary X11 driver, etc.), reducing code duplication and ensuring consistent behavior."]}]
12c:["$","h3",null,{"className":"content-header","id":"42-gpu-memory-access-flow","children":[["$","a",null,{"className":"break-words","href":"#42-gpu-memory-access-flow","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.2 GPU Memory Access Flow"]}]
12d:["$","p",null,{"children":["$","strong",null,{"children":"Traditional Memory Allocation:"}]}]
12e:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Application"}]," → ",["$","span",null,{"className":"token function","children":"open"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"ioctl"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NV_ESC_ALLOC_MEMORY"}],["$","span",null,{"className":"token punctuation","children":")"}]," → nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Call"}]," into ",["$","span",null,{"className":"token constant","children":"RM"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nv",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"o_binary"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Allocate"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"↓"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Returns"}]," handle",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"mmap"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":","}]," offset",["$","span",null,{"className":"token operator","children":"="}],"handle",["$","span",null,{"className":"token punctuation","children":")"}]," → nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," → nv",["$","span",null,{"className":"token operator","children":"-"}],"mmap",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name known-class-name","children":"Map"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory into user virtual address space\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"User"}]," application reads",["$","span",null,{"className":"token operator","children":"/"}],"writes ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory directly\n"]}]]}]}]
12f:["$","p",null,{"children":["$","strong",null,{"children":"UVM Managed Memory (cudaMallocManaged):"}]}]
130:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Application"}]," → ",["$","span",null,{"className":"token function","children":"open"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"cudaMallocManaged"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"UVM_CREATE_RANGE"}]," ioctl\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," creates ",["$","span",null,{"className":"token constant","children":"VA"}]," ",["$","span",null,{"className":"token function","children":"range"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"no physical backing yet",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"CPU"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"GPU"}]," accesses address → ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," fault\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Handling"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"CPU"}]," ",["$","span",null,{"className":"token property literal-property","children":"fault"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Linux"}]," page fault → ",["$","span",null,{"className":"token constant","children":"UVM"}]," fault handler\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token property literal-property","children":"fault"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token constant","children":"MMU"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," buffer → ",["$","span",null,{"className":"token constant","children":"UVM"}]," interrupt → ",["$","span",null,{"className":"token maybe-class-name","children":"Work"}]," queue\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"UVM"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Service"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"1."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Determine"}]," faulting ",["$","span",null,{"className":"token function","children":"processor"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"CPU"}]," or ",["$","span",null,{"className":"token constant","children":"GPU"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],"$L373","$L374","$L375","$L376","$L377","$L378","$L379"]}]}]
131:["$","p",null,{"children":["$","strong",null,{"children":"Contrasting Memory Management Paradigms: Traditional vs. Unified"}]}]
132:["$","p",null,{"children":"The stark differences between traditional GPU memory allocation and UVM-managed memory illuminate the evolution of GPU programming models and the increasingly blurred boundary between CPU and GPU memory spaces."}]
133:["$","p",null,{"children":["Traditional GPU memory allocation follows an explicit management model inherited from the early days of GPU computing, when GPUs were clearly peripheral devices with separate memory spaces. Applications explicitly allocate GPU memory via driver calls, receiving back an opaque handle that represents the allocation. To actually access this memory, the application must map it into its virtual address space via ",["$","code",null,{"children":"mmap()"}],", establishing a direct mapping from user-space virtual addresses to GPU physical memory. This model provides applications complete control over data placement: the application decides explicitly when data resides in GPU memory versus system memory, and must manually orchestrate data transfers between the two spaces using APIs like ",["$","code",null,{"children":"cudaMemcpy()"}],". While this explicit control enables optimization opportunities for expert programmers who understand memory access patterns, it also imposes substantial cognitive burden and makes GPU programming significantly more difficult than CPU programming, where malloc/free provide a simple abstraction over memory management complexities."]}]
134:["$","p",null,{"children":["UVM's managed memory inverts this model, implementing a demand-paging approach where memory appears unified across CPU and GPU address spaces. When an application calls ",["$","code",null,{"children":"cudaMallocManaged()"}],", the UVM driver establishes a virtual address range but allocates no physical backing initially—the allocation exists purely in the virtual address space, with no actual memory consumption. Only when the CPU or GPU first accesses a page within this range does the system allocate physical memory, and critically, the allocation occurs on the processor performing the access. If the CPU touches the page first, system memory is allocated and the page table is updated to map the virtual address to this physical page. If the GPU subsequently accesses the same page, the UVM fault handler detects that the data resides in system memory, migrates the page to GPU memory via a Copy Engine transfer, updates both CPU and GPU page tables to reflect the new physical location, and replays the GPU's memory access so it completes successfully. This migration proves entirely transparent to the application—the virtual address remains unchanged, but the physical backing silently moves to optimize performance."]}]
135:["$","p",null,{"children":"UVM's fault handling implements sophisticated optimizations including batched processing, thrashing detection, and hardware-assisted migration (detailed in Section 3.1.2)."}]
136:["$","h3",null,{"className":"content-header","id":"43-display-output-flow","children":[["$","a",null,{"className":"break-words","href":"#43-display-output-flow","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.3 Display Output Flow"]}]
137:["$","p",null,{"children":["$","strong",null,{"children":"Mode Setting (X11/Wayland Startup):"}]}]
138:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Compositor"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Wayland"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"X"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Open"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"dri",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token function","children":"card0"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"DRM"}]," atomic commit",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"New"}]," mode ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token constant","children":"CRTC"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Connector"}]," assignment\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Framebuffer"}]," attachment\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," → ",["$","span",null,{"className":"token constant","children":"KAPI"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," ",["$","span",null,{"className":"token function","children":"applyModeSetConfig"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NVKMS"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── nvkms",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ValidateProposedModeSetHwState"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── nvkms",["$","span",null,{"className":"token operator","children":"-"}],"modepool",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Validate"}]," mode timings\n"]}],["$","span",null,{"className":"code-line","children":["    ├── nvkms",["$","span",null,{"className":"token operator","children":"-"}],"dpy",["$","span",null,{"className":"token punctuation","children":"."}],"$L37a","$L37b"," ","$L37c"," display capabilities\n"]}],"$L37d","$L37e","$L37f","$L380","$L381","$L382","$L383","$L384","$L385","$L386","$L387","$L388","$L389","$L38a","$L38b"]}]}]
139:["$","p",null,{"children":["$","strong",null,{"children":"Frame Presentation (Page Flip):"}]}]
13a:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Client"}]," renders frame → ",["$","span",null,{"className":"token maybe-class-name","children":"Framebuffer"}]," ",["$","span",null,{"className":"token keyword","children":"in"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"DRM"}]," atomic commit",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"New"}]," framebuffer ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," plane\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"In"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token function","children":"fence"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"wait ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," rendering",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Out"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token function","children":"fence"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"signal on flip",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," → ",["$","span",null,{"className":"token constant","children":"KAPI"}]," flip ",["$","span",null,{"className":"token keyword","children":"function"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ValidateFlipRequest"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"QueueFlip"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Per"}],["$","span",null,{"className":"token operator","children":"-"}],"head flip queue\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"IssueFlipToHardware"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["        ├── ",["$","span",null,{"className":"token maybe-class-name","children":"ProgramLayer0"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token number","children":".7"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," to ",["$","span",null,{"className":"token constant","children":"EVO"}]," push buffer\n"]}],"$L38c","$L38d","$L38e","$L38f","$L390","$L391","$L392","$L393","$L394","$L395","$L396","$L397","$L398","$L399","$L39a"]}]}]
13b:["$","p",null,{"children":["$","strong",null,{"children":"The Display Pipeline: Balancing Flexibility and Real-Time Constraints"}]}]
13c:["$","p",null,{"children":"The display output subsystem must satisfy competing requirements that few other driver components face: it must provide flexible configuration supporting arbitrary combinations of displays, resolutions, and refresh rates, while simultaneously meeting hard real-time deadlines imposed by display timing requirements. Missing a VBLANK deadline by even a single microsecond results in visible artifacts (tearing) or dropped frames, making display code among the most timing-critical in the entire driver stack."}]
39b:T461,The mode setting flow demonstrates the validation-heavy approach required for display configuration. When a compositor requests a mode change—perhaps the user has connected a new monitor or changed resolution—the driver must validate an enormous number of constraints before committing to the configuration. Display timing validation ensures that the requested mode (resolution, refresh rate, pixel clock) falls within the capabilities of both the GPU's display engine and the connected display device. The DisplayPort link training subsystem verifies that sufficient bandwidth exists on the DisplayPort connection to carry the video signal at the requested parameters, potentially training down to lower link rates or lane counts if the full-bandwidth mode isn't reliable. Output routing validation ensures that the GPU has enough serializer output resources (SORs) to drive all requested displays simultaneously—high-end GPUs might support four DisplayPort outputs and two HDMI outputs, but they can't all be driven at maximum resolution simultaneously due to bandwidth constraints internal to the display engine.13d:["$","p",null,{"children":"$39b"}]
13e:["$","p",null,{"children":"Only after passing all validation checks does the driver proceed with actually applying the configuration. This application occurs through a carefully choreographed sequence: unused display heads are shut down to prevent them from interfering with the reconfiguration; the EVO display engine is programmed with new timing parameters, output routing, and layer configuration; and finally, an UPDATE method is sent that instructs the hardware to atomically commit all pending changes at the next VBLANK interval. This atomic update mechanism proves essential for glitch-free mode changes—if the hardware were to gradually apply changes over multiple frames, users would see transient artifacts as partially-configured state becomes visible."}]
39c:T47c,The frame presentation (page flip) pipeline optimizes for a different goal: minimal latency from frame completion to display update. When a compositor finishes rendering a frame, it wants that frame visible to the user as quickly as possible to minimize input-to-photon latency (the delay from user input like mouse movement to the corresponding visual update appearing on screen). The atomic commit interface enables the compositor to package the flip request with fence objects that represent GPU rendering completion: an in-fence specifies a GPU operation that must complete before the flip can occur (typically, the rendering of the frame), while an out-fence allows the compositor to be notified immediately when the flip completes, without busy-waiting. The display engine hardware waits for the in-fence to signal, performs the atomic flip at the next VBLANK, then signals the out-fence to inform the compositor that the frame is now visible. This pipeline enables compositors to maintain multiple frames in flight, overlapping rendering of the next frame with display of the current frame, maximizing GPU utilization and minimizing latency.13f:["$","p",null,{"children":"$39c"}]
140:["$","h3",null,{"className":"content-header","id":"44-compute-workload-submission","children":[["$","a",null,{"className":"break-words","href":"#44-compute-workload-submission","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.4 Compute Workload Submission"]}]
141:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Application"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"CUDA"}]," kernel",["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token function","children":"cudaLaunchKernel"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"CUDA"}]," driver library → ",["$","span",null,{"className":"token function","children":"ioctl"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia0",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Channel"}]," submission",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Validate"}]," channel ",["$","span",null,{"className":"token constant","children":"ID"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token class-name known-class-name","children":"Map"}]," to ",["$","span",null,{"className":"token constant","children":"TSG"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Time"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Slice"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Group"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Locate"}]," ",["$","span",null,{"className":"token constant","children":"USERD"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"user doorbell",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"CUDA"}]," driver writes commands to push buffer",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," launch parameters\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Grid"}],["$","span",null,{"className":"token operator","children":"/"}],"block dimensions\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Shared"}]," memory config\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Semaphore"}]," operations\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," to ",["$","span",null,{"className":"token function","children":"doorbell"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"USERD"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token constant","children":"GPU"}]," hardware notification\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"FIFO"}]," ","$L39d","nvidia","$L39e","$L39f","$L3a0","$L3a1","\n"]}],"$L3a2","$L3a3","$L3a4","$L3a5","$L3a6","$L3a7","$L3a8","$L3a9","$L3aa","$L3ab","$L3ac","$L3ad","$L3ae","$L3af","$L3b0"]}]}]
142:["$","h3",null,{"className":"content-header","id":"45-inter-gpu-communication-nvlink","children":[["$","a",null,{"className":"break-words","href":"#45-inter-gpu-communication-nvlink","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.5 Inter-GPU Communication (NVLink)"]}]
143:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Application"}]," requests ",["$","span",null,{"className":"token constant","children":"P2P"}]," access between ",["$","span",null,{"className":"token constant","children":"GPU0"}]," and ",["$","span",null,{"className":"token constant","children":"GPU1"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"CUDA"}]," driver → ",["$","span",null,{"className":"token function","children":"ioctl"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"ENABLE_PEER_ACCESS"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Check"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," ",["$","span",null,{"className":"token function","children":"connectivity"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"via nvlink_linux",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"If"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," available",["$","span",null,{"className":"token punctuation","children":","}]," use ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," library\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Otherwise"}],["$","span",null,{"className":"token punctuation","children":","}]," use ",["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}]," ",["$","span",null,{"className":"token constant","children":"P2P"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," ",["$","span",null,{"className":"token function","children":"library"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token operator","children":"/"}],"common",["$","span",null,{"className":"token operator","children":"/"}],"nvlink",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"nvlink_lib_discover_and_get_remote_conn_info"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Token"}]," exchange between ",["$","span",null,{"className":"token maybe-class-name","children":"GPUs"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Determine"}]," remote system ",["$","span",null,{"className":"token constant","children":"ID"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"SID"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    │   └── ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," connection table\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"nvlink_lib_train_links_from_swcfg_to_active"}],"$L3b1","$L3b2","\n"]}],"$L3b3","$L3b4","$L3b5","$L3b6","$L3b7","$L3b8","$L3b9","$L3ba","$L3bb","$L3bc","$L3bd","$L3be","$L3bf","$L3c0","$L3c1","$L3c2","$L3c3","$L3c4"]}]}]
144:["$","h3",null,{"className":"content-header","id":"46-gsp-rm-communication-turing","children":[["$","a",null,{"className":"break-words","href":"#46-gsp-rm-communication-turing","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"4.6 GSP-RM Communication (Turing+)"]}]
145:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," driver needs to perform ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token function","children":"operation"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"g"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token punctuation","children":","}]," allocate memory",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["kernel_gsp",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}]," message\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token constant","children":"RPC_ALLOC_MEMORY"}]," command\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Parameters"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"size",["$","span",null,{"className":"token punctuation","children":","}]," alignment",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token variable dom","children":"location"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Sequence"}]," number\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," to message ",["$","span",null,{"className":"token function","children":"queue"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"msgq",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"msgqTxGetWriteBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Get"}]," buffer slot\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Copy"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}]," message to buffer\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token function","children":"msgqTxSubmitBuffers"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Advance"}]," write pointer\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Notify"}]," ",["$","span",null,{"className":"token constant","children":"GSP"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," to doorbell register → ",["$","span",null,{"className":"token maybe-class-name","children":"Interrupt"}]," to ",["$","span",null,{"className":"token constant","children":"GSP"}]," ",["$","span",null,{"className":"token constant","children":"RISC"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"V"}]," core\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"GSP"}],"$L3c5","$L3c6"," ","$L3c7","running on ","$L3c8","$L3c9","$L3ca","\n"]}],"$L3cb","$L3cc","$L3cd","$L3ce","$L3cf","$L3d0","$L3d1","$L3d2","$L3d3","$L3d4","$L3d5","$L3d6","$L3d7","$L3d8","$L3d9","$L3da","$L3db","$L3dc"]}]}]
146:["$","hr",null,{}]
147:["$","h2",null,{"className":"content-header","id":"5-build-system-and-integration","children":[["$","a",null,{"className":"break-words","href":"#5-build-system-and-integration","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5. Build System and Integration"]}]
148:["$","h3",null,{"className":"content-header","id":"51-overview","children":[["$","a",null,{"className":"break-words","href":"#51-overview","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.1 Overview"]}]
149:["$","p",null,{"children":"The build system uses Linux kernel's Kbuild infrastructure with sophisticated configuration testing to support kernels 4.15+ across multiple architectures."}]
14a:["$","p",null,{"children":["$","strong",null,{"children":"The Cross-Kernel Compatibility Challenge"}]}]
14b:["$","p",null,{"children":"Supporting a single driver codebase across multiple kernel versions represents one of the most significant engineering challenges in out-of-tree kernel module development. The Linux kernel explicitly does not maintain a stable internal API—kernel subsystem maintainers freely modify function signatures, structure layouts, and behavioral semantics between releases, with the expectation that in-tree drivers will be updated in lockstep with kernel changes. For an out-of-tree driver like NVIDIA's, this philosophy creates a moving target: APIs that exist in kernel 4.15 may be completely removed by kernel 6.8, or may continue to exist but with fundamentally different semantics."}]
14c:["$","p",null,{"children":"The NVIDIA driver's build system addresses this challenge through comprehensive feature detection, testing for the presence and behavior of hundreds of kernel APIs at build time. Rather than maintaining separate driver versions for different kernel generations (which would multiply the maintenance burden and fragment the codebase), the driver contains conditional compilation directives that select appropriate implementations based on detected kernel features. This approach enables a single driver release to support kernel versions spanning more than six years of development, during which thousands of kernel API changes occurred."}]
14d:["$","p",null,{"children":"The sophistication becomes apparent when considering not just API presence, but API semantics. A function might exist across all supported kernel versions, but its behavior might change subtly—perhaps a new parameter was added, or the return value's meaning was altered, or locking requirements changed. The configuration testing system detects these semantic changes by compiling small test programs that exercise the APIs in question, verifying not just that compilation succeeds, but that the generated code exhibits expected characteristics. This semantic testing proves essential for avoiding subtle bugs that would arise from assuming consistent behavior across kernel versions."}]
14e:["$","h3",null,{"className":"content-header","id":"52-configuration-testing-conftestsh","children":[["$","a",null,{"className":"break-words","href":"#52-configuration-testing-conftestsh","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.2 Configuration Testing (conftest.sh)"]}]
14f:["$","p",null,{"children":["$","strong",null,{"children":"Statistics:"}]}]
150:["$","ul",null,{"children":[["$","li",null,{"children":"195,621 bytes"}],["$","li",null,{"children":"Tests ~300+ kernel features"}],["$","li",null,{"children":"Runs at every build"}],["$","li",null,{"children":"Generates compatibility headers"}]]}]
151:["$","p",null,{"children":["$","strong",null,{"children":"Test Categories:"}]}]
152:["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Function tests"}],": Check for function availability (e.g., ",["$","code",null,{"children":"set_memory_uc()"}],")"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Type tests"}],": Structure member existence"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Symbol tests"}],": Exported symbol checks"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Generic tests"}],": Platform features (Xen, virtualization)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Header tests"}],": Header file presence"]}]]}]
153:["$","p",null,{"children":["$","strong",null,{"children":"Example Test:"}]}]
154:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Test if set_memory_uc() exists"}],"\n"]}],["$","span",null,{"className":"code-line","children":["compile_test set_memory_uc ",["$","span",null,{"className":"token string","children":"\"\n"}]]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token string","children":"    #include <asm/set_memory.h>\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token string","children":"    void test(void) {\n"}]}],["$","span",null,{"className":"code-line","children":["$","span",null,{"className":"token string","children":"        set_memory_uc(0, 1);\n"}]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token string","children":"    }\""}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Generates:"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# - conftest/NV_SET_MEMORY_UC_PRESENT if successful"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# - Driver code uses: #if defined(NV_SET_MEMORY_UC_PRESENT)"}],"\n"]}]]}]}]
155:["$","p",null,{"children":["$","strong",null,{"children":"Generated Output:"}]}]
156:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["conftest",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ",["$","span",null,{"className":"token constant","children":"NV_SET_MEMORY_UC_PRESENT"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ",["$","span",null,{"className":"token constant","children":"NV_VM_OPS_FAULT_REMOVED"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ",["$","span",null,{"className":"token constant","children":"NV_DRM_ATOMIC_MODESET_AVAILABLE"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── ",["$","span",null,{"className":"token operator spread","children":"..."}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"300"}],["$","span",null,{"className":"token operator","children":"+"}]," feature flags",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["└── compile",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"log"}],"\n"]}]]}]}]
157:["$","h3",null,{"className":"content-header","id":"53-build-phases","children":[["$","a",null,{"className":"break-words","href":"#53-build-phases","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.3 Build Phases"]}]
158:["$","p",null,{"children":["$","strong",null,{"children":"Phase 1: Configuration"}]}]
159:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"make"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":"conftest.sh runs\n"}],["$","span",null,{"className":"code-line","children":["    ├── Test kernel features ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"300"}],"+ tests",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ├── Generate conftest/*.h headers\n"}],["$","span",null,{"className":"code-line","children":"    └── Create compatibility layer\n"}]]}]}]
15a:["$","p",null,{"children":["$","strong",null,{"children":"Phase 2: Compilation"}]}]
15b:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":"Kbuild compiles:\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia.ko:\n"}],["$","span",null,{"className":"code-line","children":["    │   ├── kernel-open/nvidia/*.c ",["$","span",null,{"className":"token punctuation","children":"("}],"interface layer",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    │   ├── Link: nv-kernel.o_binary ",["$","span",null,{"className":"token punctuation","children":"("}],"pre-compiled from src/",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    │   └── src/common/* ",["$","span",null,{"className":"token punctuation","children":"("}],"protocol libraries",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    │\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-uvm.ko:\n"}],["$","span",null,{"className":"code-line","children":"    │   └── kernel-open/nvidia-uvm/*.c\n"}],["$","span",null,{"className":"code-line","children":"    │\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-drm.ko:\n"}],["$","span",null,{"className":"code-line","children":"    │   ├── kernel-open/nvidia-drm/*.c\n"}],["$","span",null,{"className":"code-line","children":["    │   └── Link: nvidia-drm-kernel.o_binary ",["$","span",null,{"className":"token punctuation","children":"("}],"pre-compiled",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    │\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-modeset.ko:\n"}],["$","span",null,{"className":"code-line","children":"    │   ├── kernel-open/nvidia-modeset/*.c\n"}],["$","span",null,{"className":"code-line","children":"    │   ├── src/nvidia-modeset/src/*.c\n"}],["$","span",null,{"className":"code-line","children":["    │   └── Link: nvidia-modeset-kernel.o_binary ",["$","span",null,{"className":"token punctuation","children":"("}],"pre-compiled",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    │\n"}],["$","span",null,{"className":"code-line","children":"    └── nvidia-peermem.ko:\n"}],["$","span",null,{"className":"code-line","children":"        └── kernel-open/nvidia-peermem/*.c\n"}]]}]}]
15c:["$","p",null,{"children":["$","strong",null,{"children":"Phase 3: Linking and Module Creation"}]}]
15d:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":"Link .o files → Create .ko modules\n"}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":"MODPOST stage:\n"}],["$","span",null,{"className":"code-line","children":"    ├── Resolve symbols\n"}],["$","span",null,{"className":"code-line","children":"    ├── Verify module dependencies\n"}],["$","span",null,{"className":"code-line","children":"    ├── Generate .mod.c files\n"}],["$","span",null,{"className":"code-line","children":["    └── Final ",["$","span",null,{"className":"token function","children":"link"}],"\n"]}]]}]}]
15e:["$","p",null,{"children":["$","strong",null,{"children":"The Hybrid Build Strategy: Bridging Two Build Systems"}]}]
15f:["$","p",null,{"children":"The NVIDIA driver employs a hybrid build approach that reflects its hybrid open/proprietary architecture, combining traditional Makefile-based builds for proprietary components with Linux kernel Kbuild for the open-source interface layer. Understanding this hybrid approach proves essential for comprehending how the various components integrate into final kernel modules."}]
160:["$","p",null,{"children":["The build process begins with the top-level Makefile processing the OS-agnostic components in the ",["$","code",null,{"children":"src/"}]," directory hierarchy. These components—including the massive core GPU driver in ",["$","code",null,{"children":"src/nvidia/"}],", the display mode-setting subsystem in ",["$","code",null,{"children":"src/nvidia-modeset/"}],", and common libraries in ",["$","code",null,{"children":"src/common/"}],"—are compiled using traditional make rules into object files. Critically, these object files are not yet kernel modules; they represent position-independent code that will later be linked with the kernel interface layer. The build system creates symbolic links from the ",["$","code",null,{"children":"kernel-open/"}]," directory to these binary objects, making them available for the second build phase."]}]
161:["$","p",null,{"children":["The second phase invokes the Linux kernel build system (Kbuild) by calling ",["$","code",null,{"children":"make -C /lib/modules/$(uname -r)/build M=$(pwd)/kernel-open modules"}],". This command changes directory into the kernel build tree, then processes the Kbuild/Makefile in the ",["$","code",null,{"children":"kernel-open/"}]," directory. Kbuild compiles the open-source interface layer files—the actual ",["$","code",null,{"children":".c"}]," files in ",["$","code",null,{"children":"kernel-open/nvidia/"}],", ",["$","code",null,{"children":"kernel-open/nvidia-uvm/"}],", etc.—using the exact same compiler, flags, and configuration that were used to build the running kernel. This ensures ABI compatibility: the modules will interface correctly with kernel data structures, as they were compiled with identical structure layout and packing rules."]}]
162:["$","p",null,{"children":["During the linking phase, Kbuild combines the interface layer object files with the pre-built proprietary objects (accessible via the symbolic links created earlier). For modules like ",["$","code",null,{"children":"nvidia.ko"}],", this means linking open-source files like ",["$","code",null,{"children":"nv.c"}]," and ",["$","code",null,{"children":"nv-mmap.c"}]," with the proprietary ",["$","code",null,{"children":"nv-kernel.o_binary"}]," that contains the Resource Manager core. The ",["$","code",null,{"children":"nvidia-uvm.ko"}]," module, being fully open source, links only open-source objects with no proprietary dependencies. The final MODPOST stage performs critical validation: it verifies that all symbol references resolve correctly, checks module dependencies, and generates module metadata that enables proper loading order and inter-module communication at runtime."]}]
163:["$","p",null,{"children":"This hybrid approach provides NVIDIA with maximum flexibility: proprietary components can be updated without rebuilding the interface layer, while the interface layer can adapt to new kernel versions without requiring changes to proprietary components. The stable ABI boundary between these layers—defined by the function calls from interface layer into proprietary core—enables independent evolution of the two sides while maintaining system-wide coherence."}]
164:["$","h3",null,{"className":"content-header","id":"54-compilation-flags","children":[["$","a",null,{"className":"break-words","href":"#54-compilation-flags","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.4 Compilation Flags"]}]
165:["$","p",null,{"children":["$","strong",null,{"children":"Common Flags:"}]}]
166:["$","$L237",null,{"className":"language-makefile","children":["$","code",null,{"className":"code-highlight language-makefile","children":[["$","span",null,{"className":"code-line","children":["-D__KERNEL__                    ",["$","span",null,{"className":"token comment","children":"# Kernel mode"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-DMODULE                        ",["$","span",null,{"className":"token comment","children":"# Kernel module"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-DNVRM                          ",["$","span",null,{"className":"token comment","children":"# NVIDIA Resource Manager"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-DNV_KERNEL_INTERFACE_LAYER     ",["$","span",null,{"className":"token comment","children":"# Interface layer build"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-DNV_VERSION_STRING",["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token string","children":"\"580.95.05\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["-DNV_UVM_ENABLE                 ",["$","span",null,{"className":"token comment","children":"# Enable UVM support"}],"\n"]}],["$","span",null,{"className":"code-line","children":"-Wall -Wno-cast-qual\n"}],["$","span",null,{"className":"code-line","children":"-fno-strict-aliasing\n"}],["$","span",null,{"className":"code-line","children":"-ffreestanding\n"}]]}]}]
167:["$","p",null,{"children":["$","strong",null,{"children":"Architecture-Specific:"}]}]
168:["$","$L237",null,{"className":"language-makefile","children":["$","code",null,{"className":"code-highlight language-makefile","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# x86_64"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-mno-red-zone -mcmodel",["$","span",null,{"className":"token operator","children":"="}],"kernel\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# arm64"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-mstrict-align -mgeneral-regs-only -march",["$","span",null,{"className":"token operator","children":"="}],"armv8-a\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# riscv"}],"\n"]}],["$","span",null,{"className":"code-line","children":["-mabi",["$","span",null,{"className":"token operator","children":"="}],"lp64d -march",["$","span",null,{"className":"token operator","children":"="}],"rv64imafdc\n"]}]]}]}]
169:["$","p",null,{"children":["$","strong",null,{"children":"Build Types:"}]}]
16a:["$","$L237",null,{"className":"language-makefile","children":["$","code",null,{"className":"code-highlight language-makefile","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Release (default)"}],"\n"]}],["$","span",null,{"className":"code-line","children":"-DNDEBUG\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Develop"}],"\n"]}],["$","span",null,{"className":"code-line","children":"-DNDEBUG -DNV_MEM_LOGGER\n"}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Debug"}],"\n"]}],["$","span",null,{"className":"code-line","children":"-DDEBUG -g -DNV_MEM_LOGGER\n"}]]}]}]
16b:["$","h3",null,{"className":"content-header","id":"55-module-installation","children":[["$","a",null,{"className":"break-words","href":"#55-module-installation","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.5 Module Installation"]}]
16c:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," ",["$","span",null,{"className":"token function","children":"make"}]," modules_install\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":["Install to: /lib/modules/",["$","span",null,{"className":"token variable","children":[["$","span",null,{"className":"token variable","children":"$$("}],["$","span",null,{"className":"token function","children":"uname"}]," ",["$","span",null,{"className":"token variable parameter","children":"-r"}],["$","span",null,{"className":"token variable","children":")"}]]}],"/kernel/drivers/video/\n"]}],["$","span",null,{"className":"code-line","children":"    ├── nvidia.ko\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-uvm.ko\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-drm.ko\n"}],["$","span",null,{"className":"code-line","children":"    ├── nvidia-modeset.ko\n"}],["$","span",null,{"className":"code-line","children":["    └── nvidia-peermem.ko ",["$","span",null,{"className":"token punctuation","children":"("}],"if built",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," depmod ",["$","span",null,{"className":"token variable parameter","children":"-a"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":"Update module dependencies in:\n"}],["$","span",null,{"className":"code-line","children":["    /lib/modules/",["$","span",null,{"className":"token variable","children":[["$","span",null,{"className":"token variable","children":"$$("}],["$","span",null,{"className":"token function","children":"uname"}]," ",["$","span",null,{"className":"token variable parameter","children":"-r"}],["$","span",null,{"className":"token variable","children":")"}]]}],"/modules.dep\n"]}]]}]}]
16d:["$","h3",null,{"className":"content-header","id":"56-firmware-files","children":[["$","a",null,{"className":"break-words","href":"#56-firmware-files","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"5.6 Firmware Files"]}]
16e:["$","p",null,{"children":[["$","strong",null,{"children":"Location:"}]," ",["$","code",null,{"children":"/lib/firmware/nvidia/<version>/"}]]}]
16f:["$","p",null,{"children":["$","strong",null,{"children":"Key Firmware:"}]}]
170:["$","ul",null,{"children":[["$","li",null,{"children":[["$","code",null,{"children":"gsp.bin"}]," - GSP-RM firmware (Turing+)",["$","ul",null,{"children":["$","li",null,{"children":"ELF format with sections: .fwimage, .fwsignature, .fwversion"}]}]]}],["$","li",null,{"children":[["$","code",null,{"children":"gsp_tu10x.bin"}],", ",["$","code",null,{"children":"gsp_ga10x.bin"}],", ",["$","code",null,{"children":"gsp_gh100.bin"}]," - Architecture-specific"]}],["$","li",null,{"children":"Display firmware for various output types"}]]}]
171:["$","p",null,{"children":["$","strong",null,{"children":"Loading Process:"}]}]
172:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["kernel_gsp",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Request"}]," firmware ",["$","span",null,{"className":"token keyword module","children":"from"}]," kernel\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"request_firmware"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"\"nvidia/<version>/gsp.bin\""}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Parse"}]," ",["$","span",null,{"className":"token constant","children":"ELF"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Extract"}]," firmware image\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Verify"}]," signature\n"]}],["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Load"}]," to ",["$","span",null,{"className":"token constant","children":"GPU"}]," memory\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Start"}]," ",["$","span",null,{"className":"token constant","children":"RISC"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"V"}]," core\n"]}]]}]}]
173:["$","p",null,{"children":["$","strong",null,{"children":"GSP Firmware: The RISC-V Based Resource Manager"}]}]
174:["$","p",null,{"children":"The GSP firmware represents a complete operating system kernel running on the GPU's embedded RISC-V processor, implementing the full Resource Manager functionality that traditionally executed on the host CPU. This firmware measures tens of megabytes in size and contains sophisticated subsystems for memory management, display control, power management, compute scheduling, and error handling—essentially duplicating much of what a traditional GPU driver provides, but executing directly on the GPU with access to internal hardware state that would be invisible to a host-based driver."}]
175:["$","p",null,{"children":["The firmware loading process exemplifies the security-conscious approach that modern GPUs require. The firmware file uses the ELF (Executable and Linkable Format) commonly associated with Unix executables, enabling standard tooling for firmware analysis and debugging. Multiple ELF sections contain different components: the ",["$","code",null,{"children":".fwimage"}]," section holds the actual executable code and data, the ",["$","code",null,{"children":".fwsignature"}]," section contains a cryptographic signature that proves the firmware's authenticity, and the ",["$","code",null,{"children":".fwversion"}]," section provides version information for compatibility checking. Before the driver allows the GSP to begin executing, it cryptographically verifies the signature against NVIDIA's public key, ensuring that only authentic firmware authorized by NVIDIA can run. This verification prevents an attacker who has compromised the host OS from loading modified firmware that could extract cryptographic keys, spy on GPU computations, or disable security features."]}]
176:["$","p",null,{"children":"After signature verification succeeds, the driver must solve a complex relocation problem: the firmware ELF file contains addresses that assume a specific load location, but the actual physical addresses where the firmware will reside in GPU memory may differ. The driver parses ELF relocation records, adjusting addresses throughout the firmware image to reflect the actual load location—a process analogous to what the Linux kernel's ELF loader performs when executing user-space programs, but here implemented entirely within the driver. With relocations complete, the driver programs the RISC-V processor's boot vector to point at the firmware entry point and releases the processor from reset. The GSP begins executing, initializes its internal data structures, establishes the message queue communication channels, and sends an initialization complete message to the host driver, signaling readiness to accept commands."}]
177:["$","p",null,{"children":["The architecture-specific firmware variants (",["$","code",null,{"children":"gsp_tu10x.bin"}]," for Turing, ",["$","code",null,{"children":"gsp_ga10x.bin"}]," for Ampere, ",["$","code",null,{"children":"gsp_gh100.bin"}]," for Hopper) reflect the reality that while the Resource Manager's high-level algorithms remain largely consistent across GPU generations, the low-level hardware programming sequences differ dramatically. Each GPU architecture introduces new hardware capabilities, reorganizes register layouts, or changes operational parameters. Rather than burdening the firmware with extensive conditional logic to handle all architectures, NVIDIA provides architecture-specific firmware binaries, with the host driver selecting the appropriate variant based on the detected GPU hardware. This approach optimizes firmware size and performance while simplifying the firmware codebase."]}]
178:["$","hr",null,{}]
179:["$","h2",null,{"className":"content-header","id":"6-development-guide","children":[["$","a",null,{"className":"break-words","href":"#6-development-guide","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6. Development Guide"]}]
17a:["$","h3",null,{"className":"content-header","id":"61-navigating-the-codebase","children":[["$","a",null,{"className":"break-words","href":"#61-navigating-the-codebase","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6.1 Navigating the Codebase"]}]
17b:["$","p",null,{"children":["$","strong",null,{"children":"Starting Points by Task:"}]}]
17c:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Task"}],["$","th",null,{"children":"Entry Point"}],["$","th",null,{"children":"Key Files"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"Understand core GPU init"}]}],["$","td",null,{"children":["$","code",null,{"children":"kernel-open/nvidia/nv.c"}]}],["$","td",null,{"children":[["$","code",null,{"children":"nvidia_init_module()"}],", ",["$","code",null,{"children":"nvidia_probe()"}]]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"Memory management"}]}],["$","td",null,{"children":["$","code",null,{"children":"src/nvidia/src/kernel/gpu/mem_mgr/mem_mgr.c"}]}],["$","td",null,{"children":["$","code",null,{"children":"memmgrAllocResources()"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"UVM page faults"}]}],["$","td",null,{"children":["$","code",null,{"children":"kernel-open/nvidia-uvm/uvm_gpu_replayable_faults.c"}]}],["$","td",null,{"children":"Fault handling flow"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"Display mode setting"}]}],["$","td",null,{"children":["$","code",null,{"children":"src/nvidia-modeset/src/nvkms-modeset.c"}]}],["$","td",null,{"children":[["$","code",null,{"children":"nvkms-evo.c"}]," for HAL"]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"DisplayPort"}]}],["$","td",null,{"children":["$","code",null,{"children":"src/common/displayport/inc/dp_connector.h"}]}],["$","td",null,{"children":"C++ interface"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"NVLink"}]}],["$","td",null,{"children":["$","code",null,{"children":"src/common/nvlink/interface/nvlink.h"}]}],["$","td",null,{"children":"Link management API"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"GSP communication"}]}],["$","td",null,{"children":["$","code",null,{"children":"src/nvidia/src/kernel/gpu/gsp/kernel_gsp.c"}]}],["$","td",null,{"children":"RPC infrastructure"}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","strong",null,{"children":"Build system"}]}],["$","td",null,{"children":[["$","code",null,{"children":"kernel-open/conftest.sh"}],", ",["$","code",null,{"children":"kernel-open/Kbuild"}]]}],["$","td",null,{"children":"Configuration"}]]}]]}]]}]}]
17d:["$","h3",null,{"className":"content-header","id":"62-common-development-workflows","children":[["$","a",null,{"className":"break-words","href":"#62-common-development-workflows","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6.2 Common Development Workflows"]}]
17e:["$","p",null,{"children":["$","strong",null,{"children":"Adding Support for New GPU Architecture:"}]}]
17f:["$","ol",null,{"children":[["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Add hardware reference headers:"}]}],["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["src",["$","span",null,{"className":"token operator","children":"/"}],"common",["$","span",null,{"className":"token operator","children":"/"}],"inc",["$","span",null,{"className":"token operator","children":"/"}],"swref",["$","span",null,{"className":"token operator","children":"/"}],"published",["$","span",null,{"className":"token operator","children":"/"}],"myarch",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["└── myarch_chipid",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── dev_bus",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"h"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── dev_fb",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"h"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ├── dev_fifo",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"h"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token operator spread","children":"..."}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"all subsystems",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Extend HAL implementations:"}]}],["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["src",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"/"}],"src",["$","span",null,{"className":"token operator","children":"/"}],"kernel",["$","span",null,{"className":"token operator","children":"/"}],"gpu",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token punctuation","children":"["}],"subsystem",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token operator","children":"/"}],"arch",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["└── ",["$","span",null,{"className":"token punctuation","children":"["}],"subsystem",["$","span",null,{"className":"token punctuation","children":"]"}],"_myarch",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property literal-property","children":"Example"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["src",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"/"}],"src",["$","span",null,{"className":"token operator","children":"/"}],"kernel",["$","span",null,{"className":"token operator","children":"/"}],"gpu",["$","span",null,{"className":"token operator","children":"/"}],"mem_sys",["$","span",null,{"className":"token operator","children":"/"}],"arch",["$","span",null,{"className":"token operator","children":"/"}],"kern_mem_sys_myarch",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}]]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Add UVM architecture support:"}]}],["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["kernel",["$","span",null,{"className":"token operator","children":"-"}],"open",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── uvm_myarch_mmu",["$","span",null,{"className":"token punctuation","children":"."}],"$L3dd","\n"]}],"$L3de","$L3df","$L3e0"]}]}]]}],"$L3e1"]}]
180:["$","p",null,{"children":["$","strong",null,{"children":"Debugging GPU Hangs:"}]}]
181:["$","ol",null,{"children":[["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Check kernel logs:"}]}],["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"dmesg"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"grep"}]," ",["$","span",null,{"className":"token variable parameter","children":"-i"}]," nvidia\n"]}],["$","span",null,{"className":"code-line","children":["journalctl ",["$","span",null,{"className":"token variable parameter","children":"-k"}]," ",["$","span",null,{"className":"token operator","children":"|"}]," ",["$","span",null,{"className":"token function","children":"grep"}]," ",["$","span",null,{"className":"token variable parameter","children":"-i"}]," nvidia\n"]}]]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Increase debug verbosity:"}]}],["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," modprobe nvidia ",["$","span",null,{"className":"token variable assign-left","children":"NVreg_ResmanDebugLevel"}],["$","span",null,{"className":"token operator","children":"="}],"0xffffffff\n"]}]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Check UVM state:"}]}],["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"cat"}]," /sys/module/nvidia_uvm/parameters/*\n"]}]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Examine procfs:"}]}],["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"cat"}]," /proc/driver/nvidia/gpus/0000:*/information\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"cat"}]," /proc/driver/nvidia/version\n"]}]]}]}]]}],["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"GSP logs (Turing+):"}]}],["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"cat"}]," /sys/kernel/debug/dri/0/gsp/logs\n"]}]}]}]]}]]}]
182:["$","h3",null,{"className":"content-header","id":"63-code-style-and-conventions","children":[["$","a",null,{"className":"break-words","href":"#63-code-style-and-conventions","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6.3 Code Style and Conventions"]}]
183:["$","p",null,{"children":["$","strong",null,{"children":"Naming Conventions:"}]}]
184:["$","div",null,{"className":"w-full overflow-x-auto","children":["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Pattern"}],["$","th",null,{"children":"Usage"}],["$","th",null,{"children":"Example"}]]}]}],["$","tbody",null,{"children":[["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"NV*"}]}],["$","td",null,{"children":"NVIDIA types/constants"}],["$","td",null,{"children":[["$","code",null,{"children":"NV_STATUS"}],", ",["$","code",null,{"children":"NvU32"}]]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"nv*()"}]}],["$","td",null,{"children":"Public functions"}],["$","td",null,{"children":["$","code",null,{"children":"nvKmsModeset()"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"_nv*()"}]}],["$","td",null,{"children":"Private functions"}],["$","td",null,{"children":["$","code",null,{"children":"_nvKmsValidateMode()"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"NV*Rec"}]}],["$","td",null,{"children":"Structure types"}],["$","td",null,{"children":["$","code",null,{"children":"NVDevEvoRec"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"NV*Ptr"}]}],["$","td",null,{"children":"Pointer typedefs"}],["$","td",null,{"children":["$","code",null,{"children":"NVDevEvoPtr"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"*_HAL"}]}],["$","td",null,{"children":"HAL-dispatched"}],["$","td",null,{"children":["$","code",null,{"children":"memmgrAllocResources_HAL()"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"*_IMPL"}]}],["$","td",null,{"children":"Implementation"}],["$","td",null,{"children":["$","code",null,{"children":"gpuConstruct_IMPL()"}]}]]}],["$","tr",null,{"children":[["$","td",null,{"children":["$","code",null,{"children":"OBJ*"}]}],["$","td",null,{"children":"NVOC objects"}],["$","td",null,{"children":[["$","code",null,{"children":"OBJGPU"}],", ",["$","code",null,{"children":"KernelFifo"}]]}]]}]]}]]}]}]
185:["$","p",null,{"children":["$","strong",null,{"children":"Error Handling:"}]}]
186:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":["NV_STATUS status ",["$","span",null,{"className":"token operator","children":"="}]," NV_OK",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["status ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"someFunction"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"status ",["$","span",null,{"className":"token operator","children":"!="}]," NV_OK",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NV_PRINTF"}],["$","span",null,{"className":"token punctuation","children":"("}],"LEVEL_ERROR",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"\"Failed: %s\\n\""}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token function","children":"nvstatusToString"}],["$","span",null,{"className":"token punctuation","children":"("}],"status",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"goto"}]," cleanup",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"NV_ASSERT_OK_OR_RETURN"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"otherFunction"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["cleanup",["$","span",null,{"className":"token operator","children":":"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Cleanup code"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," status",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
187:["$","p",null,{"children":["$","strong",null,{"children":"Locking Pattern:"}]}]
188:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Acquire locks in order"}],"\n"]}],["$","span",null,{"className":"code-line","children":["status ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"rmGpuLocksAcquire"}],["$","span",null,{"className":"token punctuation","children":"("}],"flags",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token operator","children":"&"}],"gpuLock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"status ",["$","span",null,{"className":"token operator","children":"!="}]," NV_OK",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," status",["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Critical section"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"performOperation"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Release in reverse order"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"rmGpuLocksRelease"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"&"}],"gpuLock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}]
189:["$","h3",null,{"className":"content-header","id":"64-testing","children":[["$","a",null,{"className":"break-words","href":"#64-testing","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6.4 Testing"]}]
18a:["$","p",null,{"children":["$","strong",null,{"children":"Build and Test:"}]}]
18b:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Build all modules"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"make"}]," -j",["$","span",null,{"className":"token variable","children":[["$","span",null,{"className":"token variable","children":"$$("}],"nproc",["$","span",null,{"className":"token variable","children":")"}]]}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Build specific module"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"make"}]," ",["$","span",null,{"className":"token variable parameter","children":"-C"}]," /lib/modules/",["$","span",null,{"className":"token variable","children":[["$","span",null,{"className":"token variable","children":"$$("}],["$","span",null,{"className":"token function","children":"uname"}]," ",["$","span",null,{"className":"token variable parameter","children":"-r"}],["$","span",null,{"className":"token variable","children":")"}]]}],"/build ",["$","span",null,{"className":"token variable assign-left","children":"M"}],["$","span",null,{"className":"token operator","children":"="}],["$","span",null,{"className":"token variable","children":[["$","span",null,{"className":"token variable","children":"$$("}],["$","span",null,{"className":"token class-name builtin","children":"pwd"}],["$","span",null,{"className":"token variable","children":")"}]]}],"/kernel-open modules\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Install"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," ",["$","span",null,{"className":"token function","children":"make"}]," modules_install\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," depmod ",["$","span",null,{"className":"token variable parameter","children":"-a"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Load modules"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," modprobe nvidia\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," modprobe nvidia-uvm\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"sudo"}]," modprobe nvidia-drm\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Run tests (if available)"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token class-name builtin","children":"cd"}]," tools/\n"]}],["$","span",null,{"className":"code-line","children":"./run_tests.sh\n"}]]}]}]
18c:["$","p",null,{"children":["$","strong",null,{"children":"UVM Tests:"}]}]
18d:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# UVM has internal test infrastructure"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# Access via ioctl (requires special build)"}],"\n"]}]]}]}]
18e:["$","p",null,{"children":["$","strong",null,{"children":"Performance Profiling:"}]}]
18f:["$","$L237",null,{"className":"language-bash","children":["$","code",null,{"className":"code-highlight language-bash","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# NVIDIA profiler"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nsys profile ",["$","span",null,{"className":"token variable parameter","children":"--trace"}],["$","span",null,{"className":"token operator","children":"="}],"cuda,nvtx ./myapp\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"# GPU utilization"}],"\n"]}],["$","span",null,{"className":"code-line","children":["nvidia-smi dmon ",["$","span",null,{"className":"token variable parameter","children":"-s"}]," pucvmet\n"]}]]}]}]
190:["$","h3",null,{"className":"content-header","id":"65-documentation-resources","children":[["$","a",null,{"className":"break-words","href":"#65-documentation-resources","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"6.5 Documentation Resources"]}]
191:["$","p",null,{"children":["$","strong",null,{"children":"In-Tree Documentation:"}]}]
192:["$","p",null,{"children":["The driver codebase includes extensive in-tree documentation distributed throughout the repository structure. Each major directory contains ",["$","code",null,{"children":"README.md"}]," files that provide orientation for developers navigating that particular subsystem, explaining the purpose of key files and describing common workflows. The SDK headers, particularly those in ",["$","code",null,{"children":"src/common/sdk/nvidia/inc/"}],", feature detailed comments documenting structure layouts, function parameters, and usage patterns—these headers serve as the primary API contract between the driver layers and represent years of accumulated documentation effort. Additionally, this comprehensive source code analysis document and its component-specific companion files provide architectural overview and implementation details at a level not found elsewhere in the codebase."]}]
193:["$","p",null,{"children":["$","strong",null,{"children":"External Resources:"}]}]
3e2:T415,Understanding the NVIDIA GPU driver benefits significantly from familiarity with several external specifications and documentation sources. The CUDA Programming Guide, available from NVIDIA's documentation site, provides essential background on the GPU computing model, explaining concepts like thread hierarchies, memory spaces, and synchronization primitives that the driver must implement. The Vulkan Specification documents the modern graphics API that applications use to program GPUs, detailing the resource types, pipeline stages, and synchronization mechanisms that the driver exposes. For display functionality, the DisplayPort Standard published by VESA provides the authoritative reference for the DP protocol, covering link training sequences, MST topology management, and DPCD register definitions. Finally, the Linux DRM Documentation within the kernel tree explains KMS (Kernel Mode Setting) and atomic modesetting concepts that nvidia-drm implements, bridging the gap between Linux's display infrastructure and NVIDIA's hardware.194:["$","p",null,{"children":"$3e2"}]
195:["$","hr",null,{}]
196:["$","h2",null,{"className":"content-header","id":"7-key-findings-and-architectural-insights","children":[["$","a",null,{"className":"break-words","href":"#7-key-findings-and-architectural-insights","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7. Key Findings and Architectural Insights"]}]
197:["$","p",null,{"children":"Having journeyed through nearly a million lines of code, examined dozens of subsystems, and traced data flows through multiple abstraction layers, we now step back to synthesize what we've learned. This section distills the key insights that emerge from our deep analysis—the architectural patterns that define the driver's character, the engineering trade-offs that shape its behavior, and the design decisions that reveal decades of accumulated wisdom about GPU driver development."}]
198:["$","p",null,{"children":"Some insights celebrate remarkable engineering achievements: the Hardware Abstraction Layer that enables decade-spanning hardware support, the lock-free message queue that coordinates CPU and GPU with microsecond precision, the unified memory system that transparently manages heterogeneous memory spaces. Others acknowledge the costs of complexity: the massive codebase that challenges comprehension, the binary dependencies that limit community contribution, the state machine intricacies that complicate testing. Still others explore the \"why\" behind surprising choices—the rationale for C++ in a C driver, the decision to open-source UVM while keeping other components closed, the motivation for moving Resource Manager execution onto the GPU itself."}]
199:["$","p",null,{"children":"These findings matter because they represent transferable knowledge: patterns and principles applicable beyond this specific codebase to GPU driver development more broadly, and to systems programming in general. Whether you're designing your own device driver, evaluating architectural trade-offs in complex software, or simply seeking to understand how production systems engineering works at scale, these insights provide valuable lessons learned from one of the most sophisticated drivers in existence."}]
19a:["$","h3",null,{"className":"content-header","id":"71-architectural-strengths","children":[["$","a",null,{"className":"break-words","href":"#71-architectural-strengths","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.1 Architectural Strengths"]}]
19b:["$","p",null,{"children":["$","strong",null,{"children":"1. Fully Open-Source Architecture with OS Abstraction"}]}]
19c:["$","p",null,{"children":["The driver demonstrates a sophisticated architecture that separates OS-specific code from OS-agnostic functionality, with all components available as open source. The kernel interface layer (over 200,000 lines in ",["$","code",null,{"children":"kernel-open/"}],") handles OS integration—PCI device management, memory mapping, interrupt handling, and kernel API integration—enabling the community to audit, improve, and adapt the driver to new kernel versions. The OS-agnostic core (in ",["$","code",null,{"children":"src/"}],") contains GPU initialization, scheduling, and hardware-specific implementations that work across multiple operating systems. This architecture delivers multiple benefits: the sophisticated conftest.sh system enables rapid adaptation to new kernel versions; the entire driver stack can be built from source for complete auditability; and NVIDIA maintains a single codebase across Linux, Windows, FreeBSD, and VMware ESXi. While pre-compiled binaries (",["$","code",null,{"children":"o_binary"}]," files) are provided in installation packages for convenience, these are compiled from the same open-source code available in the repository, allowing users to verify and build everything from source."]}]
19d:["$","p",null,{"children":["$","strong",null,{"children":"2. Hardware Abstraction Layer (HAL) Excellence"}]}]
3e3:T428,The Hardware Abstraction Layer represents a triumph of software engineering, enabling a single driver codebase to seamlessly support nine distinct GPU generations spanning over a decade of architectural evolution. This remarkable achievement relies on runtime dispatch mechanisms that select appropriate implementations based on chip ID detection during driver initialization, allowing Maxwell, Pascal, Volta, Turing, Ampere, Ada, Hopper, and Blackwell architectures to coexist within the same binary without conflict. Per-architecture implementations provide specialized code paths optimized for each generation's unique characteristics, whether that's Maxwell's relatively simple memory controller or Hopper's sophisticated memory encryption and confidential computing features. The HAL design embodies forward compatibility: adding support for a new GPU architecture requires implementing the HAL interface for that architecture while leaving existing implementations untouched, ensuring that driver updates never regress support for older hardware generations.19e:["$","p",null,{"children":"$3e3"}]
19f:["$","p",null,{"children":["$","strong",null,{"children":"Example HAL Dispatch:"}]}]
1a0:["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Common code"}],"\n"]}],["$","span",null,{"className":"code-line","children":["NV_STATUS ",["$","span",null,{"className":"token function","children":"memmgrAllocResources"}],["$","span",null,{"className":"token punctuation","children":"("}],"MemoryManager ",["$","span",null,{"className":"token operator","children":"*"}],"pMemMgr",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token function","children":"memmgrAllocResources_HAL"}],["$","span",null,{"className":"token punctuation","children":"("}],"pMemMgr",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}]," ",["$","span",null,{"className":"token comment","children":"// Dispatches to architecture"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// Architecture-specific"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// gm107: memmgrAllocResources_GM107()"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// gh100: memmgrAllocResources_GH100()"}],"\n"]}]]}]}]
1a1:["$","p",null,{"children":["$","strong",null,{"children":"3. Sophisticated Resource Management (RESSERV)"}]}]
3e4:T4b5,RESSERV provides enterprise-grade features that distinguish it from simpler resource management approaches. The hierarchical organization spans six conceptual levels from the global Server object down through Domains, Clients, and individual Resources, mirroring the natural organization of GPU workloads while enabling sophisticated access control policies. Fine-grained locking operates at multiple granularities—per-client locks allow concurrent operations by different processes, while per-resource locks enable parallelism within a single process, with sophisticated low-priority acquisition mechanisms preventing priority inversion scenarios. The access control subsystem implements security contexts, share policies, and privilege checking that enable scenarios like rendering to another process's surface or sharing GPU memory across security boundaries, all while maintaining robust isolation guarantees. The 32-bit handle management system encodes type information directly into handle values and employs range-based allocation that provides both validation capabilities and namespace separation, making RESSERV suitable for the secure multi-tenant GPU sharing essential for cloud deployments.1a2:["$","p",null,{"children":"$3e4"}]
1a3:["$","p",null,{"children":["$","strong",null,{"children":"4. Advanced Memory Management"}]}]
1a4:["$","p",null,{"children":"Multi-layered approach from physical to virtual:"}]
1a5:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"User"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Request"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"RESSERV"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"resource tracking",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"MemoryManager"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"policy",["$","span",null,{"className":"token punctuation","children":","}]," placement",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Heap"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"PMA"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"physical allocation",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token constant","children":"GMMU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"virtual mapping",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":"    ↓\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Tables"}],"\n"]}]]}]}]
3e5:T419, that fundamentally transforms the memory management model by providing unified addressing across CPU and GPU address spaces, eliminating the explicit memory copy operations that traditionally dominated GPU programming. The system implements automatic migration on fault, transparently moving data between system memory and GPU memory based on access patterns detected through page fault handling, enabling programmers to write code that accesses memory without considering its physical location. Multi-GPU coherence protocols ensure that memory state remains consistent when multiple GPUs access shared data structures, automatically routing memory accesses over NVLink when possible to minimize latency and maximize bandwidth. The integration with Linux's Heterogeneous Memory Management (HMM) subsystem bridges the gap between GPU virtual memory and the kernel's existing memory management infrastructure, enabling features like transparent huge pages and NUMA-aware allocation to benefit GPU workloads just as they benefit CPU-only applications.1a6:["$","p",null,{"children":[["$","strong",null,{"children":"UVM adds another dimension"}],"$3e5"]}]
1a7:["$","p",null,{"children":["$","strong",null,{"children":"5. GSP-RM Offload Architecture"}]}]
1a8:["$","p",null,{"children":"The modern approach introduced with Turing offloads Resource Manager execution to the GPU itself, delivering benefits in security, power efficiency, OS consistency, and driver simplification (detailed rationale in Section 7.3)."}]
1a9:["$","p",null,{"children":[["$","strong",null,{"children":"Message Queue (msgq) represents a masterpiece of lock-free design"}]," that enables efficient communication between CPU driver and GSP firmware without synchronization primitives. Zero-copy buffer access allows messages to be constructed directly in shared memory regions visible to both processors, eliminating expensive copy operations that would multiply PCIe traffic. Atomic read/write pointers managed through compare-and-swap operations coordinate producer and consumer without locks, providing wait-free progress guarantees that prevent one side from blocking the other. Cache-coherent operations ensure that updates to the queue structure and message contents become visible across the CPU-GPU coherency domain with appropriate memory barriers, maintaining consistency without requiring explicit cache flushing. The entire design proves suitable for real-time use cases like display timing control, where deterministic latency bounds are essential and priority inversion from lock contention would be unacceptable."]}]
1aa:["$","p",null,{"children":["$","strong",null,{"children":"6. DisplayPort/NVLink Protocol Excellence"}]}]
3e6:T414, that could serve as educational examples of sophisticated protocol engineering. The DisplayPort implementation provides complete Multi-Stream Transport (MST) topology management, dynamically discovering downstream devices and allocating bandwidth across branched topologies with up to four levels of MST hubs, handling the complex message passing required to configure stream routing. Link training with automatic fallback ensures robust operation across diverse cable types and lengths, starting at maximum link rate and lane count, then progressively falling back to lower configurations if bit errors occur, until a stable configuration is achieved. Display Stream Compression (DSC) support enables high-resolution and high-refresh-rate displays that exceed raw link bandwidth, implementing the VESA compression standard transparently to applications. The implementation employs clean C++ object-oriented design with well-defined class hierarchies (Connector, Device, Group) that encapsulate protocol complexity behind intuitive interfaces.1ab:["$","p",null,{"children":["Both are ",["$","strong",null,{"children":"reference-quality protocol implementations"}],"$3e6"]}]
1ac:["$","p",null,{"children":"The NVLink library demonstrates similar excellence across five protocol generations (1.0 through 5.0), maintaining backward compatibility while supporting ever-increasing bandwidth from 20 GB/s per link in the initial generation to 150 GB/s in the latest. A complex state machine encompassing over ten distinct states orchestrates link initialization, training, and entry into high-speed operation, handling numerous failure modes and recovery paths. Parallel link training across multiple links minimizes initialization latency, bringing an entire GPU-to-GPU connection online in milliseconds rather than seconds. Fabric management capabilities enable large-scale cluster configurations, with the driver coordinating hundreds of NVLink connections across dozens of GPUs to construct the non-blocking fat-tree topologies required for modern supercomputers."}]
1ad:["$","p",null,{"children":["$","strong",null,{"children":"7. Comprehensive Debugging Infrastructure"}]}]
1ae:["$","p",null,{"children":["The driver incorporates multi-level debugging facilities that reflect the complexity of production GPU driver development. Configurable logging with verbosity levels (ERROR, WARNING, INFO, VERBOSE) allows developers to adjust diagnostic output granularity based on the problem being investigated, from terse production logging to exhaustive debug tracing that captures every function entry and register write. Runtime state dumps via procfs (",["$","code",null,{"children":"/proc/driver/nvidia/"}],") expose internal driver state to user-space debugging tools without requiring special kernel configuration, providing access to GPU information, memory statistics, and resource allocation state. The debugfs interface provides even deeper visibility into subsystems like GSP communication logs and NVLink state history, tracking state transitions and error conditions for post-mortem analysis. Crash handling infrastructure including libcrashdecode, register dumps, and ELF core dumps enables sophisticated failure analysis, capturing GPU architectural state at the moment of hang or crash. Memory debugging facilities track allocations and detect leaks, helping developers identify resource management bugs during development and testing."]}]
1af:["$","h3",null,{"className":"content-header","id":"72-complexity-factors-and-challenges","children":[["$","a",null,{"className":"break-words","href":"#72-complexity-factors-and-challenges","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.2 Complexity Factors and Challenges"]}]
1b0:["$","p",null,{"children":["$","strong",null,{"children":"1. Massive Codebase"}]}]
1b1:["$","p",null,{"children":"The sheer scale of the driver—over 935,000 lines of code distributed across 3,000+ files—presents a formidable challenge for developers seeking to understand or modify the system. Deep subsystem hierarchies extend six or more layers in some paths, requiring developers to trace through multiple abstraction levels to understand how high-level operations ultimately translate to hardware register writes. The cognitive load of maintaining a mental model of this much code exceeds what any individual developer can realistically manage, necessitating extensive specialization where developers focus on specific subsystems."}]
1b2:["$","p",null,{"children":"The driver mitigates these challenges through clear module boundaries that limit the scope of knowledge required for any particular task, extensive commenting that documents design decisions and explains non-obvious implementation choices, and comprehensive documentation like this analysis that provides architectural overview without requiring full code reading."}]
1b3:["$","p",null,{"children":["$","strong",null,{"children":"2. Multi-Generation Support Burden"}]}]
1b4:["$","p",null,{"children":"Supporting nine GPU architectures simultaneously imposes substantial costs across multiple dimensions. Code duplication arises because each architecture requires separate implementations of hardware-dependent operations—memory controller configuration for Maxwell differs fundamentally from Hopper's encrypted memory subsystem, necessitating architecture-specific code paths. Testing complexity multiplies as every driver change must be validated across all supported generations, requiring access to hardware spanning a decade of production and hundreds of person-hours per release cycle. HAL overhead introduces an extra indirection layer for every hardware operation, imposing a small performance cost and increasing code complexity as developers must understand both the HAL abstraction and the underlying implementations."}]
1b5:["$","p",null,{"children":"However, these costs enable a critical trade-off: a single driver binary supports GPUs from Maxwell through Blackwell, dramatically simplifying deployment for end users and system administrators who would otherwise need to track which driver version matches which GPU generation, making the complexity investment worthwhile despite its challenges."}]
1b6:["$","p",null,{"children":["$","strong",null,{"children":"3. Pre-compiled OS-Agnostic Components"}]}]
1b7:["$","p",null,{"children":["The driver includes pre-compiled binary components (",["$","code",null,{"children":"nv-kernel.o_binary"}],", ",["$","code",null,{"children":"nvidia-modeset-kernel.o_binary"}],") that are often mistaken for proprietary blobs. However, these are actually pre-compiled versions of the open-source OS-agnostic code from the ",["$","code",null,{"children":"src/"}]," directory, provided to reduce compilation time during installation. As stated in the NVIDIA repository: \"it is large and time-consuming to compile, so pre-built versions are provided so that the user does not have to compile it during every driver installation.\" Users can compile these components from source using the open-gpu-kernel-modules repository, generating the ",["$","code",null,{"children":"o_binary"}]," files during the build process."]}]
1b8:["$","p",null,{"children":"While NVIDIA does use proprietary components in some product lines (such as vGPU), the consumer and datacenter GPU drivers available through open-gpu-kernel-modules are fully buildable from source. This means the entire driver stack—including nvidia.ko, nvidia-modeset.ko, nvidia-drm.ko, nvidia-uvm.ko, and nvidia-peermem.ko—can be compiled and audited by the community. The availability of full source code enables security auditing, custom modifications, and community contributions across the entire driver stack, not just the kernel interface layers."}]
1b9:["$","p",null,{"children":["$","strong",null,{"children":"4. Build System Complexity"}]}]
1ba:["$","p",null,{"children":"The conftest.sh script, while powerful in enabling cross-kernel compatibility, introduces its own complexity challenges. Executing over 300 kernel feature tests at every build imposes a time cost measured in minutes on first builds, as each test requires compiling a small test program and analyzing the results. The system proves fragile when kernel headers are incomplete or misconfigured, producing cryptic error messages that require expertise to diagnose. However, this complexity investment enables support for Linux kernels from 4.15 onward—spanning over six years of kernel API evolution—with a single driver codebase, making the complexity cost worthwhile for the broad compatibility it achieves."}]
1bb:["$","p",null,{"children":["$","strong",null,{"children":"5. State Machine Complexity"}]}]
3e7:T486,The engine state machine encompasses ten distinct states (CONSTRUCT → PRE_INIT → INIT → PRE_LOAD → LOAD → POST_LOAD → [Running] → PRE_UNLOAD → UNLOAD → POST_UNLOAD → DESTROY), with each GPU engine subsystem implementing all state transitions. This state machine architecture introduces several complications that increase implementation and maintenance burden. Ordering dependencies require engines to initialize in carefully orchestrated sequences—the memory system must initialize before engines that allocate memory, the interrupt subsystem before engines that use interrupts—creating complex dependency graphs that must be manually maintained. Error handling complexity arises when state transitions fail partway through initialization: the driver must unwind already-completed initialization steps in reverse order, requiring careful bookkeeping of what resources have been allocated and what subsystems have been initialized. Testing difficulty multiplies as developers must validate all possible state transition paths, including error paths that rarely execute in normal operation but must work correctly for system stability.1bc:["$","p",null,{"children":"$3e7"}]
1bd:["$","p",null,{"children":["$","strong",null,{"children":"6. Documentation Gaps"}]}]
1be:["$","p",null,{"children":"Despite generally well-commented code, several documentation gaps complicate driver understanding and modification. High-level architecture documentation explaining how major components interact was largely missing before this analysis document, forcing developers to infer system structure from code reading—an inefficient and error-prone process. The Resource Manager binary interface remains undocumented, making it difficult for community developers to understand how the open interface layer communicates with proprietary components. Hardware programming sequences require reading implementation code to understand, as the register-level operations lack the context that dedicated documentation would provide. Cross-component data flow remains unclear without manual tracing through multiple layers of abstraction, complicating efforts to understand how operations like memory allocation or command submission actually execute end-to-end."}]
1bf:["$","h3",null,{"className":"content-header","id":"73-notable-design-decisions","children":[["$","a",null,{"className":"break-words","href":"#73-notable-design-decisions","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.3 Notable Design Decisions"]}]
1c0:["$","p",null,{"children":["$","strong",null,{"children":"1. Why Pre-compiled OS-Agnostic Components?"}]}]
1c1:["$","p",null,{"children":[["$","strong",null,{"children":"Decision:"}]," Provide pre-compiled binaries (",["$","code",null,{"children":"o_binary"}]," files) from open-source code"]}]
1c2:["$","p",null,{"children":[["$","strong",null,{"children":"Rationale:"}]," The driver architecture separates OS-specific interface code (in ",["$","code",null,{"children":"kernel-open/"}],") from OS-agnostic core functionality (in ",["$","code",null,{"children":"src/"}],"). The OS-agnostic portion is large and time-consuming to compile—approaching 50MB of compiled code. To improve the installation experience, NVIDIA provides pre-compiled versions of these components in their .run installation packages, significantly reducing build time and complexity for end users."]}]
1c3:["$","p",null,{"children":["Users can verify this is not proprietary code by building the entire driver from source using the open-gpu-kernel-modules repository, which compiles the same ",["$","code",null,{"children":"src/"}]," code and generates identical ",["$","code",null,{"children":"o_binary"}]," files. This architecture enables NVIDIA to maintain a single codebase across operating systems (Linux, Windows, FreeBSD, VMware ESXi) while allowing the open-source community to audit, modify, and contribute to the entire driver stack."]}]
1c4:["$","p",null,{"children":"Note that some NVIDIA product lines (such as vGPU) still use proprietary components, but the consumer and datacenter GPU drivers available through open-gpu-kernel-modules are fully buildable from source."}]
1c5:["$","p",null,{"children":["$","strong",null,{"children":"2. Why UVM Fully Open?"}]}]
1c6:["$","p",null,{"children":[["$","strong",null,{"children":"Decision:"}]," nvidia-uvm.ko has no binary dependencies"]}]
3e8:T451, The decision to fully open-source UVM reflects unique characteristics of GPU memory management that make openness particularly valuable. Memory management proves inherently OS-specific, requiring deep integration with Linux's memory management subsystem including page fault handling, NUMA policies, and transparent huge page support—this integration benefits enormously from community input as kernel MM experts can review and improve the implementation. Debugging page faults and migration issues requires source code access, as the complexity of multi-processor memory coherency makes black-box debugging nearly impossible; providing source enables customers to understand problems and develop fixes. UVM's sophisticated algorithms attracted academic interest, with researchers publishing papers analyzing the system's design—opening the source encourages this academic engagement while demonstrating NVIDIA's technical leadership. Finally, full open-sourcing enables potential future upstreaming into the mainline Linux kernel, which could eventually provide UVM functionality to all GPU drivers.1c7:["$","p",null,{"children":[["$","strong",null,{"children":"Rationale:"}],"$3e8"]}]
1c8:["$","p",null,{"children":"The impact has been substantial: UVM stands as perhaps the most successful open-source GPU memory manager, implementing algorithms that rival the Linux kernel's own memory management subsystem in sophistication while handling the additional complexities of multi-processor coherency and heterogeneous memory systems."}]
1c9:["$","p",null,{"children":["$","strong",null,{"children":"3. Why GSP-RM Offload?"}]}]
1ca:["$","p",null,{"children":[["$","strong",null,{"children":"Decision:"}]," Move RM to GPU RISC-V processor (Turing+)"]}]
1cb:["$","p",null,{"children":[["$","strong",null,{"children":"Rationale:"}]," The GSP-RM offload architecture addresses multiple longstanding limitations of CPU-based driver execution. Security improves through GPU self-attestation capabilities and a smaller kernel Trusted Computing Base, as the CPU driver cannot directly access GPU internal state, making exploitation more difficult and enabling confidential computing scenarios. Power efficiency gains arise from GPU autonomous power management—the GPU can enter and exit low-power states without waking the CPU package, dramatically reducing idle power consumption. Reliability improves because GPU reset operations no longer require kernel driver reload, enabling more graceful recovery from GPU hangs. Performance benefits from lower latency for GPU-internal operations, as register accesses become local memory operations rather than PCIe transactions. Finally, simplicity emerges as the kernel driver becomes a thin RPC layer, moving complex resource management logic into firmware where it's isolated from OS-specific concerns."]}]
1cc:["$","p",null,{"children":"The trade-off involves added complexity of message queue protocol design and the challenge of debugging firmware running on the GPU, but analysis suggests long-term benefits substantially outweigh these costs, as evidenced by NVIDIA's expanding use of GSP-RM across product lines."}]
1cd:["$","p",null,{"children":["$","strong",null,{"children":"4. Why C++ for DisplayPort Library?"}]}]
1ce:["$","p",null,{"children":[["$","strong",null,{"children":"Decision:"}]," DisplayPort in C++ (only C++ in codebase besides tests)"]}]
1cf:["$","p",null,{"children":[["$","strong",null,{"children":"Rationale:"}]," DisplayPort's Multi-Stream Transport topology naturally maps to object-oriented design, with Connector, Device, and Group classes forming an intuitive hierarchy that encapsulates protocol complexity. The C++ implementation enables code reuse with NVIDIA's Windows driver, which shares substantial DisplayPort library code, reducing maintenance burden and ensuring consistent behavior across platforms. MST topology management proves significantly easier with C++ classes and inheritance compared to C's manual vtable construction, as the compiler handles method dispatch and object lifetime management. Integration with the C-based driver occurs through C wrapper functions (nvdp-*.cpp) that translate between C and C++ calling conventions, bridging the language boundary while keeping DisplayPort complexity isolated within its C++ implementation."]}]
1d0:["$","p",null,{"children":["$","strong",null,{"children":"5. Why NVOC Code Generator?"}]}]
1d1:["$","p",null,{"children":[["$","strong",null,{"children":"Decision:"}]," Custom code generator for OOP in C"]}]
1d2:["$","p",null,{"children":[["$","strong",null,{"children":"Rationale:"}]," The NVOC code generator emerged from conflicting requirements that standard approaches couldn't satisfy. Object-oriented programming provides substantial benefits for complex driver code—inheritance enables code reuse across GPU generations, virtual methods enable runtime polymorphism for HAL dispatch, and runtime type information (RTTI) facilitates debugging and introspection. However, the Linux kernel enforces a C-only requirement, rejecting C++ for in-kernel code due to concerns about exception handling overhead, constructor/destructor semantics, and ABI stability. Performance considerations also favor avoiding C++ exceptions and RTTI, as these features impose runtime overhead even when unused. A custom generator provides complete control, enabling NVIDIA to tailor the object model precisely to driver needs, generating optimized dispatch tables and minimizing metadata overhead while providing exactly the object-oriented features the driver requires."]}]
1d3:["$","p",null,{"children":["The generator produces over 2000 files with the ",["$","code",null,{"children":"g_*_nvoc.[ch]"}]," prefix, transforming class definitions into C code with manually constructed vtables and type hierarchies, bringing object-oriented design to a C codebase without compromising kernel compatibility or performance."]}]
1d4:["$","h3",null,{"className":"content-header","id":"74-performance-insights","children":[["$","a",null,{"className":"break-words","href":"#74-performance-insights","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.4 Performance Insights"]}]
1d5:["$","p",null,{"children":["$","strong",null,{"children":"Hot Paths (Optimized for Low Latency):"}]}]
3e9:T4fe,The driver meticulously optimizes several performance-critical code paths where even microseconds of latency would degrade user experience. Command submission achieves minimal latency through doorbell writes (USERD) executed directly from user space without kernel involvement in steady state—applications write command buffers to memory, then perform a single write to the doorbell register that notifies the GPU's PBDMA to begin fetching from the push buffer, with the entire submission path completing in hundreds of nanoseconds. Memory mapping operations leverage hardware page table walks in the GMMU, with the GPU's TLB caching recent translations to provide fast lookups for frequently-accessed pages; large page support using 2MB pages dramatically reduces TLB pressure, as a single TLB entry can cover 2MB of address space instead of 4KB, multiplying effective TLB capacity by 512× for workloads with large contiguous allocations. Display page flips employ atomic UPDATE methods that commit at VBLANK boundaries, using hardware semaphores for synchronization without CPU involvement after submission—the compositor submits a flip request once, and the hardware autonomously completes the operation at the appropriate display timing, freeing the CPU for other work.1d6:["$","p",null,{"children":"$3e9"}]
1d7:["$","p",null,{"children":["$","strong",null,{"children":"Scalability Strategies:"}]}]
1d8:["$","p",null,{"children":"The driver employs sophisticated strategies to scale across multiple GPUs and diverse workload types. Multi-GPU scaling relies on per-GPU locks rather than global locks, enabling concurrent operations on different GPUs without contention; independent state machines for each GPU allow parallel initialization and operation; and NVLink provides coherent communication channels that enable GPUs to coordinate directly without CPU mediation, achieving massive aggregate bandwidth in multi-GPU configurations. Multi-Instance GPU (MIG) partitioning, introduced with Ampere, takes a different approach by dividing a single physical GPU into multiple independent instances, each with isolated memory spaces preventing one workload from accessing another's data, separate scheduling queues preventing interference, and quality-of-service enforcement guaranteeing minimum resource allocations—enabling cloud providers to securely multiplex GPU resources across tenants while providing performance predictability."}]
1d9:["$","p",null,{"children":["$","strong",null,{"children":"Optimization Techniques:"}]}]
3ea:T455,A collection of optimization techniques permeate the driver implementation, reflecting accumulated performance engineering wisdom. Batched operations group related updates like page table modifications and TLB invalidations, amortizing fixed operation costs across many changes rather than incurring the overhead repeatedly—a single TLB flush after updating 100 page table entries proves far more efficient than 100 individual flush operations. Deferred work moves non-critical operations to workqueues that execute outside latency-sensitive paths, allowing critical operations to complete quickly while ensuring background work eventually completes. Lock-free paths in the UVM fault handler avoid lock acquisition where possible through careful use of atomic operations and per-VA-block state, enabling multiple faults to be serviced concurrently. Pre-allocation strategies exemplified by nvkms-prealloc.c ensure that memory allocations occur during initialization rather than in performance-critical paths, as memory allocation can take milliseconds while display operations must complete in microseconds.1da:["$","p",null,{"children":"$3ea"}]
1db:["$","h3",null,{"className":"content-header","id":"75-security-architecture","children":[["$","a",null,{"className":"break-words","href":"#75-security-architecture","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.5 Security Architecture"]}]
1dc:["$","p",null,{"children":["$","strong",null,{"children":"1. Confidential Computing (Hopper+)"}]}]
1dd:["$","p",null,{"children":["$","strong",null,{"children":"Components:"}]}]
1de:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Memory encryption:"}]," Full GPU memory encrypted (AES-256)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Channel encryption:"}]," CPU-GPU communication encrypted"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Attestation:"}]," SPDM-based remote attestation"]}],["$","li",null,{"children":[["$","strong",null,{"children":"FSP:"}]," Falcon Security Processor manages keys"]}]]}]
1df:["$","p",null,{"children":[["$","strong",null,{"children":"Use Case:"}]," GPU computation in untrusted cloud environments"]}]
1e0:["$","p",null,{"children":["$","strong",null,{"children":"2. Secure Boot Chain"}]}]
1e1:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Boot"}]," ",["$","span",null,{"className":"token constant","children":"ROM"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"fused ",["$","span",null,{"className":"token keyword","children":"in"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    → ",["$","span",null,{"className":"token maybe-class-name","children":"Verify"}]," ",["$","span",null,{"className":"token constant","children":"FWSEC"}]," signature\n"]}],["$","span",null,{"className":"code-line","children":["        → ",["$","span",null,{"className":"token constant","children":"FWSEC"}],"\n"]}],["$","span",null,{"className":"code-line","children":["            → ",["$","span",null,{"className":"token maybe-class-name","children":"Verify"}]," ",["$","span",null,{"className":"token constant","children":"GSP"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"RM"}]," signature\n"]}],["$","span",null,{"className":"code-line","children":["                → ",["$","span",null,{"className":"token constant","children":"GSP"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"RM"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                    → ",["$","span",null,{"className":"token maybe-class-name","children":"Verify"}]," driver ",["$","span",null,{"className":"token function","children":"signature"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"optional",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["                        → ",["$","span",null,{"className":"token maybe-class-name","children":"Driver"}],"\n"]}]]}]}]
1e2:["$","p",null,{"children":["$","strong",null,{"children":"3. Isolation Mechanisms"}]}]
1e3:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Process isolation:"}]," Separate VA spaces, page table isolation"]}],["$","li",null,{"children":[["$","strong",null,{"children":"VM isolation (vGPU):"}]," Hardware memory protection, SR-IOV"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Channel isolation:"}]," USERD isolation domains (5 levels)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"MIG isolation:"}]," Physical memory and compute partitioning"]}]]}]
1e4:["$","p",null,{"children":["$","strong",null,{"children":"4. Vulnerability Mitigation"}]}]
1e5:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"No user-controlled sizes:"}]," Fixed allocation sizes where possible"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Validation:"}]," All DPCD/I2C reads checked for size"]}],["$","li",null,{"children":[["$","strong",null,{"children":"ELF loading:"}]," Overlapping section checks"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Integer overflow protection:"}]," Careful size calculations"]}]]}]
1e6:["$","h3",null,{"className":"content-header","id":"76-future-architecture-trends","children":[["$","a",null,{"className":"break-words","href":"#76-future-architecture-trends","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"7.6 Future Architecture Trends"]}]
1e7:["$","p",null,{"children":"Based on code structure and recent additions:"}]
1e8:["$","p",null,{"children":["$","strong",null,{"children":"1. More GSP Offload"}]}]
1e9:["$","p",null,{"children":[["$","strong",null,{"children":"Trend:"}]," Increasing RM functionality moved to GSP-RM"]}]
1ea:["$","p",null,{"children":["$","strong",null,{"children":"Evidence:"}]}]
1eb:["$","ul",null,{"children":[["$","li",null,{"children":"Hopper GSP-RM is ~10x larger than Turing"}],["$","li",null,{"children":"More subsystems reporting via RPC"}],["$","li",null,{"children":"Kernel driver simplifying"}]]}]
1ec:["$","p",null,{"children":[["$","strong",null,{"children":"Future:"}]," Kernel driver becomes thin shim, all logic in GSP-RM"]}]
1ed:["$","p",null,{"children":["$","strong",null,{"children":"2. Unified Memory Evolution"}]}]
1ee:["$","p",null,{"children":[["$","strong",null,{"children":"Trend:"}]," Tighter CPU-GPU integration"]}]
1ef:["$","p",null,{"children":["$","strong",null,{"children":"Evidence:"}]}]
1f0:["$","ul",null,{"children":[["$","li",null,{"children":"CCU (Coherent Cache Unit) in Hopper"}],["$","li",null,{"children":"ATS/SVA support"}],["$","li",null,{"children":"HMM integration"}],["$","li",null,{"children":"Grace-Hopper superchip"}]]}]
1f1:["$","p",null,{"children":[["$","strong",null,{"children":"Future:"}]," Single address space, cache-coherent, transparent migration"]}]
1f2:["$","p",null,{"children":["$","strong",null,{"children":"3. AI-First Features"}]}]
1f3:["$","p",null,{"children":[["$","strong",null,{"children":"Trend:"}]," Hardware optimized for AI workloads"]}]
1f4:["$","p",null,{"children":["$","strong",null,{"children":"Evidence:"}]}]
1f5:["$","ul",null,{"children":[["$","li",null,{"children":"Transformer engine (Hopper)"}],["$","li",null,{"children":"FP8/FP4 datatypes"}],["$","li",null,{"children":"Large tensor support"}],["$","li",null,{"children":"NVLink for collective operations"}]]}]
1f6:["$","p",null,{"children":[["$","strong",null,{"children":"Future:"}]," Specialized engines for LLM training/inference"]}]
1f7:["$","p",null,{"children":["$","strong",null,{"children":"4. Display Evolution"}]}]
1f8:["$","p",null,{"children":[["$","strong",null,{"children":"Trend:"}]," Higher bandwidth, more features"]}]
1f9:["$","p",null,{"children":["$","strong",null,{"children":"Evidence:"}]}]
1fa:["$","ul",null,{"children":[["$","li",null,{"children":"DisplayPort 2.1 support"}],["$","li",null,{"children":"HDMI 2.1b (48 Gbps FRL)"}],["$","li",null,{"children":"DSC 1.2a"}],["$","li",null,{"children":"HDR with dynamic metadata"}]]}]
1fb:["$","p",null,{"children":[["$","strong",null,{"children":"Future:"}]," 8K120, 10K, holographic displays"]}]
1fc:["$","p",null,{"children":["$","strong",null,{"children":"5. Quantum Interconnects"}]}]
1fd:["$","p",null,{"children":[["$","strong",null,{"children":"Speculation:"}]," NVLink evolving toward:"]}]
1fe:["$","ul",null,{"children":[["$","li",null,{"children":"Coherent memory (already happening)"}],["$","li",null,{"children":"CXL-like protocols"}],["$","li",null,{"children":"Optical interconnects (NVLink 6.0?)"}]]}]
1ff:["$","hr",null,{}]
200:["$","h2",null,{"className":"content-header","id":"8-references","children":[["$","a",null,{"className":"break-words","href":"#8-references","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8. References"]}]
201:["$","h3",null,{"className":"content-header","id":"81-detailed-analysis-documents","children":[["$","a",null,{"className":"break-words","href":"#81-detailed-analysis-documents","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8.1 Detailed Analysis Documents"]}]
202:["$","ul",null,{"children":[["$","li",null,{"children":[["$","p",null,{"children":[["$","strong",null,{"children":"Kernel Interface Layer:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"kernel-open-analysis.md","children":"kernel-open-analysis.md"}]]}],["$","ul",null,{"children":[["$","li",null,{"children":"nvidia.ko core driver (38,762 LOC)"}],["$","li",null,{"children":"nvidia-uvm.ko unified memory (103,318 LOC)"}],["$","li",null,{"children":"nvidia-drm.ko DRM integration"}],["$","li",null,{"children":"nvidia-modeset.ko mode setting interface"}],["$","li",null,{"children":"nvidia-peermem.ko RDMA support"}]]}]]}],["$","li",null,{"children":[["$","p",null,{"children":[["$","strong",null,{"children":"Common Libraries:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"common-analysis.md","children":"common-analysis.md"}]]}],["$","ul",null,{"children":[["$","li",null,{"children":"DisplayPort library (41 files, C++)"}],["$","li",null,{"children":"NVLink library (30+ files)"}],["$","li",null,{"children":"NVSwitch management (100+ files)"}],["$","li",null,{"children":"SDK headers (700+ files)"}],["$","li",null,{"children":"Hardware reference (600+ files)"}],["$","li",null,{"children":"Supporting libraries (message queue, softfloat, uproc, etc.)"}]]}]]}],["$","li",null,{"children":[["$","p",null,{"children":[["$","strong",null,{"children":"Core GPU Driver:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"nvidia-analysis.md","children":"nvidia-analysis.md"}]]}],["$","ul",null,{"children":[["$","li",null,{"children":"OBJGPU and core architecture"}],["$","li",null,{"children":"RESSERV resource management"}],["$","li",null,{"children":"Memory management (MemoryManager, PMA, GMMU)"}],["$","li",null,{"children":"GSP-RM architecture"}],["$","li",null,{"children":"Engine management (FIFO, CE, GR, etc.)"}],["$","li",null,{"children":"HAL and multi-generation support"}]]}]]}],["$","li",null,{"children":[["$","p",null,{"children":[["$","strong",null,{"children":"Display Mode-Setting:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"nvidia-modeset-analysis.md","children":"nvidia-modeset-analysis.md"}]]}],["$","ul",null,{"children":[["$","li",null,{"children":"NVKMS architecture"}],["$","li",null,{"children":"EVO display engine (HAL versions 1-4)"}],["$","li",null,{"children":"Modesetting state machine"}],["$","li",null,{"children":"Page flipping infrastructure"}],["$","li",null,{"children":"DisplayPort integration"}],["$","li",null,{"children":"KAPI layer for nvidia-drm"}]]}]]}]]}]
203:["$","h3",null,{"className":"content-header","id":"82-external-resources","children":[["$","a",null,{"className":"break-words","href":"#82-external-resources","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8.2 External Resources"]}]
204:["$","p",null,{"children":["$","strong",null,{"children":"NVIDIA Documentation:"}]}]
205:["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://docs.nvidia.com/cuda/","children":"CUDA C Programming Guide"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/NVIDIA/open-gpu-doc","children":"Open GPU Documentation"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.nvidia.com/download/index.aspx","children":"GPU Driver Release Notes"}]}]]}]
206:["$","p",null,{"children":["$","strong",null,{"children":"Linux Kernel Documentation:"}]}]
207:["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.kernel.org/doc/html/latest/gpu/","children":"DRM Documentation"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.kernel.org/doc/html/latest/mm/","children":"Memory Management"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.kernel.org/doc/html/latest/driver-api/","children":"Device Driver Model"}]}]]}]
208:["$","p",null,{"children":["$","strong",null,{"children":"Standards and Specifications:"}]}]
209:["$","ul",null,{"children":[["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.vesa.org/displayport/","children":"DisplayPort Standard"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.hdmi.org/","children":"HDMI Specification"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://pcisig.com/","children":"PCIe Specification"}]}],["$","li",null,{"children":["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://www.dmtf.org/standards/spdm","children":"SPDM Specification"}]}]]}]
20a:["$","h3",null,{"className":"content-header","id":"83-repository-information","children":[["$","a",null,{"className":"break-words","href":"#83-repository-information","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8.3 Repository Information"]}]
20b:["$","p",null,{"children":[["$","strong",null,{"children":"GitHub:"}]," ",["$","a",null,{"className":"break-words","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/NVIDIA/open-gpu-kernel-modules","children":"https://github.com/NVIDIA/open-gpu-kernel-modules"}]," ",["$","strong",null,{"children":"Version Analyzed:"}]," 580.95.05 ",["$","strong",null,{"children":"Commit:"}]," 2b43605 ",["$","strong",null,{"children":"License:"}]," Dual MIT/GPL"]}]
20c:["$","p",null,{"children":["$","strong",null,{"children":"Directory Structure:"}]}]
20d:["$","$L237",null,{"className":"language-js","children":["$","code",null,{"className":"language-js code-highlight","children":[["$","span",null,{"className":"code-line","children":["open",["$","span",null,{"className":"token operator","children":"-"}],"gpu",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token operator","children":"-"}],"modules",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}],["$","span",null,{"className":"code-line","children":["├── kernel",["$","span",null,{"className":"token operator","children":"-"}],"open",["$","span",null,{"className":"token operator","children":"/"}],"           # ",["$","span",null,{"className":"token maybe-class-name","children":"Linux"}]," kernel ",["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token class-name","children":"layer"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"200K",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"/"}],"           # ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," driver ",["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"59"}]," files",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token operator","children":"/"}],"       # ",["$","span",null,{"className":"token maybe-class-name","children":"Unified"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Virtual"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"127"}]," files",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token operator","children":"/"}],"       # ",["$","span",null,{"className":"token constant","children":"DRM"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"KMS"}]," ",["$","span",null,{"className":"token function","children":"integration"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"19"}]," files",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token operator","children":"/"}],"   # ",["$","span",null,{"className":"token maybe-class-name","children":"Mode"}]," setting ",["$","span",null,{"className":"token keyword","children":"interface"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2"}]," files",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"-"}],"peermem",["$","span",null,{"className":"token operator","children":"/"}],"   # ",["$","span",null,{"className":"token constant","children":"RDMA"}]," ",["$","span",null,{"className":"token function","children":"support"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}]," file",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── common",["$","span",null,{"className":"token operator","children":"/"}],"           # ",["$","span",null,{"className":"token maybe-class-name","children":"Shared"}]," interfaces\n"]}],["$","span",null,{"className":"code-line","children":["│   ├── conftest",["$","span",null,{"className":"token punctuation","children":"."}],"$L3eb","       # ","$L3ec"," ","$L3ed"," ","$L3ee","195KB","$L3ef","\n"]}],"$L3f0","$L3f1","$L3f2","$L3f3","$L3f4","$L3f5"]}]}]
20e:["$","h3",null,{"className":"content-header","id":"84-glossary","children":[["$","a",null,{"className":"break-words","href":"#84-glossary","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"8.4 Glossary"]}]
20f:["$","p",null,{"children":["$","strong",null,{"children":"Key Terms:"}]}]
210:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"RM (Resource Manager):"}]," OS-agnostic GPU management core (open source in src/)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"GSP (GPU System Processor):"}]," RISC-V processor on GPU running GSP-RM"]}],["$","li",null,{"children":[["$","strong",null,{"children":"UVM (Unified Virtual Memory):"}]," System for CPU-GPU unified addressing"]}],["$","li",null,{"children":[["$","strong",null,{"children":"HAL (Hardware Abstraction Layer):"}]," Multi-generation GPU support framework"]}],["$","li",null,{"children":[["$","strong",null,{"children":"RESSERV (Resource Server):"}]," Hierarchical resource management framework"]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVOC:"}]," NVIDIA Object C code generator for OOP in C"]}],["$","li",null,{"children":[["$","strong",null,{"children":"EVO:"}]," Display engine architecture (versions 1-4)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVKMS:"}]," NVIDIA Kernel Mode Setting"]}],["$","li",null,{"children":[["$","strong",null,{"children":"KAPI:"}]," Kernel API (nvidia-modeset → nvidia-drm interface)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"GMMU (Graphics MMU):"}]," GPU memory management unit"]}],["$","li",null,{"children":[["$","strong",null,{"children":"PMA (Physical Memory Allocator):"}]," Low-level GPU memory allocator"]}],["$","li",null,{"children":[["$","strong",null,{"children":"CE (Copy Engine):"}]," Hardware-accelerated memory copy"]}],["$","li",null,{"children":[["$","strong",null,{"children":"GR (Graphics Engine):"}]," Graphics and compute execution engine"]}],["$","li",null,{"children":[["$","strong",null,{"children":"FIFO:"}]," Channel and scheduling subsystem"]}],["$","li",null,{"children":[["$","strong",null,{"children":"TSG (Time Slice Group):"}]," Channel group for scheduling"]}],["$","li",null,{"children":[["$","strong",null,{"children":"PBDMA:"}]," Push Buffer DMA engine"]}],["$","li",null,{"children":[["$","strong",null,{"children":"USERD:"}]," User-space read/write doorbell area"]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVLink:"}]," High-speed GPU-GPU/GPU-CPU interconnect (20-150 GB/s)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"NVSwitch:"}]," Fabric switch for multi-GPU systems"]}],["$","li",null,{"children":[["$","strong",null,{"children":"MIG (Multi-Instance GPU):"}]," GPU partitioning (Ampere+)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"CCU (Coherent Cache Unit):"}]," Cache coherency for CPU-GPU (Hopper+)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"FSP (Falcon Security Processor):"}]," Security processor (Hopper+)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"SPDM:"}]," Security Protocol and Data Model (attestation)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"MST (Multi-Stream Transport):"}]," DisplayPort multi-monitor"]}],["$","li",null,{"children":[["$","strong",null,{"children":"DSC (Display Stream Compression):"}]," Display bandwidth compression"]}],["$","li",null,{"children":[["$","strong",null,{"children":"VRR (Variable Refresh Rate):"}]," Adaptive refresh rate"]}],["$","li",null,{"children":[["$","strong",null,{"children":"HDR (High Dynamic Range):"}]," Extended color/brightness range"]}]]}]
211:["$","hr",null,{}]
212:["$","h2",null,{"className":"content-header","id":"summary","children":[["$","a",null,{"className":"break-words","href":"#summary","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Summary"]}]
213:["$","p",null,{"children":["The NVIDIA Open GPU Kernel Modules represent ",["$","strong",null,{"children":"over 935,000 lines of sophisticated driver code"}]," supporting nine GPU architectures (Maxwell through Blackwell) through a carefully layered architecture:"]}]
214:["$","p",null,{"children":["$","strong",null,{"children":"Five Kernel Modules:"}]}]
215:["$","ol",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"nvidia.ko"}]," - Core GPU driver with hybrid open/proprietary design"]}],["$","li",null,{"children":[["$","strong",null,{"children":"nvidia-uvm.ko"}]," - Unified memory management (103,318 LOC)"]}],["$","li",null,{"children":[["$","strong",null,{"children":"nvidia-drm.ko"}]," - DRM/KMS integration for modern Linux graphics"]}],["$","li",null,{"children":[["$","strong",null,{"children":"nvidia-modeset.ko"}]," - Display mode-setting and output management"]}],["$","li",null,{"children":[["$","strong",null,{"children":"nvidia-peermem.ko"}]," - GPU Direct RDMA for HPC workloads"]}]]}]
216:["$","p",null,{"children":["$","strong",null,{"children":"Key Architectural Achievements:"}]}]
217:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Hardware Abstraction (HAL):"}]," Single driver spans 9 GPU generations"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Resource Management (RESSERV):"}]," Enterprise-grade resource tracking"]}],["$","li",null,{"children":[["$","strong",null,{"children":"GSP-RM Offload:"}]," Modern architecture offloading RM to GPU RISC-V core"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Protocol Libraries:"}]," Reference implementations for DisplayPort and NVLink"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Unified Memory (UVM):"}]," Sophisticated CPU-GPU memory management"]}]]}]
218:["$","p",null,{"children":["$","strong",null,{"children":"Major Strengths:"}]}]
219:["$","ul",null,{"children":[["$","li",null,{"children":"Modularity and clear subsystem boundaries"}],["$","li",null,{"children":"Multi-generation support through extensive HAL"}],["$","li",null,{"children":"Comprehensive debugging infrastructure"}],["$","li",null,{"children":"Advanced features (MIG, confidential computing, NVLink)"}],["$","li",null,{"children":"Significant open-source contribution (UVM, interface layers)"}]]}]
21a:["$","p",null,{"children":[["$","strong",null,{"children":"Path Forward:"}]," The codebase demonstrates NVIDIA's gradual transition toward more open-source components, with UVM as the flagship example of a fully open, production-quality GPU subsystem. This analysis provides a foundation for understanding, contributing to, and extending this massive driver stack."]}]
21b:["$","hr",null,{}]
21c:["$","h2",null,{"className":"content-header","id":"conclusion-lessons-from-the-engine-room","children":[["$","a",null,{"className":"break-words","href":"#conclusion-lessons-from-the-engine-room","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Conclusion: Lessons from the Engine Room"]}]
21d:["$","p",null,{"children":"Our journey through the NVIDIA open GPU kernel modules reveals far more than just how a graphics driver works—it offers a masterclass in managing complexity at scale. Across 935,000 lines of code, we've witnessed engineering decisions that balance performance against maintainability, openness against intellectual property protection, and architectural purity against practical constraints. These aren't just academic concerns; they're the daily realities of production systems development."}]
21e:["$","h3",null,{"className":"content-header","id":"the-art-of-abstraction","children":[["$","a",null,{"className":"break-words","href":"#the-art-of-abstraction","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"The Art of Abstraction"]}]
21f:["$","p",null,{"children":"Perhaps the most striking lesson is the power of well-designed abstraction layers. The Hardware Abstraction Layer doesn't just enable multi-generation GPU support—it fundamentally transforms how the driver evolves. New GPU architectures can be added without touching existing code. Bugs can be fixed in generation-specific implementations without worrying about cross-generation impact. Testing can focus on the HAL interface rather than every possible hardware combination. This isn't accidental; it's the result of deliberate architectural discipline maintained over more than a decade."}]
220:["$","p",null,{"children":"Similarly, the Resource Server framework (RESSERV) demonstrates how sophisticated resource management can be both powerful and composable. By establishing a clear hierarchy (Server → Domain → Client → Resource) and enforcing access through well-defined APIs, RESSERV enables features that would be nightmarishly complex otherwise: secure multi-tenancy, fine-grained access control, per-client resource tracking. The lesson extends beyond GPU drivers: any system managing complex resource lifecycles can benefit from this kind of structured approach."}]
221:["$","h3",null,{"className":"content-header","id":"open-source-as-strategy-not-just-philosophy","children":[["$","a",null,{"className":"break-words","href":"#open-source-as-strategy-not-just-philosophy","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Open Source as Strategy, Not Just Philosophy"]}]
222:["$","p",null,{"children":"NVIDIA's hybrid open/proprietary model offers valuable insights for companies navigating similar decisions. By open-sourcing the kernel interface layer while keeping the Resource Manager core proprietary, NVIDIA achieves multiple goals simultaneously: enabling community contributions to OS integration, facilitating rapid kernel version support, allowing security audits of critical code paths, while still protecting core intellectual property. The 103,318-line UVM subsystem—fully open and competitive in sophistication with any GPU memory manager—demonstrates that openness and commercial success aren't mutually exclusive."}]
223:["$","p",null,{"children":"This approach suggests a framework for other companies: identify which components benefit most from community involvement (OS integration, standardized protocols, debugging tools) versus which provide competitive differentiation (hardware-specific optimizations, scheduling algorithms, power management). Open the former fully; protect the latter strategically. The result can be win-win: better integration with the broader ecosystem while maintaining technological advantages."}]
224:["$","h3",null,{"className":"content-header","id":"performance-through-design-not-just-optimization","children":[["$","a",null,{"className":"break-words","href":"#performance-through-design-not-just-optimization","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Performance Through Design, Not Just Optimization"]}]
225:["$","p",null,{"children":"The driver's performance characteristics don't come primarily from micro-optimizations—though those certainly exist—but from architectural decisions that make fast paths inherent to the design. User-space doorbell writes for command submission. Hardware page table walks for address translation. Lock-free message queues for CPU-GPU communication. Batched operations amortizing fixed costs. Each of these represents a design decision that makes performance the default rather than something achieved through later tuning."}]
226:["$","p",null,{"children":"This principle extends to the GSP-RM offload architecture: moving Resource Manager execution onto the GPU isn't just about performance, though the reduced latency for GPU-internal operations is significant. It's about enabling capabilities (autonomous power management, GPU self-attestation, reduced kernel attack surface) that become possible once the architectural foundation exists. The lesson: architectural decisions matter more than implementation details for achieving transformative performance improvements."}]
227:["$","h3",null,{"className":"content-header","id":"managing-evolution-at-scale","children":[["$","a",null,{"className":"break-words","href":"#managing-evolution-at-scale","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Managing Evolution at Scale"]}]
228:["$","p",null,{"children":"Finally, the driver exemplifies how large codebases can evolve across years while maintaining stability. The conftest.sh configuration testing system—seemingly mundane infrastructure—enables something remarkable: support for six years of Linux kernel evolution without fracturing the codebase into per-kernel-version forks. The NVOC code generator brings object-oriented design to C without requiring wholesale language changes. The dual-tier build system (Makefile for proprietary, Kbuild for open) allows independent evolution of components with different development processes."}]
229:["$","p",null,{"children":"These aren't glamorous technologies, but they're essential infrastructure for long-term maintainability. Every large codebase faces similar challenges: how to evolve while maintaining backward compatibility, how to incorporate new features without destabilizing existing functionality, how to support diverse deployment environments with a single implementation. The NVIDIA driver's solutions—comprehensive feature detection, code generation for abstraction, clear module boundaries—provide a playbook for others facing similar challenges."}]
22a:["$","h3",null,{"className":"content-header","id":"final-thoughts","children":[["$","a",null,{"className":"break-words","href":"#final-thoughts","aria-hidden":"true","tabIndex":"-1","children":["$","span",null,{"className":"content-header-link","children":["$","svg",null,{"className":"h-5 linkicon w-5","fill":"currentColor","viewBox":"0 0 20 20","xmlns":"http://www.w3.org/2000/svg","children":[["$","path",null,{"d":"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z"}],["$","path",null,{"d":"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z"}]]}]}]}],"Final Thoughts"]}]
22b:["$","p",null,{"children":"This analysis began by noting that NVIDIA's open-sourcing represented a landmark moment for GPU computing on Linux. Having explored the codebase in detail, that assessment only strengthens. This isn't just more open-source code; it's a window into how some of the world's most complex hardware gets managed, how production systems development works at scale, and how engineering teams maintain quality across millions of lines of code and multiple hardware generations."}]
22c:["$","p",null,{"children":"The driver isn't perfect—we've documented the complexity challenges, binary dependencies, and documentation gaps. But perfection isn't the goal in production systems; effectiveness is. And by that measure, the NVIDIA driver stands as a remarkable achievement: enabling cutting-edge GPU capabilities while maintaining stability, performance, and compatibility across a decade of hardware evolution and six years of kernel changes."}]
22d:["$","p",null,{"children":"For those who've read this far, you now possess a deep understanding of one of the most sophisticated device drivers in existence. Whether you use this knowledge to contribute code, optimize GPU workloads, debug system issues, or inform your own architectural decisions, you're equipped with insights hard-won from analyzing nearly a million lines of production code. The engine room of modern GPUs is no longer a black box—it's an open book, revealing the engineering principles that make high-performance computing possible."}]
22e:["$","p",null,{"children":"Welcome to the community of those who understand not just what GPUs do, but how they work at the deepest level. The code awaits your contributions."}]
22f:["$","hr",null,{}]
230:["$","p",null,{"children":["$","strong",null,{"children":"Document Information:"}]}]
231:["$","ul",null,{"children":[["$","li",null,{"children":[["$","strong",null,{"children":"Version:"}]," 1.0"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Date:"}]," 2025-10-13"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Author:"}]," Automated analysis of open-gpu-kernel-modules"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Codebase Version:"}]," 580.95.05"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Total Files Analyzed:"}]," 3,000+"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Total Lines Analyzed:"}]," 935,000+"]}],["$","li",null,{"children":[["$","strong",null,{"children":"Analysis Depth:"}]," Four-layer component analysis with cross-referencing"]}]]}]
232:["$","hr",null,{}]
233:["$","p",null,{"children":["$","em",null,{"children":"For detailed component-specific information, please refer to the individual analysis files in this directory."}]}]
234:["$","div",null,{"className":"pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300 glass p-4 rounded-xl","children":[["$","a",null,{"className":"hover:text-primary-600 dark:hover:text-primary-400 transition-colors","target":"_blank","rel":"nofollow","href":"https://mobile.twitter.com/search?q=https%3A%2F%2Fwww.yunwei37.com%2Fblog%2Fnvidia-open-driver-analysis","children":"Discuss on Twitter"}]," • ",["$","a",null,{"className":"hover:text-primary-600 dark:hover:text-primary-400 transition-colors","target":"_blank","rel":"noopener noreferrer","href":"https://github.com/yunwei37/yunwei37-blog/blob/main/data/blog/nvidia-open-driver-analysis.mdx","children":"View on GitHub"}]]}]
235:["$","div",null,{"className":"pt-6 pb-6 text-center text-gray-700 dark:text-gray-300 glass p-6 rounded-xl","id":"comment","children":["$","$L3f6",null,{"slug":"nvidia-open-driver-analysis"}]}]
236:["$","footer",null,{"children":[["$","div",null,{"className":"divide-gray-200/30 text-sm leading-5 font-medium xl:col-start-1 xl:row-start-2 xl:divide-y dark:divide-gray-700/30","children":[["$","div",null,{"className":"py-4 xl:py-8","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-600 uppercase dark:text-gray-300 mb-4","children":"Tags"}],["$","div",null,{"className":"flex flex-wrap gap-2","children":[["$","$L6","ebpf",{"href":"/tags/ebpf","className":"inline-block px-3 py-1 text-xs font-medium uppercase tracking-wide bg-primary-100 hover:bg-primary-200 dark:bg-primary-900/30 dark:hover:bg-primary-800/40 rounded-full transition-all duration-200 text-primary-800 hover:text-primary-900 dark:text-primary-300 dark:hover:text-primary-200 border border-primary-200/50 dark:border-primary-700/50","children":"ebpf"}],["$","$L6","systems",{"href":"/tags/systems","className":"inline-block px-3 py-1 text-xs font-medium uppercase tracking-wide bg-primary-100 hover:bg-primary-200 dark:bg-primary-900/30 dark:hover:bg-primary-800/40 rounded-full transition-all duration-200 text-primary-800 hover:text-primary-900 dark:text-primary-300 dark:hover:text-primary-200 border border-primary-200/50 dark:border-primary-700/50","children":"systems"}]]}]]}],["$","div",null,{"className":"flex justify-between py-4 xl:block xl:space-y-6 xl:py-8","children":[["$","div",null,{"className":"glass p-4 rounded-xl","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-600 uppercase dark:text-gray-300 mb-2","children":"Previous Article"}],["$","div",null,{"className":"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors","children":["$","$L6",null,{"className":"break-words","href":"/blog/iaprof-analysis","children":"Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling"}]}]]}],["$","div",null,{"className":"glass p-4 rounded-xl","children":[["$","h2",null,{"className":"text-xs tracking-wide text-gray-600 uppercase dark:text-gray-300 mb-2","children":"Next Article"}],["$","div",null,{"className":"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors","children":["$","$L6",null,{"className":"break-words","href":"/blog/gpu-observability-challenges","children":"The GPU Observability Gap: Why We Need eBPF on GPU devices"}]}]]}]]}]]}],["$","div",null,{"className":"pt-4 xl:pt-8","children":["$","$L6",null,{"className":"inline-flex items-center glass px-4 py-2 rounded-xl text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-all duration-200 hover:scale-105","href":"/blog","aria-label":"Back to the blog","children":"← Back to the blog"}]}]]}]
238:["$","span",null,{"className":"token punctuation","children":"("}]
239:["$","span",null,{"className":"token maybe-class-name","children":"Mode"}]
23a:["$","span",null,{"className":"token maybe-class-name","children":"Setting"}]
23b:["$","span",null,{"className":"token punctuation","children":")"}]
23c:["$","span",null,{"className":"token function","children":"│"}]
23d:["$","span",null,{"className":"token punctuation","children":"("}]
23e:["$","span",null,{"className":"token constant","children":"RDMA"}]
23f:["$","span",null,{"className":"token maybe-class-name","children":"Support"}]
240:["$","span",null,{"className":"token punctuation","children":")"}]
241:["$","span",null,{"className":"code-line","children":["│  │   ",["$","span",null,{"className":"token number","children":"19"}]," files       │  │   85K",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],"       │  │   ",["$","span",null,{"className":"token number","children":"1"}]," file           │     │\n"]}]
242:["$","span",null,{"className":"code-line","children":"│  └──────────────────┘  └──────────────────┘  └────────────────────┘     │\n"}]
243:["$","span",null,{"className":"code-line","children":"│           │                     │                      │                │\n"}]
244:["$","span",null,{"className":"code-line","children":"│           └─────────────────────┴──────────────────────┘                │\n"}]
245:["$","span",null,{"className":"code-line","children":"│                                 │                                       │\n"}]
246:["$","span",null,{"className":"code-line","children":"│  ┌─────────────────────────────┴───────────────────────────────────┐    │\n"}]
247:["$","span",null,{"className":"code-line","children":["│  │                        nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"                                │    │\n"]}]
248:["$","span",null,{"className":"code-line","children":["│  │                   ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Driver"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"38"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"762"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"                  │    │\n"]}]
249:["$","span",null,{"className":"code-line","children":"│  │  ┌────────────────────────────────────────────────────────┐     │    │\n"}]
24a:["$","span",null,{"className":"code-line","children":["│  │  │  ",["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Interface"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Layer"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Open"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Source"}],["$","span",null,{"className":"token punctuation","children":")"}],"                  │     │    │\n"]}]
24b:["$","span",null,{"className":"code-line","children":["│  │  │  • ",["$","span",null,{"className":"token constant","children":"PCI"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Management"}],"  • ",["$","span",null,{"className":"token constant","children":"DMA"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"IOMMU"}],"                    │     │    │\n"]}]
24c:["$","span",null,{"className":"code-line","children":["│  │  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Operations"}],"    • ",["$","span",null,{"className":"token maybe-class-name","children":"Power"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Management"}],"             │     │    │\n"]}]
24d:["$","span",null,{"className":"code-line","children":["│  │  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Interrupt"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Handling"}],"   • ",["$","span",null,{"className":"token constant","children":"ACPI"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Integration"}],"             │     │    │\n"]}]
24e:["$","span",null,{"className":"code-line","children":"│  │  └────────────────────────────────────────────────────────┘     │   │\n"}]
24f:["$","span",null,{"className":"code-line","children":"│  │                           ↕                                     │   │\n"}]
250:["$","span",null,{"className":"code-line","children":"│  │  ┌────────────────────────────────────────────────────────┐     │   │\n"}]
251:["$","span",null,{"className":"code-line","children":["│  │  │  nv",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"o_binary"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"OS"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Agnostic"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}],["$","span",null,{"className":"token punctuation","children":")"}],"                 │     │   │\n"]}]
252:["$","span",null,{"className":"code-line","children":["│  │  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Manager"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"RM"}],["$","span",null,{"className":"token punctuation","children":")"}],"  • ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Initialization"}],"         │     │   │\n"]}]
253:["$","span",null,{"className":"code-line","children":["│  │  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Abstraction"}],"   • ",["$","span",null,{"className":"token maybe-class-name","children":"Scheduling"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Algorithms"}],"      │     │   │\n"]}]
254:["$","span",null,{"className":"code-line","children":["│  │  │  ",["$","span",null,{"className":"token maybe-class-name","children":"Pre"}],["$","span",null,{"className":"token operator","children":"-"}],"compiled ",["$","span",null,{"className":"token keyword module","children":"from"}]," src",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," faster installation        │     │   │\n"]}]
255:["$","span",null,{"className":"code-line","children":"│  │  └────────────────────────────────────────────────────────┘     │   │\n"}]
256:["$","span",null,{"className":"code-line","children":"│  └─────────────────────────────────────────────────────────────────┘   │\n"}]
257:["$","span",null,{"className":"code-line","children":"│                                                                         │\n"}]
258:["$","span",null,{"className":"code-line","children":"│  ┌──────────────────────────────────────────────────────────────────┐   │\n"}]
259:["$","span",null,{"className":"code-line","children":["│  │                    nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"                                 │   │\n"]}]
25a:["$","span",null,{"className":"code-line","children":["│  │              ",["$","span",null,{"className":"token maybe-class-name","children":"Unified"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Virtual"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"103"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"318"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"                │   │\n"]}]
25b:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Virtual"}]," address space management  • ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," fault handling       │   │\n"]}]
25c:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"CPU"}]," ↔ ",["$","span",null,{"className":"token constant","children":"GPU"}]," migration              • ",["$","span",null,{"className":"token maybe-class-name","children":"Multi"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"GPU"}]," coherence        │   │\n"]}]
25d:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"HMM"}]," integration                  • ",["$","span",null,{"className":"token constant","children":"ATS"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"SVA"}]," support            │   │\n"]}]
25e:["$","span",null,{"className":"code-line","children":"│  └──────────────────────────────────────────────────────────────────┘   │\n"}]
25f:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────────────────┘\n"}]
260:["$","span",null,{"className":"code-line","children":"                                    │\n"}]
261:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────────────────┐\n"}]
262:["$","span",null,{"className":"code-line","children":["│                      ",["$","span",null,{"className":"token maybe-class-name","children":"Common"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Library"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}],"                               │\n"]}]
263:["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────────────────┤\n"}]
264:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"DisplayPort"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Stack"}],"  │  ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Library"}],"  │  ",["$","span",null,{"className":"token maybe-class-name","children":"NVSwitch"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Mgmt"}],"  │  ",["$","span",null,{"className":"token constant","children":"SDK"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Headers"}]," │\n"]}]
265:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Protocol"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"C"}],["$","span",null,{"className":"token operator","children":"++"}],["$","span",null,{"className":"token punctuation","children":")"}],"     │  ",["$","span",null,{"className":"token maybe-class-name","children":"Interconnect"}],"    │  ",["$","span",null,{"className":"token maybe-class-name","children":"Fabric"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Switch"}],"  │  ",["$","span",null,{"className":"token constant","children":"API"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Defs"}],"    │\n"]}]
266:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token number","children":"41"}]," files          │  ",["$","span",null,{"className":"token number","children":"30"}],["$","span",null,{"className":"token operator","children":"+"}]," files       │  ",["$","span",null,{"className":"token number","children":"100"}],["$","span",null,{"className":"token operator","children":"+"}]," files     │  ",["$","span",null,{"className":"token number","children":"700"}],["$","span",null,{"className":"token operator","children":"+"}]," files  │\n"]}]
267:["$","span",null,{"className":"code-line","children":"│                    │                  │                 │              │\n"}]
268:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Modeset"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Utils"}],"     │  ",["$","span",null,{"className":"token maybe-class-name","children":"Softfloat"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Lib"}],"   │  ",["$","span",null,{"className":"token maybe-class-name","children":"Message"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Queue"}],"  │  ",["$","span",null,{"className":"token maybe-class-name","children":"Uproc"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Libs"}],"  │\n"]}]
269:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token constant","children":"HDMI"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Timing"}],"       │  ",["$","span",null,{"className":"token constant","children":"IEEE"}]," ",["$","span",null,{"className":"token number","children":"754"}]," ",["$","span",null,{"className":"token class-name known-class-name","children":"Math"}],"   │  ",["$","span",null,{"className":"token constant","children":"IPC"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Lock"}],["$","span",null,{"className":"token operator","children":"-"}],"free",["$","span",null,{"className":"token punctuation","children":")"}],"│  ",["$","span",null,{"className":"token constant","children":"ELF"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"DWARF"}],"   │\n"]}]
26a:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token number","children":"30"}],["$","span",null,{"className":"token operator","children":"+"}]," files         │  ",["$","span",null,{"className":"token number","children":"80"}],["$","span",null,{"className":"token operator","children":"+"}]," files       │  ",["$","span",null,{"className":"token number","children":"2"}]," files        │  ",["$","span",null,{"className":"token number","children":"20"}],["$","span",null,{"className":"token operator","children":"+"}]," files   │\n"]}]
26b:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────────────────┘\n"}]
26c:["$","span",null,{"className":"code-line","children":"                                    │\n"}]
26d:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────────────────┐\n"}]
26e:["$","span",null,{"className":"code-line","children":["│                    ",["$","span",null,{"className":"token maybe-class-name","children":"Linux"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Subsystems"}],"                              │\n"]}]
26f:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token constant","children":"PCI"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}]," │ ",["$","span",null,{"className":"token constant","children":"DRM"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"KMS"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Mgmt"}]," │ ",["$","span",null,{"className":"token constant","children":"IOMMU"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"Power"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Mgmt"}]," │ ",["$","span",null,{"className":"token constant","children":"ACPI"}]," │ ",["$","span",null,{"className":"token constant","children":"DT"}],"     │\n"]}]
270:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────────────────┘\n"}]
271:["$","span",null,{"className":"code-line","children":"                                    │\n"}]
272:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────────────────┐\n"}]
273:["$","span",null,{"className":"code-line","children":["│                    ",["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}],"                                        │\n"]}]
274:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Maxwell"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Blackwell"}],["$","span",null,{"className":"token punctuation","children":")"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"NVSwitch"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}]," │ ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Outputs"}],"   │\n"]}]
275:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────────────────┘\n"}]
276:["$","span",null,{"className":"token number","children":"3."}]
277:["$","span",null,{"className":"token operator","children":"-"}]
278:["$","span",null,{"className":"token punctuation","children":"."}]
279:["$","span",null,{"className":"token property-access","children":"ko"}]
27a:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token keyword","children":"with"}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"\n"]}]
27b:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm device\n"]}]
27c:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"VA"}]," space infrastructure\n"]}]
27d:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," fault handling\n"]}]
27e:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," callbacks\n"]}]
27f:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
280:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"4."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," loads\n"]}]
281:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token constant","children":"DRM"}]," driver ",["$","span",null,{"className":"token keyword","children":"with"}]," kernel\n"]}]
282:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Connect"}]," to nvidia",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token function","children":"modeset"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"NVKMS"}]," ",["$","span",null,{"className":"token constant","children":"API"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
283:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token constant","children":"DRM"}]," ",["$","span",null,{"className":"token function","children":"devices"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"dri",["$","span",null,{"className":"token operator","children":"/"}],"card",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
284:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"KMS"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"mode setting",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
285:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," atomic display support\n"]}]
286:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
287:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token number","children":"5."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"peermem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," ",["$","span",null,{"className":"token function","children":"loads"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"optional",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token constant","children":"IB"}]," present",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
288:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," peer_memory_client\n"]}]
289:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Enable"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Direct"}]," ",["$","span",null,{"className":"token constant","children":"RDMA"}],"\n"]}]
28a:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
28b:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token maybe-class-name","children":"System"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Ready"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Operational"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}]
28c:["$","span",null,{"className":"token operator","children":"&"}]
28d:["$","span",null,{"className":"token maybe-class-name","children":"Migration"}]
28e:["$","span",null,{"className":"code-line","children":["│  • uvm_migrate",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"           ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," migration ",["$","span",null,{"className":"token constant","children":"CPU"}],"↔",["$","span",null,{"className":"token constant","children":"GPU"}],"         │\n"]}]
28f:["$","span",null,{"className":"code-line","children":["│  • uvm_migrate_pageable",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"System"}]," memory handling         │\n"]}]
290:["$","span",null,{"className":"code-line","children":["│  • uvm_mem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"               ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," allocation              │\n"]}]
291:["$","span",null,{"className":"code-line","children":["│  • uvm_mmu",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"               ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," table operations          │\n"]}]
292:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
293:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
294:["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}]
295:["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Fault"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Handling"}],"                         │\n"]}]
296:["$","span",null,{"className":"code-line","children":["│  • uvm_gpu_replayable_faults",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Replayable"}]," faults         │\n"]}]
297:["$","span",null,{"className":"code-line","children":["│  • uvm_gpu_non_replayable_faults",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Fatal"}]," errors           │\n"]}]
298:["$","span",null,{"className":"code-line","children":["│  • uvm_ats_faults",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"c"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"33"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"966"}]," lines",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"ATS"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"IOMMU"}]," integration  │\n"]}]
299:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
29a:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
29b:["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}]
29c:["$","span",null,{"className":"code-line","children":["│            ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Architecture"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Abstraction"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"HAL"}],["$","span",null,{"className":"token punctuation","children":")"}],"                │\n"]}]
29d:["$","span",null,{"className":"code-line","children":["│  • uvm_maxwell_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  • uvm_pascal_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"   • uvm_volta_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"      │\n"]}]
29e:["$","span",null,{"className":"code-line","children":["│  • uvm_turing_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"   • uvm_ampere_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"   • uvm_ada_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"        │\n"]}]
29f:["$","span",null,{"className":"code-line","children":["│  • uvm_hopper_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"   • uvm_blackwell_",["$","span",null,{"className":"token operator","children":"*"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"                     │\n"]}]
2a0:["$","span",null,{"className":"code-line","children":"│                                                              │\n"}]
2a1:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Each"}]," ",["$","span",null,{"className":"token keyword","children":"implements"}],["$","span",null,{"className":"token operator","children":":"}]," _mmu",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":","}]," _host",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":","}]," _fault_buffer",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":","}]," _ce",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"  │\n"]}]
2a2:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
2a3:["$","span",null,{"className":"token maybe-class-name","children":"Topology"}]
2a4:["$","span",null,{"className":"token maybe-class-name","children":"Discovery│"}]
2a5:["$","span",null,{"className":"token constant","children":"MST"}]
2a6:["$","span",null,{"className":"token maybe-class-name","children":"Messaging│"}]
2a7:["$","span",null,{"className":"code-line","children":["│  │ • ",["$","span",null,{"className":"token maybe-class-name","children":"MainLink"}],"       │ • ",["$","span",null,{"className":"token maybe-class-name","children":"Address"}],"         │ • ",["$","span",null,{"className":"token constant","children":"ALLOCATE_"}],"  │    │\n"]}]
2a8:["$","span",null,{"className":"code-line","children":["│  │ • ",["$","span",null,{"className":"token maybe-class-name","children":"LinkConfig"}],"     │ • ",["$","span",null,{"className":"token maybe-class-name","children":"Discovery"}],"       │   ",["$","span",null,{"className":"token constant","children":"PAYLOAD"}],"    │    │\n"]}]
2a9:["$","span",null,{"className":"code-line","children":["│  │ • ",["$","span",null,{"className":"token maybe-class-name","children":"AuxBus"}],"         │ • ",["$","span",null,{"className":"token maybe-class-name","children":"Messages"}],"        │ • ",["$","span",null,{"className":"token constant","children":"LINK_"}],"      │    │\n"]}]
2aa:["$","span",null,{"className":"code-line","children":["│  │ • ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Training"}],"  │ • ",["$","span",null,{"className":"token maybe-class-name","children":"Device"}]," tracking │   ",["$","span",null,{"className":"token constant","children":"ADDRESS"}],"    │    │\n"]}]
2ab:["$","span",null,{"className":"code-line","children":"│  └──────────────────┴──────────────────┴──────────────┘    │\n"}]
2ac:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
2ad:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
2ae:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
2af:["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Interface"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"EvoInterface"}],["$","span",null,{"className":"token punctuation","children":")"}],"              │\n"]}]
2b0:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"│"}],"         ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Calls"}]," into ",["$","span",null,{"className":"token constant","children":"RM"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," actual hardware programming",["$","span",null,{"className":"token punctuation","children":")"}],"     │\n"]}]
2b1:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
2b4:["$","span",null,{"className":"token operator","children":"-"}]
2b5:["$","span",null,{"className":"token constant","children":"GH100"}]
2b6:["$","span",null,{"className":"token punctuation","children":"("}]
2b7:["$","span",null,{"className":"token number","children":"2022"}]
2b8:["$","span",null,{"className":"token punctuation","children":")"}]
2b9:["$","span",null,{"className":"code-line","children":["│   └── gh100",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}]
2ba:["$","span",null,{"className":"code-line","children":["└── blackwell",["$","span",null,{"className":"token operator","children":"/"}],"      ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GB100"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"2024"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
2bb:["$","span",null,{"className":"token punctuation","children":")"}]
2bc:["$","span",null,{"className":"token punctuation","children":";"}]
2bd:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token operator","children":"*"}],"msg ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"msgqRxGetReadBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"0"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
2be:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"processMessage"}],["$","span",null,{"className":"token punctuation","children":"("}],"msg",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
2bf:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"msgqRxMarkConsumed"}],["$","span",null,{"className":"token punctuation","children":"("}],"handle",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
2c0:["$","span",null,{"className":"token operator","children":"-"}]
2c1:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Engine"}]," table construction and management                │\n"]}]
2c2:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"State"}]," machine",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token constant","children":"CONSTRUCT"}]," → ",["$","span",null,{"className":"token constant","children":"INIT"}]," → ",["$","span",null,{"className":"token constant","children":"LOAD"}]," → ",["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token maybe-class-name","children":"Running"}],["$","span",null,{"className":"token punctuation","children":"]"}],"     │\n"]}]
2c3:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
2c4:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
2c5:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
2c6:["$","span",null,{"className":"code-line","children":["│              ",["$","span",null,{"className":"token maybe-class-name","children":"Major"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Subsystems"}],"                           │\n"]}]
2c7:["$","span",null,{"className":"code-line","children":"│  ┌────────────┬────────────┬──────────────┬──────────────┐ │\n"}]
2c8:["$","span",null,{"className":"code-line","children":["│  │MemoryMgr  │MemorySystem│ ",["$","span",null,{"className":"token constant","children":"GMMU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"MMU"}],["$","span",null,{"className":"token punctuation","children":")"}],"   │ ",["$","span",null,{"className":"token constant","children":"FIFO"}],"        │ │\n"]}]
2c9:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token function","children":"│"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Heap"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"PMA"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token function","children":"│"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"FBIO"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"L2"}],["$","span",null,{"className":"token punctuation","children":")"}],"   ",["$","span",null,{"className":"token function","children":"│"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Tables"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token function","children":"│"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Channels"}],["$","span",null,{"className":"token punctuation","children":")"}],"   │ │\n"]}]
2ca:["$","span",null,{"className":"code-line","children":"│  └────────────┴────────────┴──────────────┴──────────────┘ │\n"}]
2cb:["$","span",null,{"className":"code-line","children":"│  ┌────────────┬────────────┬──────────────┬──────────────┐ │\n"}]
2cc:["$","span",null,{"className":"code-line","children":["│  │ ",["$","span",null,{"className":"token constant","children":"CE"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Copy"}],["$","span",null,{"className":"token punctuation","children":")"}]," │ ",["$","span",null,{"className":"token constant","children":"GR"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Compute│"}]," ",["$","span",null,{"className":"token constant","children":"BIF"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}],["$","span",null,{"className":"token punctuation","children":")"}],"   │ ",["$","span",null,{"className":"token maybe-class-name","children":"Intr"}],"        │ │\n"]}]
2cd:["$","span",null,{"className":"code-line","children":["│  │ ",["$","span",null,{"className":"token maybe-class-name","children":"Engine"}],"    │ ",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token maybe-class-name","children":"Graphics"}],["$","span",null,{"className":"token punctuation","children":")"}]," │              ",["$","span",null,{"className":"token function","children":"│"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Interrupts"}],["$","span",null,{"className":"token punctuation","children":")"}]," │ │\n"]}]
2ce:["$","span",null,{"className":"code-line","children":"│  └────────────┴────────────┴──────────────┴──────────────┘ │\n"}]
2cf:["$","span",null,{"className":"code-line","children":"│  ┌────────────┬────────────┬──────────────┬──────────────┐ │\n"}]
2d0:["$","span",null,{"className":"code-line","children":["│  │ ",["$","span",null,{"className":"token constant","children":"DISP"}],"      │ ",["$","span",null,{"className":"token constant","children":"NVDEC"}],["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token constant","children":"ENC"}],"  │ ",["$","span",null,{"className":"token maybe-class-name","children":"NvLink"}],"       │ ",["$","span",null,{"className":"token constant","children":"GSP"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"RISC"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"V"}],["$","span",null,{"className":"token punctuation","children":")"}],"│ │\n"]}]
2d1:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Display"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Video"}],["$","span",null,{"className":"token punctuation","children":")"}],"    ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Interconnect│"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"System"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Proc"}]," │ │\n"]}]
2d2:["$","span",null,{"className":"code-line","children":"│  └────────────┴────────────┴──────────────┴──────────────┘ │\n"}]
2d3:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
2d4:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
2d5:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
2d6:["$","span",null,{"className":"code-line","children":["│          ",["$","span",null,{"className":"token constant","children":"HAL"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Abstraction"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}],["$","span",null,{"className":"token punctuation","children":")"}],"                   │\n"]}]
2d7:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Generation"}],["$","span",null,{"className":"token operator","children":"-"}],"specific implementations ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token number","children":"9"}],["$","span",null,{"className":"token operator","children":"+"}]," architectures   │\n"]}]
2d8:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Maxwell"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Pascal"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Volta"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Turing"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Ampere"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Ada"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Hopper"}],["$","span",null,{"className":"token punctuation","children":","}]," etc",["$","span",null,{"className":"token punctuation","children":"."}]," ",["$","span",null,{"className":"token property-access","children":"│"}],"\n"]}]
2d9:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
2da:["$","span",null,{"className":"token punctuation","children":"("}]
2db:["$","span",null,{"className":"token maybe-class-name","children":"Hopper"}]
2dc:["$","span",null,{"className":"token operator","children":"+"}]
2dd:["$","span",null,{"className":"token punctuation","children":")"}]
2de:["$","span",null,{"className":"code-line","children":"│                                                              │\n"}]
2df:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Arch"}],["$","span",null,{"className":"token operator","children":"-"}],"specific",["$","span",null,{"className":"token operator","children":":"}]," gm107",["$","span",null,{"className":"token punctuation","children":","}]," gp100",["$","span",null,{"className":"token punctuation","children":","}]," gv100",["$","span",null,{"className":"token punctuation","children":","}]," ga100",["$","span",null,{"className":"token punctuation","children":","}]," gh100",["$","span",null,{"className":"token punctuation","children":","}]," gb100   │\n"]}]
2e0:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
2e1:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
2e2:["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}]
2e3:["$","span",null,{"className":"code-line","children":["│                  ",["$","span",null,{"className":"token constant","children":"GMMU"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Graphics"}]," ",["$","span",null,{"className":"token constant","children":"MMU"}],["$","span",null,{"className":"token punctuation","children":")"}],"                         │\n"]}]
2e4:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," table ",["$","span",null,{"className":"token function","children":"management"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"4"}],["$","span",null,{"className":"token operator","children":"-"}],"level",["$","span",null,{"className":"token punctuation","children":")"}],"                          │\n"]}]
2e5:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token constant","children":"TLB"}]," management                                           │\n"]}]
2e6:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Page"}]," sizes",["$","span",null,{"className":"token operator","children":":"}]," 4K",["$","span",null,{"className":"token punctuation","children":","}]," 64K",["$","span",null,{"className":"token punctuation","children":","}]," 2M",["$","span",null,{"className":"token punctuation","children":","}]," 512M                           │\n"]}]
2e7:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Sparse"}]," memory support                                    │\n"]}]
2e8:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token constant","children":"ATS"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Address"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Translation"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Services"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}],"             │\n"]}]
2e9:["$","span",null,{"className":"code-line","children":"│                                                              │\n"}]
2ea:["$","span",null,{"className":"code-line","children":["│  ",["$","span",null,{"className":"token maybe-class-name","children":"Arch"}],["$","span",null,{"className":"token operator","children":"-"}],"specific implementations ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," all generations          │\n"]}]
2eb:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
2ec:["$","span",null,{"className":"code-line","children":"                         ↓\n"}]
2ed:["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}]
2ee:["$","span",null,{"className":"code-line","children":["│            ",["$","span",null,{"className":"token constant","children":"PMA"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Physical"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Memory"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Allocator"}],["$","span",null,{"className":"token punctuation","children":")"}],"                   │\n"]}]
2ef:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Region"}],["$","span",null,{"className":"token operator","children":"-"}],"based allocation  • ",["$","span",null,{"className":"token constant","children":"NUMA"}]," support                  │\n"]}]
2f0:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Blacklist"}]," management     • ",["$","span",null,{"className":"token maybe-class-name","children":"Scrub"}],["$","span",null,{"className":"token operator","children":"-"}],"on",["$","span",null,{"className":"token operator","children":"-"}],"free                 │\n"]}]
2f1:["$","span",null,{"className":"code-line","children":["│  • ",["$","span",null,{"className":"token maybe-class-name","children":"Carveout"}]," regions         • ",["$","span",null,{"className":"token maybe-class-name","children":"Alignment"}]," enforcement         │\n"]}]
2f2:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
2f4:["$","span",null,{"className":"token punctuation","children":"."}]
2f5:["$","span",null,{"className":"token property-access","children":"c"}]
2f6:["$","span",null,{"className":"token operator","children":"-"}]
2f7:["$","span",null,{"className":"token number","children":"4"}]
2f8:["$","span",null,{"className":"token punctuation","children":","}]
2f9:["$","span",null,{"className":"token number","children":"412"}]
2fa:["$","span",null,{"className":"token punctuation","children":")"}]
2fb:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Validates"}]," display configurations                   │  │\n"]}]
2fc:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Manages"}]," head",["$","span",null,{"className":"token operator","children":"-"}],"to",["$","span",null,{"className":"token operator","children":"-"}],"connector assignments              │  │\n"]}]
2fd:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Implements"}]," locking protocols                       │  │\n"]}]
2fe:["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}]
2ff:["$","span",null,{"className":"code-line","children":"│                         ↓                                     │\n"}]
300:["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}]
301:["$","span",null,{"className":"code-line","children":["│  │    ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Pipeline"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token operator","children":"-"}],"flip",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":","}]," nvkms",["$","span",null,{"className":"token operator","children":"-"}],"surface",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":")"}],"  │  │\n"]}]
302:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Asynchronous"}]," page ",["$","span",null,{"className":"token function","children":"flipping"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"8"}]," layers per head",["$","span",null,{"className":"token punctuation","children":")"}],"    │  │\n"]}]
303:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Surface"}]," allocation and registration                │  │\n"]}]
304:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Multi"}],["$","span",null,{"className":"token operator","children":"-"}],"layer composition                            │  │\n"]}]
305:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"VRR"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Variable"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Refresh"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Rate"}],["$","span",null,{"className":"token punctuation","children":")"}],"                        │  │\n"]}]
306:["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}]
307:["$","span",null,{"className":"code-line","children":"│                         ↓                                     │\n"}]
308:["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}]
309:["$","span",null,{"className":"code-line","children":["│  │          ",["$","span",null,{"className":"token constant","children":"HAL"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Layer"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token operator","children":"-"}],"evo",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token number","children":"10"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"061"}]," lines",["$","span",null,{"className":"token punctuation","children":")"}],"       │  │\n"]}]
30a:["$","span",null,{"className":"code-line","children":"│  │  ┌──────────┬───────────┬───────────┬──────────────┐  │  │\n"}]
30b:["$","span",null,{"className":"code-line","children":["│  │  │ ",["$","span",null,{"className":"token constant","children":"EVO"}]," ",["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"x"}],"  │  ",["$","span",null,{"className":"token constant","children":"EVO"}]," ",["$","span",null,{"className":"token number","children":"2"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"x"}],"  │  ",["$","span",null,{"className":"token constant","children":"EVO"}]," ",["$","span",null,{"className":"token number","children":"3"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"x"}],"  │  nvdisplay ",["$","span",null,{"className":"token number","children":"4"}]," │  │  │\n"]}]
30c:["$","span",null,{"className":"code-line","children":["│  │  ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Tesla"}],["$","span",null,{"className":"token punctuation","children":")"}],"  ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Kepler"}],["$","span",null,{"className":"token operator","children":"/"}],"  ",["$","span",null,{"className":"token function","children":"│"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Pascal"}],["$","span",null,{"className":"token operator","children":"/"}],"  ",["$","span",null,{"className":"token function","children":"│"}],"  ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Turing"}],["$","span",null,{"className":"token operator","children":"/"}],"    │  │  │\n"]}]
30d:["$","span",null,{"className":"code-line","children":["│  │  │          │  ",["$","span",null,{"className":"token maybe-class-name","children":"Maxwell"}],["$","span",null,{"className":"token punctuation","children":")"}]," │  ",["$","span",null,{"className":"token maybe-class-name","children":"Volta"}],["$","span",null,{"className":"token punctuation","children":")"}],"   │   ",["$","span",null,{"className":"token maybe-class-name","children":"Ampere"}],["$","span",null,{"className":"token punctuation","children":")"}],"    │  │  │\n"]}]
30e:["$","span",null,{"className":"code-line","children":"│  │  └──────────┴───────────┴───────────┴──────────────┘  │  │\n"}]
30f:["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}]
310:["$","span",null,{"className":"code-line","children":"│                         ↓                                     │\n"}]
311:["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}]
312:["$","span",null,{"className":"code-line","children":["│  │      ",["$","span",null,{"className":"token maybe-class-name","children":"DisplayPort"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Library"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"src",["$","span",null,{"className":"token operator","children":"/"}],"dp",["$","span",null,{"className":"token operator","children":"/"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"C"}],["$","span",null,{"className":"token operator","children":"++"}],["$","span",null,{"className":"token punctuation","children":")"}],"              │  │\n"]}]
313:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"DP"}]," ",["$","span",null,{"className":"token number","children":"1.4"}],["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token keyword","children":"with"}]," ",["$","span",null,{"className":"token constant","children":"MST"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Multi"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token maybe-class-name","children":"Stream"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Transport"}],["$","span",null,{"className":"token punctuation","children":")"}],"          │  │\n"]}]
314:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," training and bandwidth allocation             │  │\n"]}]
315:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"DSC"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Stream"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Compression"}],["$","span",null,{"className":"token punctuation","children":")"}],"                   │  │\n"]}]
316:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Event"}],["$","span",null,{"className":"token operator","children":"-"}],"driven architecture                          │  │\n"]}]
317:["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}]
318:["$","span",null,{"className":"code-line","children":"│                         ↓                                     │\n"}]
319:["$","span",null,{"className":"code-line","children":"│  ┌────────────────────────────────────────────────────────┐  │\n"}]
31a:["$","span",null,{"className":"code-line","children":["│  │       ",["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Manager"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Integration"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"nvkms",["$","span",null,{"className":"token operator","children":"-"}],"rm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],["$","span",null,{"className":"token punctuation","children":")"}],"       │  │\n"]}]
31b:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token constant","children":"GPU"}]," resource allocation                            │  │\n"]}]
31c:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Power"}]," management coordination                      │  │\n"]}]
31d:["$","span",null,{"className":"code-line","children":["│  │  • ",["$","span",null,{"className":"token maybe-class-name","children":"Interrupt"}]," handling                                 │  │\n"]}]
31e:["$","span",null,{"className":"code-line","children":"│  └────────────────────────────────────────────────────────┘  │\n"}]
31f:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
320:["$","span",null,{"className":"code-line","children":["                         ↓ ",["$","span",null,{"className":"token constant","children":"RM"}]," ",["$","span",null,{"className":"token constant","children":"API"}],"\n"]}]
321:["$","span",null,{"className":"code-line","children":"┌──────────────────────────────────────────────────────────────┐\n"}]
322:["$","span",null,{"className":"code-line","children":["│            nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Resource"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Manager"}],["$","span",null,{"className":"token punctuation","children":")"}],"                      │\n"]}]
323:["$","span",null,{"className":"code-line","children":"└──────────────────────────────────────────────────────────────┘\n"}]
326:["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]
327:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
328:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"PostUpdate"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"wait ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," completion",["$","span",null,{"className":"token punctuation","children":","}]," restore settings",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
329:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
32a:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"PostModeset"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"enable raster",["$","span",null,{"className":"token operator","children":"/"}],"flip lock",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
32b:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
32c:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"NotifyRMCompletion"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
32d:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"↓"}],"\n"]}]
32e:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"VBLANK"}]," interrupt occurs",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
32f:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
330:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ProcessFlipCompletion"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
331:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"SignalSemaphores"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
332:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"TriggerCallbacks"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Notify"}]," client\n"]}]
333:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"IssueNextFlip"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Continue"}]," queue\n"]}]
334:["$","span",null,{"className":"token maybe-class-name","children":"ProgramMST_CTRL"}]
335:["$","span",null,{"className":"token punctuation","children":"("}]
336:["$","span",null,{"className":"token punctuation","children":")"}]
337:["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]
338:["$","span",null,{"className":"token punctuation","children":")"}]
339:["$","span",null,{"className":"token punctuation","children":"("}]
33a:["$","span",null,{"className":"token punctuation","children":")"}]
33b:["$","span",null,{"className":"token punctuation","children":";"}]
33c:["$","span",null,{"className":"code-line","children":["    NvKmsKapiMemory",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"importMemory",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
33d:["$","span",null,{"className":"code-line","children":["    NvKmsKapiSurface",["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"createSurface",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
33e:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}],["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"mapMemory",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
33f:["$","span",null,{"className":"code-line","children":"\n"}]
340:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Modesetting"}],"\n"]}]
341:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"applyModeSetConfig",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
342:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"getDisplayMode",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
343:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"NvBool"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"validateDisplayMode",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
344:["$","span",null,{"className":"code-line","children":"\n"}]
345:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Synchronization"}],"\n"]}]
346:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"struct"}]," ",["$","span",null,{"className":"token class-name","children":"NvKmsKapiSemaphoreSurface"}],["$","span",null,{"className":"token operator","children":"*"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"importSemaphoreSurface",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
347:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"void"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"*"}],"registerSemaphoreSurfaceCallback",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
348:["$","span",null,{"className":"code-line","children":"\n"}]
349:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// ... 30+ more functions"}],"\n"]}]
34a:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]
34b:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
34c:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
34d:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
34e:["$","span",null,{"className":"code-line","children":["│ ",["$","span",null,{"className":"token number","children":"2."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," initialization                         │\n"]}]
34f:["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────┤\n"}]
350:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token function","children":"nvKmsModuleLoad"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"                                         │\n"]}]
351:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token keyword","children":"with"}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"                                   │\n"]}]
352:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token operator","children":"-"}],"kernel",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"o_binary"}],"                       │\n"]}]
353:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"NVKMS"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"display subsystem",["$","span",null,{"className":"token punctuation","children":")"}],"                      │\n"]}]
354:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Export"}]," ",["$","span",null,{"className":"token constant","children":"KAPI"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," table                                │\n"]}]
355:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
356:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
357:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
358:["$","span",null,{"className":"code-line","children":["│ ",["$","span",null,{"className":"token number","children":"3."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," initialization                             │\n"]}]
359:["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────┤\n"}]
35a:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token keyword","children":"with"}]," nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],"                                   │\n"]}]
35b:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm                                    │\n"]}]
35c:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"VA"}]," space infrastructure                        │\n"]}]
35d:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," fault ",["$","span",null,{"className":"token function","children":"handling"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"replayable",["$","span",null,{"className":"token operator","children":"/"}],"non",["$","span",null,{"className":"token operator","children":"-"}],"replayable",["$","span",null,{"className":"token punctuation","children":")"}],"          │\n"]}]
35e:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," callbacks ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," device add",["$","span",null,{"className":"token operator","children":"/"}],"remove              │\n"]}]
35f:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
360:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
361:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
362:["$","span",null,{"className":"code-line","children":["│ ",["$","span",null,{"className":"token number","children":"4."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}]," initialization                             │\n"]}]
363:["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────┤\n"}]
364:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," ",["$","span",null,{"className":"token constant","children":"DRM"}]," driver ",["$","span",null,{"className":"token keyword","children":"with"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Linux"}]," kernel                     │\n"]}]
365:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Get"}]," ",["$","span",null,{"className":"token constant","children":"KAPI"}]," ",["$","span",null,{"className":"token keyword","children":"function"}]," table ",["$","span",null,{"className":"token keyword module","children":"from"}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset               │\n"]}]
366:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," ",["$","span",null,{"className":"token constant","children":"DRM"}]," ",["$","span",null,{"className":"token function","children":"devices"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token operator","children":"/"}],"dev",["$","span",null,{"className":"token operator","children":"/"}],"dri",["$","span",null,{"className":"token operator","children":"/"}],"card0",["$","span",null,{"className":"token punctuation","children":","}]," renderD128",["$","span",null,{"className":"token punctuation","children":")"}],"          │\n"]}]
367:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Initialize"}]," ",["$","span",null,{"className":"token constant","children":"KMS"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"kernel mode setting",["$","span",null,{"className":"token punctuation","children":")"}],"                      │\n"]}]
368:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," atomic display ",["$","span",null,{"className":"token function","children":"support"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Wayland"}],["$","span",null,{"className":"token punctuation","children":")"}],"                │\n"]}]
369:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
36a:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
36b:["$","span",null,{"className":"code-line","children":"┌─────────────────────────────────────────────────────────────┐\n"}]
36c:["$","span",null,{"className":"code-line","children":["│ ",["$","span",null,{"className":"token number","children":"5."}]," nvidia",["$","span",null,{"className":"token operator","children":"-"}],"peermem",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"optional",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword control-flow","children":"if"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"InfiniBand"}]," present",["$","span",null,{"className":"token punctuation","children":")"}],"     │\n"]}]
36d:["$","span",null,{"className":"code-line","children":"├─────────────────────────────────────────────────────────────┤\n"}]
36e:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," peer_memory_client ",["$","span",null,{"className":"token keyword","children":"with"}]," ib_core                  │\n"]}]
36f:["$","span",null,{"className":"code-line","children":["│ • ",["$","span",null,{"className":"token maybe-class-name","children":"Enable"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Direct"}]," ",["$","span",null,{"className":"token constant","children":"RDMA"}],"                                    │\n"]}]
370:["$","span",null,{"className":"code-line","children":"└─────────────────────────────────────────────────────────────┘\n"}]
371:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
372:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"["}],["$","span",null,{"className":"token maybe-class-name","children":"System"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Ready"}]," ",["$","span",null,{"className":"token operator","children":"-"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Operational"}],["$","span",null,{"className":"token punctuation","children":"]"}],"\n"]}]
373:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"2."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Allocate"}]," physical memory on faulting processor\n"]}]
374:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"3."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"If"}]," data exists elsewhere",["$","span",null,{"className":"token punctuation","children":","}]," use ",["$","span",null,{"className":"token maybe-class-name","children":"Copy"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Engine"}]," to migrate\n"]}]
375:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"4."}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Update"}]," page ",["$","span",null,{"className":"token function","children":"tables"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"CPU"}]," mm or ",["$","span",null,{"className":"token constant","children":"GPU"}]," page tree",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
376:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"5."}]," ",["$","span",null,{"className":"token constant","children":"TLB"}]," invalidation\n"]}]
377:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token number","children":"6."}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"For"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Replay"}]," faulting accesses\n"]}]
378:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
379:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Access"}]," completes\n"]}]
37a:["$","span",null,{"className":"token property-access","children":"c"}]
37b:["$","span",null,{"className":"token operator","children":":"}]
37c:["$","span",null,{"className":"token maybe-class-name","children":"Check"}]
37d:["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"└──"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"If"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"DisplayPort"}],["$","span",null,{"className":"token punctuation","children":")"}]," src",["$","span",null,{"className":"token operator","children":"/"}],"dp",["$","span",null,{"className":"token operator","children":"/"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," training",["$","span",null,{"className":"token punctuation","children":","}]," bandwidth check\n"]}]
37e:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
37f:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Apply"}]," configuration",["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
380:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ShutDownUnusedHeads"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
381:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ApplyProposedModeSetHwState"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Program"}]," ",["$","span",null,{"className":"token constant","children":"EVO"}]," channels\n"]}]
382:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"SendUpdateMethod"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]," commits at ",["$","span",null,{"className":"token constant","children":"VBLANK"}],"\n"]}]
383:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Wait"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," completion\n"]}]
384:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
385:["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset calls into nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function property-access method","children":"ko"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"RM"}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Program"}]," hardware",["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
386:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," timing generation\n"]}]
387:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Output"}]," ",["$","span",null,{"className":"token function","children":"routing"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"SOR"}]," allocation",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
388:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Color"}]," ",["$","span",null,{"className":"token function","children":"pipeline"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"LUT"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token constant","children":"CSC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
389:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Layer"}]," configuration\n"]}]
38a:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
38b:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," output activates\n"]}]
38c:["$","span",null,{"className":"code-line","children":["        ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"ProgramSyncObjects"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Semaphores"}],["$","span",null,{"className":"token operator","children":"/"}],"fences\n"]}]
38d:["$","span",null,{"className":"code-line","children":["        └── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Kick"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Advance"}]," ",["$","span",null,{"className":"token constant","children":"PUT"}]," pointer\n"]}]
38e:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
38f:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Hardware"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Engine"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
390:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Fetches"}]," methods ",["$","span",null,{"className":"token keyword module","children":"from"}]," push buffer\n"]}]
391:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Waits"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token constant","children":"VBLANK"}],"\n"]}]
392:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Atomically"}]," updates scanout buffer\n"]}]
393:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Triggers"}]," flip completion interrupt\n"]}]
394:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
395:["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset interrupt handler",["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
396:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"SignalSemaphores"}]}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
397:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Signal"}]," out",["$","span",null,{"className":"token operator","children":"-"}],"fence\n"]}]
398:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Trigger"}]," ",["$","span",null,{"className":"token constant","children":"KAPI"}]," callback → nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm\n"]}]
399:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
39a:["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"drm signals ",["$","span",null,{"className":"token constant","children":"DRM"}]," event to client\n"]}]
39d:["$","span",null,{"className":"token punctuation","children":"("}]
39e:["$","span",null,{"className":"token punctuation","children":"."}]
39f:["$","span",null,{"className":"token property-access","children":"ko"}]
3a0:["$","span",null,{"className":"token punctuation","children":")"}]
3a1:["$","span",null,{"className":"token operator","children":":"}]
3a2:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Update"}]," runlist\n"]}]
3a3:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Schedule"}]," channel via ",["$","span",null,{"className":"token constant","children":"PBDMA"}],"\n"]}]
3a4:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token constant","children":"PBDMA"}]," fetches methods ",["$","span",null,{"className":"token keyword module","children":"from"}]," push buffer\n"]}]
3a5:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3a6:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Graphics"}]," ",["$","span",null,{"className":"token function","children":["$","span",null,{"className":"token maybe-class-name","children":"Engine"}]}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token constant","children":"GR"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3a7:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Decode"}]," methods\n"]}]
3a8:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Distribute"}]," work to ",["$","span",null,{"className":"token maybe-class-name","children":"SMs"}],"\n"]}]
3a9:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Execute"}]," kernel\n"]}]
3aa:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3ab:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token property literal-property","children":"Completion"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3ac:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," semaphore release\n"]}]
3ad:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Non"}],["$","span",null,{"className":"token operator","children":"-"}],"stall interrupt\n"]}]
3ae:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token constant","children":"CUDA"}]," driver polls",["$","span",null,{"className":"token operator","children":"/"}],"waits ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," completion\n"]}]
3af:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3b0:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Kernel"}]," returns to application\n"]}]
3b1:["$","span",null,{"className":"token punctuation","children":"("}]
3b2:["$","span",null,{"className":"token punctuation","children":")"}]
3b3:["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Execute"}]," ",["$","span",null,{"className":"token constant","children":"INITPHASE1"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"5"}],"\n"]}]
3b4:["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token constant","children":"ALI"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"Adaptive"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Interface"}],["$","span",null,{"className":"token punctuation","children":")"}]," calibration\n"]}]
3b5:["$","span",null,{"className":"code-line","children":["    │   └── ",["$","span",null,{"className":"token maybe-class-name","children":"Transition"}]," to ",["$","span",null,{"className":"token constant","children":"HIGH"}]," ",["$","span",null,{"className":"token constant","children":"SPEED"}]," state\n"]}]
3b6:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Return"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Link"}]," active at ",["$","span",null,{"className":"token number","children":"50"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"150"}]," ",["$","span",null,{"className":"token constant","children":"GB"}],["$","span",null,{"className":"token operator","children":"/"}],"s per link\n"]}]
3b7:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3b8:["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3b9:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Create"}]," peer mappings\n"]}]
3ba:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token class-name known-class-name","children":"Map"}]," ",["$","span",null,{"className":"token constant","children":"GPU1"}],["$","span",null,{"className":"token string","children":"'s BAR into GPU0'"}],"s address ",["$","span",null,{"className":"token function","children":"space"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"and vice versa",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3bb:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," page tables ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," direct access\n"]}]
3bc:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3bd:["$","span",null,{"className":"code-line","children":["nvidia",["$","span",null,{"className":"token operator","children":"-"}],"uvm",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"ko"}],["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3be:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Register"}]," peer access ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," ",["$","span",null,{"className":"token constant","children":"UVM"}],"\n"]}]
3bf:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Enable"}]," direct ",["$","span",null,{"className":"token constant","children":"GPU"}],["$","span",null,{"className":"token operator","children":"-"}],"to",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token constant","children":"GPU"}]," migration\n"]}]
3c0:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3c1:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Application"}]," can now",["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3c2:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token constant","children":"GPU0"}]," directly reads",["$","span",null,{"className":"token operator","children":"/"}],"writes ",["$","span",null,{"className":"token constant","children":"GPU1"}]," memory via ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}],"\n"]}]
3c3:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token constant","children":"UVM"}]," automatically migrates pages via ",["$","span",null,{"className":"token maybe-class-name","children":"NVLink"}],"\n"]}]
3c4:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Achieve"}]," ",["$","span",null,{"className":"token number","children":"50"}],["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token number","children":"150"}]," ",["$","span",null,{"className":"token constant","children":"GB"}],["$","span",null,{"className":"token operator","children":"/"}],"s ",["$","span",null,{"className":"token function","children":"bandwidth"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"vs ",["$","span",null,{"className":"token number","children":"16"}]," ",["$","span",null,{"className":"token constant","children":"GB"}],["$","span",null,{"className":"token operator","children":"/"}],"s ",["$","span",null,{"className":"token maybe-class-name","children":"PCIe"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Gen4"}]," x16",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3c5:["$","span",null,{"className":"token operator","children":"-"}]
3c6:["$","span",null,{"className":"token constant","children":"RM"}]
3c7:["$","span",null,{"className":"token punctuation","children":"("}]
3c8:["$","span",null,{"className":"token constant","children":"GPU"}]
3c9:["$","span",null,{"className":"token punctuation","children":")"}]
3ca:["$","span",null,{"className":"token operator","children":":"}]
3cb:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Interrupt"}]," handler wakes ",["$","span",null,{"className":"token constant","children":"RPC"}]," processing thread\n"]}]
3cc:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"msgqRxGetReadAvailable"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Check"}]," ",["$","span",null,{"className":"token keyword control-flow","children":"for"}]," messages\n"]}]
3cd:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"msgqRxGetReadBuffer"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Read"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}]," message\n"]}]
3ce:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Process"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"Execute"}]," memory allocation\n"]}]
3cf:["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Allocate"}]," ",["$","span",null,{"className":"token keyword module","children":"from"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," heap\n"]}]
3d0:["$","span",null,{"className":"code-line","children":["    │   ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Setup"}]," page tables\n"]}]
3d1:["$","span",null,{"className":"code-line","children":["    │   └── ",["$","span",null,{"className":"token maybe-class-name","children":"Program"}]," memory controller\n"]}]
3d2:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," ",["$","span",null,{"className":"token constant","children":"RPC"}]," ",["$","span",null,{"className":"token function","children":"response"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"status",["$","span",null,{"className":"token punctuation","children":","}]," allocated address",["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3d3:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Write"}]," response to ",["$","span",null,{"className":"token keyword control-flow","children":"return"}]," message queue\n"]}]
3d4:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Trigger"}]," interrupt to ",["$","span",null,{"className":"token constant","children":"CPU"}],"\n"]}]
3d5:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3d6:["$","span",null,{"className":"code-line","children":["kernel_gsp",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}]," interrupt handler",["$","span",null,{"className":"token operator","children":":"}],"\n"]}]
3d7:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Read"}]," response ",["$","span",null,{"className":"token keyword module","children":"from"}]," msgq\n"]}]
3d8:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token function","children":"msgqRxMarkConsumed"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," → ",["$","span",null,{"className":"token maybe-class-name","children":"Acknowledge"}]," read\n"]}]
3d9:["$","span",null,{"className":"code-line","children":["    ├── ",["$","span",null,{"className":"token maybe-class-name","children":"Update"}]," driver state\n"]}]
3da:["$","span",null,{"className":"code-line","children":["    └── ",["$","span",null,{"className":"token maybe-class-name","children":"Return"}]," result to caller\n"]}]
3db:["$","span",null,{"className":"code-line","children":"    ↓\n"}]
3dc:["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token maybe-class-name","children":"Operation"}]," completes\n"]}]
3dd:["$","span",null,{"className":"token property-access","children":"c"}]
3de:["$","span",null,{"className":"code-line","children":["├── uvm_myarch_host",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}]
3df:["$","span",null,{"className":"code-line","children":["├── uvm_myarch_fault_buffer",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}]
3e0:["$","span",null,{"className":"code-line","children":["└── uvm_myarch_ce",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token property-access","children":"c"}],"\n"]}]
3e1:["$","li",null,{"children":[["$","p",null,{"children":["$","strong",null,{"children":"Update chip ID detection:"}]}],["$","$L237",null,{"className":"language-c","children":["$","code",null,{"className":"code-highlight language-c","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"// In gpu.c"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"if"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token function","children":"IS_MYARCH"}],["$","span",null,{"className":"token punctuation","children":"("}],"pGpu",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token comment","children":"// Architecture-specific initialization"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}]]}]
3eb:["$","span",null,{"className":"token property-access","children":"sh"}]
3ec:["$","span",null,{"className":"token maybe-class-name","children":"Configuration"}]
3ed:["$","span",null,{"className":"token function","children":"testing"}]
3ee:["$","span",null,{"className":"token punctuation","children":"("}]
3ef:["$","span",null,{"className":"token punctuation","children":")"}]
3f0:["$","span",null,{"className":"code-line","children":["│   └── ",["$","span",null,{"className":"token maybe-class-name","children":"Kbuild"}],"            # ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," system\n"]}]
3f1:["$","span",null,{"className":"code-line","children":["├── src",["$","span",null,{"className":"token operator","children":"/"}],"\n"]}]
3f2:["$","span",null,{"className":"code-line","children":["│   ├── common",["$","span",null,{"className":"token operator","children":"/"}],"           # ",["$","span",null,{"className":"token maybe-class-name","children":"Common"}]," ",["$","span",null,{"className":"token function","children":"libraries"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"391"}]," files",["$","span",null,{"className":"token punctuation","children":","}]," 150K",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3f3:["$","span",null,{"className":"code-line","children":["│   ├── nvidia",["$","span",null,{"className":"token operator","children":"/"}],"           # ",["$","span",null,{"className":"token maybe-class-name","children":"Core"}]," ",["$","span",null,{"className":"token constant","children":"GPU"}]," ",["$","span",null,{"className":"token function","children":"driver"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"1"}],["$","span",null,{"className":"token punctuation","children":","}],["$","span",null,{"className":"token number","children":"000"}],["$","span",null,{"className":"token operator","children":"+"}]," files",["$","span",null,{"className":"token punctuation","children":","}]," 500K",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3f4:["$","span",null,{"className":"code-line","children":["│   └── nvidia",["$","span",null,{"className":"token operator","children":"-"}],"modeset",["$","span",null,{"className":"token operator","children":"/"}],"   # ",["$","span",null,{"className":"token maybe-class-name","children":"Display"}]," mode",["$","span",null,{"className":"token operator","children":"-"}],["$","span",null,{"className":"token function","children":"setting"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token number","children":"100"}],["$","span",null,{"className":"token operator","children":"+"}]," files",["$","span",null,{"className":"token punctuation","children":","}]," 85K",["$","span",null,{"className":"token operator","children":"+"}]," ",["$","span",null,{"className":"token constant","children":"LOC"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}]
3f5:["$","span",null,{"className":"code-line","children":["└── ",["$","span",null,{"className":"token maybe-class-name","children":"Documentation"}],["$","span",null,{"className":"token operator","children":"/"}],"        # ",["$","span",null,{"className":"token maybe-class-name","children":"Build"}]," and installation guides\n"]}]
23:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
1f:null
21:{"metadata":[["$","title","0",{"children":"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis | 云微的胡思乱想"}],["$","meta","1",{"name":"robots","content":"index, follow"}],["$","meta","2",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","3",{"rel":"canonical","href":"https://www.yunwei37.com/blog/nvidia-open-driver-analysis"}],["$","link","4",{"rel":"alternate","type":"application/rss+xml","href":"https://www.yunwei37.com/feed.xml"}],["$","meta","5",{"property":"og:title","content":"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis"}],["$","meta","6",{"property":"og:url","content":"https://www.yunwei37.com/blog/nvidia-open-driver-analysis"}],["$","meta","7",{"property":"og:site_name","content":"云微的胡思乱想"}],["$","meta","8",{"property":"og:locale","content":"en_US"}],["$","meta","9",{"property":"og:image","content":"https://www.yunwei37.com/static/images/twitter-card.png"}],["$","meta","10",{"property":"og:type","content":"article"}],["$","meta","11",{"property":"article:published_time","content":"2025-10-14T16:00:00.000Z"}],["$","meta","12",{"property":"article:modified_time","content":"2025-10-14T16:00:00.000Z"}],["$","meta","13",{"property":"article:author","content":"Yusheng Zheng (云微)"}],["$","meta","14",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","15",{"name":"twitter:title","content":"NVIDIA Open GPU Kernel Modules Comprehensive Source Code Analysis"}],["$","meta","16",{"name":"twitter:image","content":"https://www.yunwei37.com/static/images/twitter-card.png"}]],"error":null,"digest":"$undefined"}
26:"$21:metadata"
